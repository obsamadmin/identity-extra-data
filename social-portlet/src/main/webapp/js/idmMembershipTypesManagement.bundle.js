define((function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=26)}({0:function(e,t,r){"use strict";function n(e,t,r,n,i,s,a,o){var p=typeof(e=e||{}).default;"object"!==p&&"function"!==p||(e=e.default);var m,l="function"==typeof e?e.options:e;if(t&&(l.render=t,l.staticRenderFns=r,l._compiled=!0),n&&(l.functional=!0),s&&(l._scopeId=s),a?(m=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),i&&i.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(a)},l._ssrRegister=m):i&&(m=o?function(){i.call(this,this.$root.$options.shadowRoot)}:i),m)if(l.functional){l._injectStyles=m;var h=l.render;l.render=function(e,t){return m.call(t),h(e,t)}}else{var c=l.beforeCreate;l.beforeCreate=c?[].concat(c,m):[m]}return{exports:e,options:l}}r.d(t,"a",(function(){return n}))},26:function(e,t,r){"use strict";r.r(t),r.d(t,"init",(function(){return $}));var n=function(){var e=this.$createElement,t=this._self._c||e;return t("v-app",{staticClass:"white"},[t("v-card",{attrs:{flat:""}},[t("membership-types-management-toolbar"),this._v(" "),t("membership-types-management-list"),this._v(" "),t("membership-types-management-form-drawer")],1)],1)};n._withStripped=!0;var i=r(0),s=Object(i.a)(null,n,[],!1,null,null,null);s.options.__file="src/main/webapp/vue-apps/idm-membership-types-management/components/MembershipTypesManagement.vue";var a=s.exports,o={data:function(){return{startTypingKeywordTimeout:0,itemsPerPageOptions:[20,50,100],membershipTypes:[],selectedMembershipType:null,deleteConfirmMessage:null,keyword:null,dateTimeFormat:{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"},pageSize:20,options:{page:1,itemsPerPage:20},loading:!0,error:null}},computed:{hasPages:function(){return this.membershipTypes.length>this.pageSize},filteredMembershipTypes:function(){var e=this;return this.keyword?this.membershipTypes.slice().filter((function(t){return t&&t.name&&t.name.toLowerCase().indexOf(e.keyword.toLowerCase())>=0||t.description&&t.description.toLowerCase().indexOf(e.keyword.toLowerCase())>=0})):this.membershipTypes.slice()},headers:function(){return[{text:this.$t&&this.$t("MembershipTypesManagement.name"),value:"name",align:"center",sortable:!1},{text:this.$t&&this.$t("MembershipTypesManagement.description"),value:"description",align:"center",sortable:!1},{text:this.$t&&this.$t("MembershipTypesManagement.createdDate"),value:"createdDate",align:"center",sortable:!1},{text:this.$t&&this.$t("MembershipTypesManagement.modifiedDate"),value:"modifiedDate",align:"center",sortable:!1},{text:this.$t&&this.$t("MembershipTypesManagement.actions"),value:"actions",align:"center",sortable:!1}]}},watch:{keyword:function(){this.options.page=1,this.searchMembershipTypes()}},created:function(){var e=this;this.$root.$on("searchMembershipType",this.updateSearchTerms),this.$root.$on("refreshMembershipTypes",this.searchMembershipTypes),this.searchMembershipTypes().finally((function(){return e.$root.$applicationLoaded()}))},methods:{updateSearchTerms:function(e){this.keyword=e},deleteMembershipType:function(e){this.selectedMembershipType=e,this.deleteConfirmMessage=this.$t("MembershipTypesManagement.message.confirmDelete",{0:this.selectedMembershipType.name}),this.$refs.deleteConfirmDialog.open()},deleteConfirm:function(){var e=this;return this.loading=!0,fetch(eXo.env.portal.context+"/"+eXo.env.portal.rest+"/v1/membershipTypes/"+this.selectedMembershipType.name,{method:"DELETE",credentials:"include"}).then((function(t){if(!t||!t.ok){if(t&&400===t.status)return t.text().then((function(e){throw new Error(e)}));throw new Error(e.$t("IDMManagement.error.UnknownServerError"))}return e.searchMembershipTypes()})).catch((function(t){var r="MembershipTypesManagement.error."+(t=t.message||String(t)),n=e.$t(r,{0:e.selectedMembershipType.name});n!==r&&(t=n),e.error=t,window.setTimeout((function(){e.error=null}),5e3)})).finally((function(){return e.loading=!1}))},searchMembershipTypes:function(){var e=this;return this.loading=!0,fetch(eXo.env.portal.context+"/"+eXo.env.portal.rest+"/v1/membershipTypes",{method:"GET",credentials:"include"}).then((function(t){if(t&&t.ok)return t.json();throw new Error(e.$t("IDMManagement.error.UnknownServerError"))})).then((function(t){e.membershipTypes=t||[]})).finally((function(){return e.loading=!1}))}}},p=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("exo-confirm-dialog",{ref:"deleteConfirmDialog",attrs:{message:e.deleteConfirmMessage,title:e.$t("MembershipTypesManagement.title.confirmDelete"),"ok-label":e.$t("MembershipTypesManagement.button.ok"),"cancel-label":e.$t("MembershipTypesManagement.button.cancel")},on:{ok:function(t){return e.deleteConfirm()}}}),e._v(" "),e.error?r("v-card-text",{staticClass:"errorMessage"},[r("v-alert",{attrs:{type:"error"}},[e._v("\n      "+e._s(e.error)+"\n    ")])],1):e._e(),e._v(" "),r("v-data-table",{staticClass:"data-table-light-border",attrs:{headers:e.headers,items:e.filteredMembershipTypes,loading:e.loading,options:e.options,"footer-props":{itemsPerPageOptions:e.itemsPerPageOptions},"hide-default-footer":!e.hasPages,"loading-text":e.$t("UsersManagement.loadingResults"),"no-results-text":e.$t("UsersManagement.noResultsFound"),"no-data-text":e.$t("UsersManagement.noData")},on:{"update:options":function(t){e.options=t}},scopedSlots:e._u([{key:"item.createdDate",fn:function(t){var n=t.item;return[r("date-format",{attrs:{value:n.createdDate&&n.createdDate.time,format:e.dateTimeFormat}})]}},{key:"item.modifiedDate",fn:function(t){var n=t.item;return[r("date-format",{attrs:{value:n.modifiedDate&&n.modifiedDate.time,format:e.dateTimeFormat}})]}},{key:"item.actions",fn:function(t){var n=t.item;return[r("v-btn",{attrs:{title:e.$t("MembershipTypesManagement.editMembershipType"),primary:"",icon:"",text:""},on:{click:function(t){return e.$root.$emit("editMembershipType",n)}}},[r("i",{staticClass:"uiIconEdit"})]),e._v(" "),r("v-btn",{attrs:{title:e.$t("MembershipTypesManagement.button.delete"),primary:"",icon:"",text:""},on:{click:function(t){return e.deleteMembershipType(n)}}},[r("i",{staticClass:"uiIconTrash"})])]}}])})],1)};p._withStripped=!0;var m=Object(i.a)(o,p,[],!1,null,null,null);m.options.__file="src/main/webapp/vue-apps/idm-membership-types-management/components/MembershipTypesManagementList.vue";var l=m.exports,h=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-toolbar",{attrs:{id:"membershipTypesManagementToolbar",flat:""}},[r("v-toolbar-title",[r("v-btn",{staticClass:"btn btn-primary addNewMembershipTypeButton",on:{click:function(t){return e.$root.$emit("addNewMembershipType")}}},[r("i",{staticClass:"uiIconSocSimplePlus uiIconWhite me-md-3"}),e._v(" "),r("span",{staticClass:"d-none d-sm-inline"},[e._v("\n        "+e._s(e.$t("MembershipTypesManagement.addMembershipType"))+"\n      ")])])],1),e._v(" "),r("v-spacer"),e._v(" "),r("v-scale-transition",[r("v-text-field",{staticClass:"inputMembershipTypeFilter pa-0 me-3 my-auto",attrs:{placeholder:e.$t("MembershipTypesManagement.filterBy"),"prepend-inner-icon":"fa-filter"},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}})],1)],1)};h._withStripped=!0;var c=Object(i.a)({data:function(){return{keyword:null}},watch:{keyword:function(){this.$root.$emit("searchMembershipType",this.keyword)}}},h,[],!1,null,null,null);c.options.__file="src/main/webapp/vue-apps/idm-membership-types-management/components/MembershipTypesManagementToolbar.vue";var d=c.exports,u={data:function(){return{error:null,fieldError:!1,drawer:!1,newMembershipType:!1,saving:!1,confirmNewPassword:null,membershipType:{}}},computed:{title:function(){return this.newMembershipType?this.$t("MembershipTypesManagement.addMembershipType"):this.$t("MembershipTypesManagement.editMembershipType")}},watch:{confirmNewPassword:function(){this.resetCustomValidity()},saving:function(){this.saving?this.$refs.membershipTypeFormDrawer.startLoading():this.$refs.membershipTypeFormDrawer.endLoading()},drawer:function(){var e=this;this.drawer?(this.$refs.membershipTypeFormDrawer.open(),window.setTimeout((function(){e.newMembershipType?e.$refs.nameInput.focus():e.$refs.descriptionInput.focus()}),200)):this.$refs.membershipTypeFormDrawer.close()}},created:function(){this.$root.$on("addNewMembershipType",this.addNewMembershipType),this.$root.$on("editMembershipType",this.editMembershipType)},methods:{resetCustomValidity:function(){this.$refs.nameInput.setCustomValidity("")},addNewMembershipType:function(){this.membershipType={},this.newMembershipType=!0,this.drawer=!0},editMembershipType:function(e){this.membershipType=Object.assign({},e),this.newMembershipType=!1,this.drawer=!0},saveMembershipType:function(e){var t=this;if(!this.membershipType.name||this.membershipType.name.length<3||this.membershipType.name.length>30)this.handleError(this.$t("MembershipTypesManagement.error.invalidRoleName"));else if(!this.membershipType.description||this.membershipType.description.length<3||this.membershipType.description.length>255)this.handleError(this.$t("MembershipTypesManagement.error.invalidRoleDescription"));else if(e&&(e.preventDefault(),e.stopPropagation()),this.error=null,this.fieldError=!1,this.resetCustomValidity(),this.$refs.membershipTypeForm.validate()&&this.$refs.membershipTypeForm.$el.reportValidity())return this.saving=!0,fetch(eXo.env.portal.context+"/"+eXo.env.portal.rest+"/v1/membershipTypes",{method:this.newMembershipType?"POST":"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(this.membershipType)}).then((function(e){if(!e||!e.ok){if(400===e.status)return e.text().then((function(e){throw t.fieldError=e,new Error(e)}));throw new Error(t.$t("IDMManagement.error.UnknownServerError"))}})).then((function(){return t.$root.$emit("refreshMembershipTypes")})).then((function(){return t.$refs.membershipTypeFormDrawer.close()})).catch(this.handleError).finally((function(){return t.saving=!1}))},cancel:function(){this.drawer=!1},handleError:function(e){var t=this;this.resetCustomValidity(),e?(this.fieldError&&"NAME:ALREADY_EXISTS"===this.fieldError?this.$refs.nameInput.setCustomValidity(this.$t("MembershipTypesManagement.message.sameNameAlreadyExists")):(this.error=String(e),window.setTimeout((function(){t.error=null}),5e3)),window.setTimeout((function(){t.$refs.membershipTypeForm.validate()&&t.$refs.membershipTypeForm.$el.reportValidity()}),200)):this.error=null}}},f=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("exo-drawer",{ref:"membershipTypeFormDrawer",attrs:{id:"membershipTypeFormDrawer",right:""},on:{closed:function(t){e.drawer=!1}}},[r("template",{slot:"title"},[e._v("\n    "+e._s(e.title)+"\n  ")]),e._v(" "),r("template",{slot:"content"},[r("v-form",{ref:"membershipTypeForm",staticClass:"form-horizontal pt-0 pb-4",attrs:{flat:""},on:{submit:e.saveMembershipType}},[e.error?r("v-card-text",{staticClass:"errorMessage"},[r("v-alert",{attrs:{type:"error"}},[e._v("\n          "+e._s(e.error)+"\n        ")])],1):e._e(),e._v(" "),r("v-card-text",{staticClass:"d-flex membershipTypeNameLabel flex-grow-1 text-no-wrap text-left font-weight-bold pb-2"},[e._v("\n        "+e._s(e.$t("MembershipTypesManagement.name"))),e.newMembershipType?[e._v("*")]:e._e()],2),e._v(" "),r("v-card-text",{staticClass:"d-flex membershipTypeNameField py-0"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.membershipType.name,expression:"membershipType.name"}],ref:"nameInput",staticClass:"ignore-vuetify-classes flex-grow-1",attrs:{disabled:e.saving||!e.newMembershipType,autofocus:e.drawer,placeholder:e.$t("MembershipTypesManagement.namePlaceholder"),type:"text",maxlength:"2000",required:""},domProps:{value:e.membershipType.name},on:{input:function(t){t.target.composing||e.$set(e.membershipType,"name",t.target.value)}}})]),e._v(" "),r("v-card-text",{staticClass:"d-flex descriptionLabel flex-grow-1 text-no-wrap text-left font-weight-bold pb-2"},[e._v("\n        "+e._s(e.$t("MembershipTypesManagement.description"))+"\n      ")]),e._v(" "),r("v-card-text",{staticClass:"d-flex descriptionField py-0"},[r("textarea",{directives:[{name:"model",rawName:"v-model",value:e.membershipType.description,expression:"membershipType.description"}],ref:"descriptionInput",staticClass:"ignore-vuetify-classes flex-grow-1 textarea-no-resize",attrs:{disabled:e.saving,placeholder:e.$t("MembershipTypesManagement.descriptionPlaceholder"),type:"text",maxlength:"2000",required:""},domProps:{value:e.membershipType.description},on:{input:function(t){t.target.composing||e.$set(e.membershipType,"description",t.target.value)}}})])],1)],1),e._v(" "),r("template",{slot:"footer"},[r("div",{staticClass:"d-flex"},[r("v-spacer"),e._v(" "),r("v-btn",{staticClass:"btn me-2",attrs:{disabled:e.saving},on:{click:e.cancel}},[e._v("\n        "+e._s(e.$t("MembershipTypesManagement.button.cancel"))+"\n      ")]),e._v(" "),r("v-btn",{staticClass:"btn btn-primary",attrs:{disabled:e.saving,loading:e.saving},on:{click:e.saveMembershipType}},[e._v("\n        "+e._s(e.$t("MembershipTypesManagement.button.save"))+"\n      ")])],1)])],2)};f._withStripped=!0;var y=Object(i.a)(u,f,[],!1,null,null,null);y.options.__file="src/main/webapp/vue-apps/idm-membership-types-management/components/MembershipTypesManagementFormDrawer.vue";var b={"membership-types-management":a,"membership-types-management-toolbar":d,"membership-types-management-list":l,"membership-types-management-form-drawer":y.exports};for(var v in b)Vue.component(v,b[v]);if(extensionRegistry){var g=extensionRegistry.loadComponents("MembershipTypesManagement");g&&g.length>0&&g.forEach((function(e){Vue.component(e.componentName,e.componentOptions)}))}document.dispatchEvent(new CustomEvent("displayTopBarLoading"));var T="MembershipTypesManagement",M="undefined"!=typeof eXo?eXo.env.portal.language:"en",w=eXo.env.portal.context+"/"+eXo.env.portal.rest+"/i18n/bundle/locale.portlet.Portlets-"+M+".json";function $(){exoi18n.loadLanguageAsync(M,w).then((function(e){Vue.createApp({mounted:function(){document.dispatchEvent(new CustomEvent("hideTopBarLoading"))},template:'<membership-types-management id="'+T+'" />',vuetify:Vue.prototype.vuetifyOptions,i18n:e},"#"+T,"Membership Type Management")}))}}})}));