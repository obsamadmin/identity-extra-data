define((function(){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(i,o,function(t){return e[t]}.bind(null,o));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=29)}({0:function(e,t,n){"use strict";function i(e,t,n,i,o,s,r,a){var c=typeof(e=e||{}).default;"object"!==c&&"function"!==c||(e=e.default);var l,u="function"==typeof e?e.options:e;if(t&&(u.render=t,u.staticRenderFns=n,u._compiled=!0),i&&(u.functional=!0),s&&(u._scopeId=s),r?(l=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),o&&o.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(r)},u._ssrRegister=l):o&&(l=a?function(){o.call(this,this.$root.$options.shadowRoot)}:o),l)if(u.functional){u._injectStyles=l;var p=u.render;u.render=function(e,t){return l.call(t),p(e,t)}}else{var d=u.beforeCreate;u.beforeCreate=d?[].concat(d,l):[l]}return{exports:e,options:u}}n.d(t,"a",(function(){return i}))},1:function(e,t,n){"use strict";function i(){return fetch(Vue.prototype.$spacesConstants.SOCIAL_SPACE_API+"?sort=date&order=desc&limit="+Vue.prototype.$spacesConstants.SPACES_PER_PAGE+"&returnSize=true&expand=membersCount",{credentials:"include"}).then((function(e){return e.json()}))}function o(e){return fetch(Vue.prototype.$spacesConstants.SOCIAL_SPACE_API+"?q="+e+"&sort=date&order=desc&limit="+Vue.prototype.$spacesConstants.SPACES_PER_PAGE+"&returnSize=true&expand=membersCount",{credentials:"include"}).then((function(e){return e.json()}))}function s(e){return fetch(Vue.prototype.$spacesConstants.SOCIAL_SPACE_API+"?offset="+e+"&sort=date&order=desc&limit="+Vue.prototype.$spacesConstants.SPACES_PER_PAGE+"&returnSize=true&expand=membersCount",{credentials:"include"}).then((function(e){return e.json()}))}function r(e){return fetch("/rest/v1/social/spaces/"+e,{credentials:"include",method:"delete"})}function a(e,t){if(e&&t){var n=e.toLowerCase().split(" ").join("_"),i=t.toLowerCase().split("/"),o=i[i.length-1];return""+Vue.prototype.$spacesConstants.PORTAL+Vue.prototype.$spacesConstants.PROFILE_SPACE_LINK+o+"/"+n+"/settings"}return null}function c(e){return fetch(Vue.prototype.$spacesConstants.USER_API+"/"+e,{credentials:"include"}).then((function(e){return e.json()}))}function l(e){return fetch(Vue.prototype.$spacesConstants.GROUP_API+"?q="+e,{credentials:"include"}).then((function(e){return e.json()}))}function u(e){return fetch(Vue.prototype.$spacesConstants.SPACES_ADMINISTRATION_API+"/permissions/"+e,{headers:{"Content-Type":"application/json"},credentials:"include",method:"GET"}).then((function(e){return 200===e.status?e.json():e.text()}))}function p(){return fetch(Vue.prototype.$spacesConstants.SPACES_ADMINISTRATION_API+"/permissions/canCreatespaces/"+eXo.env.portal.userName,{headers:{"Content-Type":"application/json"},credentials:"include",method:"GET"}).then((function(e){if(e&&e.ok)return e.json();throw new Error("Error to check can add spaces")}))}function d(e,t){return fetch(Vue.prototype.$spacesConstants.SPACES_ADMINISTRATION_API+"/permissions/"+e,{headers:{"Content-Type":"application/json"},credentials:"include",method:"PUT",body:JSON.stringify(t)})}function f(e,t){return fetch(Vue.prototype.$spacesConstants.SPACE_GROUP_BINDING_API+"/saveGroupsSpaceBindings/"+e,{headers:{"Content-Type":"application/json"},credentials:"include",method:"POST",body:JSON.stringify(t)})}function h(e){return fetch(Vue.prototype.$spacesConstants.SPACE_GROUP_BINDING_API+"/"+e,{credentials:"include"}).then((function(e){return e.json()}))}function m(e){return fetch(Vue.prototype.$spacesConstants.SPACE_GROUP_BINDING_API+"/removeGroupSpaceBinding/"+e,{credentials:"include",method:"delete"})}function v(){return fetch(Vue.prototype.$spacesConstants.SPACE_GROUP_BINDING_API+"/getGroupsTree",{credentials:"include"}).then((function(e){return e.json()}))}function g(){return fetch(Vue.prototype.$spacesConstants.SPACE_GROUP_BINDING_API+"/getBindingReportOperations",{credentials:"include"}).then((function(e){return e.json()}))}function S(e,t,n,i){window.open(Vue.prototype.$spacesConstants.SPACE_GROUP_BINDING_API+"/getExport?spaceId="+e+"&action="+t+"&group="+n+"&groupBindingId="+i,"_blank")}function y(e){return fetch(eXo.env.portal.context+"/"+eXo.env.portal.rest+"/management/featureservice/changeFeatureActivation?featureName=externalUsers&isActive="+e,{method:"POST",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json"}})}function _(){return fetch(eXo.env.portal.context+"/"+eXo.env.portal.rest+"/management/featureservice/isActiveFeature?featureName=externalUsers",{method:"GET",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(e){if(e&&e.ok)return e.json();throw new Error("Error when getting External Feature settings")}))}n.d(t,"i",(function(){return i})),n.d(t,"q",(function(){return o})),n.d(t,"k",(function(){return s})),n.d(t,"b",(function(){return r})),n.d(t,"h",(function(){return a})),n.d(t,"l",(function(){return c})),n.d(t,"e",(function(){return l})),n.d(t,"j",(function(){return u})),n.d(t,"a",(function(){return p})),n.d(t,"r",(function(){return d})),n.d(t,"p",(function(){return f})),n.d(t,"d",(function(){return h})),n.d(t,"n",(function(){return m})),n.d(t,"f",(function(){return v})),n.d(t,"c",(function(){return g})),n.d(t,"g",(function(){return S})),n.d(t,"o",(function(){return y})),n.d(t,"m",(function(){return _}))},2:function(e,t,n){"use strict";function i(e,t,n,i,o,s){return fetch(eXo.env.portal.context+"/"+eXo.env.portal.rest+"/v1/settings/"+e+","+t+"/"+n+","+i+"/"+o,{method:"PUT",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({value:s})}).then((function(e){if(!e||!e.ok)throw new Error("Response code indicates a server error",e)}))}n.r(t),n.d(t,"setSettingValue",(function(){return i}))},29:function(e,t,n){"use strict";n.r(t);var i=n(1),o={data:function(){return{itemsToShow:15,canAddSpaces:!1,showFilter:!1,allSpacesLink:eXo.env.portal.context+"/"+eXo.env.portal.portalName+"/all-spaces?createSpace=true",keyword:""}},created:function(){var e=this;Object(i.a)().then((function(t){e.canAddSpaces=t}))},methods:{closeMenu:function(){this.$emit("close-menu")},closeFilter:function(){this.keyword="",this.showFilter=!1},getSpacesPage:function(e){if(this.itemsToShow<=this.spacesList.length){var t=this.spacesList.length-this.itemsToShow;t>e?this.itemsToShow+=e:(this.itemsToShow+=t,this.showButton=!1)}}}},s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",{staticClass:"recentDrawer",attrs:{flat:""}},[n("v-flex",{staticClass:"filterSpaces"},[n("v-list-item",{staticClass:"recentSpacesTitle"},[n("v-list-item-icon",{staticClass:"d-flex d-sm-none backToMenu",on:{click:function(t){return e.closeMenu()}}},[n("i",{staticClass:"uiIcon uiArrowBackIcon"})]),e._v(" "),e.showFilter?n("v-list-item-content",{staticClass:"recentSpacesTitleLabel body-1"},[n("v-text-field",{staticClass:"recentSpacesFilter body-1 pt-0",attrs:{placeholder:"Filter spaces here","single-line":"","hide-details":"",required:"",autofocus:""},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}})],1):n("v-list-item-content",{staticClass:"recentSpacesTitleLabel body-1",on:{click:function(t){e.showFilter=!0}}},[e._v("\n        "+e._s(e.$t("menu.spaces.recentSpaces"))+"\n      ")]),e._v(" "),n("v-list-item-action",{staticClass:"recentSpacesTitleIcon"},[e.showFilter?n("v-btn",{attrs:{text:"",icon:"",color:"blue-grey darken-1",size:"22"},on:{click:function(t){return e.closeFilter()}}},[n("v-icon",{attrs:{size:"18"}},[e._v("mdi-close")])],1):n("v-btn",{attrs:{text:"",icon:"",color:"blue-grey darken-1",size:"20"},on:{click:function(t){e.showFilter=!0}}},[n("v-icon",{staticClass:"uiSearchIcon",attrs:{size:"18"}})],1)],1)],1)],1),e._v(" "),n("v-divider",{staticClass:"my-0"}),e._v(" "),n("v-list",{staticClass:"recentSpacesWrapper",attrs:{dense:"",nav:""}},[e.canAddSpaces?n("v-list-item",{staticClass:"addSpaces my-2",attrs:{href:e.allSpacesLink}},[n("v-list-item-avatar",{staticClass:"me-3",attrs:{size:"22",tile:""}},[n("i",{staticClass:"uiPlusEmptyIcon"})]),e._v(" "),n("v-list-item-content",{staticClass:"py-0 body-2 grey--text darken-4"},[e._v("\n        "+e._s(e.$t("menu.spaces.createSpace"))+"\n      ")])],1):e._e()],1),e._v(" "),n("exo-spaces-navigation-content",{staticClass:"recentSpacesWrapper",attrs:{limit:e.itemsToShow,"page-size":e.itemsToShow,keyword:e.keyword,"show-more-button":""}})],1)};s._withStripped=!0;var r=n(0),a=Object(r.a)(o,s,[],!1,null,null,null);a.options.__file="src/main/webapp/vue-apps/spaces-navigation/components/ExoRecentSpacesHamburgerNavigation.vue";var c=a.exports,l=n(2),u={data:function(){return{homeLink:eXo.env.portal.homeLink,selectedSpace:null,spacesLimit:7,secondLevelVueInstance:null}},computed:{confirmMessage:function(){return this.$t("menu.confirmation.message.changeHome",{0:"<b>"+(this.selectedSpace&&this.selectedSpace.displayName)+"</b>"})}},created:function(){var e=this;document.addEventListener("homeLinkUpdated",(function(){e.homeLink=eXo.env.portal.homeLink}))},methods:{changeHome:function(){var e=this;Object(l.setSettingValue)("USER",eXo.env.portal.userName,"PORTAL","HOME","HOME_PAGE_URI",this.selectedSpace.spaceUrl).then((function(){e.homeLink=eXo.env.portal.homeLink=e.selectedSpace.spaceUrl,$("#UserHomePortalLink").attr("href",e.homeLink),document.dispatchEvent(new CustomEvent("homeLinkUpdated",{detail:e.homeLink}))}))},selectHome:function(e,t){this.homeLink!==t.spaceUrl&&(e.preventDefault(),e.stopPropagation(),this.selectedSpace=t,this.$refs.confirmDialog.open())},mountSecondLevel:function(e){var t=this;if(this.secondLevelVueInstance){var n=$(e)[0];n.innerHTML="",n.appendChild(this.secondLevelVueInstance.$el)}else{var i=Vue.extend(c),o=this.vuetify;this.secondLevelVueInstance=new i({i18n:new VueI18n({locale:this.$i18n.locale,messages:this.$i18n.messages}),vuetify:o,el:e})}this.$nextTick().then((function(){t.secondLevelVueInstance.$on("close-menu",(function(){t.$emit("close-second-level")}))}))},openDrawer:function(){this.$emit("open-second-level")}}},p=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",{staticClass:"border-box-sizing",attrs:{"px-0":"","pt-0":""}},[n("v-row",{staticClass:"mx-0 clickable spacesNavigationTitle"},[n("v-list-item",{attrs:{link:""},on:{mouseover:function(t){return e.openDrawer()},click:function(t){return e.openDrawer()}}},[n("v-list-item-icon",{staticClass:"mb-2 mt-3 me-6 titleIcon"},[n("i",{staticClass:"uiIcon uiIconToolbarNavItem spacesIcon"})]),e._v(" "),n("v-list-item-content",{staticClass:"subtitle-1 titleLabel"},[e._v("\n        "+e._s(e.$t("menu.spaces.lastVisitedSpaces"))+"\n      ")]),e._v(" "),n("v-list-item-action",{staticClass:"my-0"},[n("i",{staticClass:"uiIcon uiArrowRightIcon",attrs:{color:"grey lighten-1"}})])],1)],1),e._v(" "),n("exo-spaces-navigation-content",{attrs:{limit:e.spacesLimit,"home-link":e.homeLink,"home-icon":"",shaped:""},on:{selectHome:e.selectHome}}),e._v(" "),n("exo-confirm-dialog",{ref:"confirmDialog",attrs:{title:e.$t("menu.confirmation.title.changeHome"),message:e.confirmMessage,"ok-label":e.$t("menu.confirmation.ok"),"cancel-label":e.$t("menu.confirmation.cancel")},on:{ok:e.changeHome}})],1)};p._withStripped=!0;var d=Object(r.a)(u,p,[],!1,null,null,null);d.options.__file="src/main/webapp/vue-apps/spaces-navigation/components/ExoSpacesHamburgerNavigation.vue";var f=d.exports,h={props:{homeLink:{type:String,default:null},homeIcon:{type:Boolean,default:!1},offset:{type:Number,default:0},limit:{type:Number,default:10},pageSize:{type:Number,default:10},keyword:{type:Object,default:null},showMoreButton:{type:Boolean,default:!1},shaped:{type:Boolean,default:!1}},data:function(){return{startSearchAfterInMilliseconds:400,endTypingKeywordTimeout:50,startTypingKeywordTimeout:0,spaces:[],initialized:!1,loadingSpaces:!1,limitToFetch:0,originalLimitToFetch:0}},computed:{canShowMore:function(){return this.showMoreButton&&!this.loadingSpaces&&this.spaces.length>=this.limitToFetch},filteredSpaces:function(){var e=this;return this.keyword?this.spaces.slice().filter((function(t){return t.displayName&&t.displayName.toLowerCase().indexOf(e.keyword.toLowerCase())>=0})):this.spaces},selectedSpaceIndex:function(){return this.spaces.findIndex((function(e){return e.spaceUrl===eXo.env.server.portalBaseURL||0===eXo.env.server.portalBaseURL.indexOf(e.spaceUrl+"/")}))}},watch:{keyword:function(){if(!this.keyword)return this.resetSearch(),void this.searchSpaces();this.startTypingKeywordTimeout=Date.now(),this.loadingSpaces||(this.loadingSpaces=!0,this.waitForEndTyping())},spaces:function(){this.spaces.forEach((function(e){e.spaceUrl=""+eXo.env.portal.context+e.spaceUrl}))},limitToFetch:function(){var e=this;this.searchSpaces().finally((function(){e.initialized||(e.initialized=!0,e.$root.$applicationLoaded())}))}},created:function(){this.originalLimitToFetch=this.limitToFetch=this.limit},methods:{searchSpaces:function(){var e=this;return fetch(eXo.env.portal.context+"/"+eXo.env.portal.rest+"/"+eXo.env.portal.containerName+"/social/spaces/lastVisitedSpace/list.json?offset="+this.offset+"&limit="+this.limitToFetch,{method:"GET",credentials:"include"}).then((function(e){return e&&e.ok&&e.json()})).then((function(t){return e.spaces=t&&t.spaces||[],e.$nextTick()})).then((function(){e.keyword&&e.filteredSpaces.length<e.originalLimitToFetch&&e.spaces.length>=e.limitToFetch&&(e.limitToFetch+=e.pageSize)})).finally((function(){return e.loadingSpaces=!1}))},resetSearch:function(){this.limitToFetch!==this.originalLimitToFetch&&(this.limitToFetch=this.originalLimitToFetch)},loadNextPage:function(){this.originalLimitToFetch=this.limitToFetch+=this.pageSize},waitForEndTyping:function(){var e=this;window.setTimeout((function(){Date.now()-e.startTypingKeywordTimeout>e.startSearchAfterInMilliseconds?e.searchSpaces():e.waitForEndTyping()}),this.endTypingKeywordTimeout)}}},m=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-flex",{staticClass:"mx-0 spacesNavigationContent",class:e.shaped&&"ms-12",attrs:{flat:""}},[n("v-list",{attrs:{shaped:e.shaped,dense:""}},[n("v-list-item-group",{model:{value:e.selectedSpaceIndex,callback:function(t){e.selectedSpaceIndex=t},expression:"selectedSpaceIndex"}},e._l(e.filteredSpaces,(function(t){return n("v-list-item",{key:t.id,staticClass:"px-2 spaceItem",class:e.homeIcon&&(e.homeLink===t.spaceUrl?"UserPageLinkHome":"UserPageLink"),attrs:{href:t.spaceUrl,link:""}},[n("v-list-item-avatar",{staticClass:"me-3 tile my-0 spaceAvatar",attrs:{size:"26",tile:""}},[n("v-img",{attrs:{src:t.avatarUrl}})],1),e._v(" "),n("v-list-item-content",[n("v-list-item-title",{staticClass:"body-2",domProps:{textContent:e._s(t.displayName)}})],1),e._v(" "),n("v-list-item-icon",{on:{click:function(n){return e.$emit("selectHome",n,t)}}},[n("span",{staticClass:"UserPageHome"})])],1)})),1)],1),e._v(" "),e.canShowMore?n("v-row",{staticClass:"mx-0 my-4 justify-center"},[n("v-btn",{attrs:{small:"",depressed:""},on:{click:function(t){return e.loadNextPage()}}},[e._v("\n      "+e._s(e.$t("menu.spaces.showMore"))+"\n    ")])],1):e._e()],1)};m._withStripped=!0;var v=Object(r.a)(h,m,[],!1,null,null,null);v.options.__file="src/main/webapp/vue-apps/spaces-navigation/components/ExoSpacesNavigationContent.vue";var g=v.exports,S={"exo-spaces-hamburger-menu-navigation":f,"exo-recent-spaces-hamburger-menu-navigation":c,"exo-spaces-navigation-content":g};for(var y in S)Vue.component(y,S[y]);if(extensionRegistry&&extensionRegistry.registerExtension("exo-hamburger-menu-navigation","exo-hamburger-menu-navigation-items",{id:"HamburgerMenuNavigationSpaces",priority:20,secondLevel:!0,vueComponent:f}),extensionRegistry){var _=extensionRegistry.loadComponents("SpacesHamburgerNavigation");_&&_.length>0&&_.forEach((function(e){Vue.component(e.componentName,e.componentOptions)}))}document.dispatchEvent(new CustomEvent("exo-hamburger-menu-navigation-refresh"))}})}));