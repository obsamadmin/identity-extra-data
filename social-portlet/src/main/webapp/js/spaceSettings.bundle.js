define((function(){return function(t){var e={};function a(i){if(e[i])return e[i].exports;var n=e[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,a),n.l=!0,n.exports}return a.m=t,a.c=e,a.d=function(t,e,i){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(a.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)a.d(i,n,function(e){return t[e]}.bind(null,n));return i},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="",a(a.s=16)}({0:function(t,e,a){"use strict";function i(t,e,a,i,n,s,r,c){var o=typeof(t=t||{}).default;"object"!==o&&"function"!==o||(t=t.default);var p,l="function"==typeof t?t.options:t;if(e&&(l.render=e,l.staticRenderFns=a,l._compiled=!0),i&&(l.functional=!0),s&&(l._scopeId=s),r?(p=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),n&&n.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(r)},l._ssrRegister=p):n&&(p=c?function(){n.call(this,this.$root.$options.shadowRoot)}:n),p)if(l.functional){l._injectStyles=p;var d=l.render;l.render=function(t,e){return p.call(e),d(t,e)}}else{var u=l.beforeCreate;l.beforeCreate=u?[].concat(u,p):[p]}return{exports:t,options:l}}a.d(e,"a",(function(){return i}))},16:function(t,e,a){"use strict";a.r(e),a.d(e,"init",(function(){return X}));var i={data:function(){return{spaceId:eXo.env.portal.spaceId,displaySpaceExternalSettings:!0,spaceExternalSettings:[]}},created:function(){var t,e=this,a=extensionRegistry.loadComponents("external-space").map((function(t){return t.componentOptions.componentImpl}));(t=this.spaceExternalSettings).push.apply(t,function(t){if(Array.isArray(t)){for(var e=0,a=Array(t.length);e<t.length;e++)a[e]=t[e];return a}return Array.from(t)}(a)),document.addEventListener("hideSettingsApps",(function(){return e.displaySpaceExternalSettings=!1})),document.addEventListener("showSettingsApps",(function(){return e.displaySpaceExternalSettings=!0}))},mounted:function(){var t=this;this.$nextTick().then((function(){return t.$root.$applicationLoaded()}))}},n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",{staticClass:"transparent",attrs:{flat:""}},[a("space-setting-general",{staticClass:"mb-6",attrs:{"space-id":t.spaceId}}),t._v(" "),a("space-setting-applications",{staticClass:"mb-6",attrs:{"space-id":t.spaceId}}),t._v(" "),t.displaySpaceExternalSettings?[t._l(t.spaceExternalSettings,(function(e,i){return[a(e,{key:e.name,tag:"component",attrs:{index:i,"space-id":t.spaceId}})]}))]:t._e()],2)};n._withStripped=!0;var s=a(0),r=Object(s.a)(i,n,[],!1,null,null,null);r.options.__file="src/main/webapp/vue-apps/space-settings/components/SpaceSettings.vue";var c=r.exports,o={props:{spaceId:{type:String,default:null},maxUploadSize:{type:Number,default:2}},data:function(){return{id:"Settings"+parseInt(1e4*Math.random()).toString().toString(),displayed:!0}},created:function(){var t=this;document.addEventListener("hideSettingsApps",(function(e){e&&e.detail&&t.id!==e.detail&&(t.displayed=!1)})),document.addEventListener("showSettingsApps",(function(){return t.displayed=!0}))},methods:{openDrawer:function(){this.$refs.spaceFormDrawer.open(this.spaceId)}}},p=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.displayed?a("div",[a("v-card",{staticClass:"border-radius",attrs:{flat:""}},[a("v-list",{attrs:{"two-line":""}},[a("v-list-item",[a("v-list-item-content",[a("v-list-item-title",{staticClass:"title text-color"},[t._v("\n            "+t._s(t.$t("SpaceSettings.general"))+"\n          ")])],1),t._v(" "),a("v-list-item-action",[a("v-btn",{attrs:{small:"",icon:""},on:{click:t.openDrawer}},[a("i",{staticClass:"uiIconEdit uiIconLightBlue pb-2"})])],1)],1)],1),t._v(" "),a("space-setting-form-drawer",{ref:"spaceFormDrawer",attrs:{"max-upload-size":t.maxUploadSize}})],1)],1):t._e()};p._withStripped=!0;var l=Object(s.a)(o,p,[],!1,null,null,null);l.options.__file="src/main/webapp/vue-apps/space-settings/components/SpaceSettingGeneral.vue";var d=l.exports,u={props:{maxUploadSize:{type:Number,default:function(){return 0}}},data:function(){return{savingSpace:!1,spaceSaved:!1,space:{},spaceToUpdate:{},error:null,template:null,spaceTemplate:null,templates:[]}},computed:{saveButtonDisabled:function(){return this.savingSpace||this.spaceSaved||!this.space.id}},watch:{savingSpace:function(){this.savingSpace?this.$refs.spaceFormDrawer.startLoading():this.$refs.spaceFormDrawer.endLoading()}},mounted:function(){var t=this;this.$spaceService.getSpaceTemplates().then((function(e){return t.templates=e||[],t.spaceTemplate=t.templates.length&&t.templates[0]||null,t.template=t.spaceTemplate&&t.spaceTemplate.name,t.$nextTick()}))},methods:{open:function(t){this.savingSpace=!1,this.spaceSaved=!1,this.error=null,this.template=null,this.spaceTemplate=null,this.spaceToUpdate=null,this.$refs.spaceAvatar&&this.$refs.spaceAvatar.reset(),this.space={},this.$spaceService.getSpaceById(t).then(this.editSpace)},editSpace:function(t){(t=t.detail&&t.detail.data||t)&&t.id?(this.spaceToUpdate=t,this.space=Object.assign({},t),this.template=this.space.template,this.$refs.spaceFormDrawer.open()):console.warn("space does not have an id ",t," ignore user action")},cancel:function(){this.$refs.spaceFormDrawer.close()},handleImageUploadError:function(t){var e=this;t&&(String(t).indexOf(this.$uploadService.avatarExcceedsLimitError)>=0?this.error=this.$t("SpaceSettings.label.avatarExcceededAllowedSize",{0:this.maxUploadSize}):this.error=String(t),window.setTimeout((function(){e.error=null}),5e3))},saveSpace:function(t){var e=this;t&&(t.preventDefault(),t.stopPropagation()),this.spaceSaved||this.savingSpace||(this.error=null,this.savingSpace=!0,this.$spaceService.updateSpace({id:this.space.id,displayName:this.space.displayName,description:this.space.description,visibility:this.space.visibility,subscription:this.space.subscription,avatarId:this.space.avatarId}).then((function(t){Object.assign(e.spaceToUpdate,t,{managers:e.spaceToUpdate.managers}),e.spaceSaved=!0,document.dispatchEvent(new CustomEvent("spaceDetailUpdated",{detail:e.spaceToUpdate})),window.setTimeout((function(){e.$refs.spaceFormDrawer.close()}),200),window.location.href=eXo.env.portal.context+"/g/"+t.groupId.replace(/\//g,":")+"/"+t.prettyName+"/settings"})).catch((function(t){console.warn("Error updating space ",e.space,t),String(t).indexOf("SPACE_ALREADY_EXIST")>=0?e.error=e.$t("SpaceSettings.error.spaceWithSameNameExists"):String(t).indexOf("INVALID_SPACE_NAME")>=0?e.error=e.$t("spacesList.error.InvalidSpaceName"):e.error=e.$t("SpaceSettings.error.unknownErrorWhenSavingSpace")})).finally((function(){return e.savingSpace=!1})))}}},v=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("exo-drawer",{ref:"spaceFormDrawer",staticClass:"spaceFormDrawer",attrs:{right:""}},[a("template",{slot:"title"},[t._v("\n    "+t._s(t.$t("SpaceSettings.general"))+"\n  ")]),t._v(" "),a("template",{slot:"content"},[a("form",{ref:"form",staticClass:"ma-4 d-flex row",attrs:{disabled:t.savingSpace||t.spaceSaved},on:{submit:t.saveSpace}},[a("div",{staticClass:"width-full d-flex"},[a("space-setting-avatar",{ref:"spaceAvatar",staticClass:"mx-auto mb-6 mt-2",attrs:{"avatar-url":t.space.avatarUrl,"max-upload-size":t.maxUploadSize,hover:""},on:{error:t.handleImageUploadError},model:{value:t.space.avatarId,callback:function(e){t.$set(t.space,"avatarId",e)},expression:"space.avatarId"}})],1),t._v(" "),a("v-label",{attrs:{for:"name"}},[t._v("\n        "+t._s(t.$t("SpaceSettings.label.name"))+"\n      ")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.space.displayName,expression:"space.displayName"}],staticClass:"input-block-level ignore-vuetify-classes my-3",attrs:{placeholder:t.$t("SpaceSettings.label.displayName"),type:"text",name:"name",maxlength:"200",autofocus:"",required:""},domProps:{value:t.space.displayName},on:{input:function(e){e.target.composing||t.$set(t.space,"displayName",e.target.value)}}}),t._v(" "),a("v-label",{attrs:{for:"description"}},[t._v("\n        "+t._s(t.$t("SpaceSettings.label.description"))+"\n      ")]),t._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.space.description,expression:"space.description"}],staticClass:"input-block-level ignore-vuetify-classes my-3",attrs:{placeholder:t.$t("SpaceSettings.label.description"),name:"description",rows:"20",maxlength:"2000",noresize:""},domProps:{value:t.space.description},on:{input:function(e){e.target.composing||t.$set(t.space,"description",e.target.value)}}}),t._v(" "),a("v-label",{attrs:{for:"spaceTemplate"}},[t._v("\n        "+t._s(t.$t("SpaceSettings.label.spaceTemplate"))+"\n      ")]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.template,expression:"template"}],staticClass:"input-block-level ignore-vuetify-classes my-3",attrs:{name:"spaceTemplate",disabled:"",required:""},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.template=e.target.multiple?a:a[0]}}},t._l(t.templates,(function(e){return a("option",{key:e.name,domProps:{value:e.name}},[t._v("\n          "+t._s(e.resolvedLabel||e.name)+"\n        ")])})),0),t._v(" "),a("div",{staticClass:"caption font-italic font-weight-light ps-1 muted"},[t._v(t._s(t.spaceTemplate&&t.spaceTemplate.resolvedDescription||""))]),t._v(" "),a("div",{staticClass:"d-flex flex-wrap pt-2"},[a("label",{staticClass:"v-label theme--light my-auto float-left",attrs:{for:"hidden"}},[t._v("\n          "+t._s(t.$t("SpaceSettings.label.hidden"))+"\n        ")]),t._v(" "),a("v-switch",{staticClass:"float-left my-0 ms-4",attrs:{"true-value":"hidden","false-value":"private"},model:{value:t.space.visibility,callback:function(e){t.$set(t.space,"visibility",e)},expression:"space.visibility"}})],1),t._v(" "),a("div",{staticClass:"caption font-italic font-weight-light ps-1 muted mb-2 mt-1"},[t._v("\n        "+t._s(t.$t("SpaceSettings.description."+(t.space.visibility||"hidden")))+"\n      ")]),t._v(" "),a("div",{staticClass:"d-flex flex-wrap pt-2"},[a("label",{staticClass:"v-label theme--light",attrs:{for:"hidden"}},[t._v("\n          "+t._s(t.$t("SpaceSettings.label.registration"))+"\n        ")]),t._v(" "),a("v-radio-group",{staticClass:"mt-2 ms-2",attrs:{mandatory:"",row:"",inset:""},model:{value:t.space.subscription,callback:function(e){t.$set(t.space,"subscription",e)},expression:"space.subscription"}},[a("v-radio",{staticClass:"my-0",attrs:{label:t.$t("SpaceSettings.label.open"),value:"open"}}),t._v(" "),a("v-radio",{staticClass:"my-0",attrs:{label:t.$t("SpaceSettings.label.validation"),value:"validation"}}),t._v(" "),a("v-radio",{staticClass:"my-0",attrs:{label:t.$t("SpaceSettings.label.closed"),value:"closed"}})],1)],1),t._v(" "),a("div",{staticClass:"caption font-italic font-weight-light ps-1 muted"},[t._v(t._s(t.$t("SpaceSettings.description."+(t.space.subscription||"open"))))]),t._v(" "),t.error?a("v-alert",{attrs:{type:"error"}},[t._v("\n        "+t._s(t.error)+"\n      ")]):t._e()],1)]),t._v(" "),a("template",{slot:"footer"},[a("div",{staticClass:"d-flex"},[a("v-spacer"),t._v(" "),a("v-btn",{staticClass:"btn me-2",attrs:{disabled:t.savingSpace||t.spaceSaved},on:{click:t.cancel}},[[t._v("\n          "+t._s(t.$t("SpaceSettings.button.cancel"))+"\n        ")]],2),t._v(" "),a("v-btn",{staticClass:"btn btn-primary",attrs:{loading:t.savingSpace,disabled:t.saveButtonDisabled},on:{click:t.saveSpace}},[t.spaceSaved?a("v-icon",[t._v("mdi-check-all")]):[t._v("\n          "+t._s(t.$t("SpaceSettings.button.updateSpace"))+"\n        ")]],2)],1)])],2)};v._withStripped=!0;var f=Object(s.a)(u,v,[],!1,null,null,null);f.options.__file="src/main/webapp/vue-apps/space-settings/components/SpaceSettingFormDrawer.vue";var m=f.exports,h={props:{avatarUrl:{type:Object,default:function(){return null}},maxUploadSize:{type:Number,default:function(){return 0}},save:{type:Boolean,default:function(){return!1}},hover:{type:Boolean,default:function(){return!1}},size:{type:Number,default:function(){return 165}},value:{type:String,default:function(){return null}}},data:function(){return{sendingImage:!1,avatarData:null}},computed:{maxUploadSizeInBytes:function(){return 1024*Number(this.maxUploadSize)*1024}},watch:{sendingImage:function(){this.sendingImage?document.dispatchEvent(new CustomEvent("displayTopBarLoading")):document.dispatchEvent(new CustomEvent("hideTopBarLoading"))}},methods:{reset:function(){this.avatarData=null,this.sendingImage=!1},uploadAvatar:function(t){var e=this;if(t&&t.size){if(t.type&&0!==t.type.indexOf("image/"))return void this.$emit("error",this.$t("profile.warning.message.fileType"));if(t.size>this.maxUploadSizeInBytes)return void this.$emit("error",this.$uploadService.avatarExcceedsLimitError);this.sendingImage=!0;var a=this;return this.$uploadService.upload(t).then((function(i){var n=new FileReader;n.onload=function(t){a.avatarData=t.target.result,a.$forceUpdate()},n.readAsDataURL(t),e.$emit("input",i)})).then((function(){return e.$emit("refresh")})).catch((function(t){return e.$emit("error",t)})).finally((function(){e.sendingImage=!1}))}}}},g=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-avatar",{staticClass:"spaceAvatar",class:t.hover&&"spaceAvatarHoverEdit",attrs:{size:t.size,tile:""}},[a("v-img",{attrs:{src:t.avatarData||t.avatarUrl||""}}),t._v(" "),t.sendingImage?t._e():a("v-file-input",{directives:[{name:"show",rawName:"v-show",value:t.hover,expression:"hover"}],ref:"avatarInput",staticClass:"changeAvatarButton",attrs:{"prepend-icon":"mdi-camera",accept:"image/*",clearable:""},on:{change:t.uploadAvatar}})],1)};g._withStripped=!0;var S=Object(s.a)(h,g,[],!1,null,null,null);S.options.__file="src/main/webapp/vue-apps/space-settings/components/SpaceSettingAvatar.vue";var _=S.exports,b={props:{spaceId:{type:Number,default:0}},data:function(){return{id:"SpaceApplications"+parseInt(1e4*Math.random()).toString().toString(),applications:null,displayed:!0,displayDetails:!1}},created:function(){var t=this;document.addEventListener("hideSettingsApps",(function(e){e&&e.detail&&t.id!==e.detail&&(t.displayed=!1)})),document.addEventListener("showSettingsApps",(function(){return t.displayed=!0}))},methods:{refresh:function(){var t=this;document.dispatchEvent(new CustomEvent("refreshSpaceNavigations")),this.$spaceService.getSpaceApplications(this.spaceId).then((function(e){t.applications=e}))},openDetail:function(){var t=this;this.$spaceService.getSpaceApplications(this.spaceId).then((function(e){t.applications=e,document.dispatchEvent(new CustomEvent("hideSettingsApps",{detail:t.id})),t.displayDetails=!0}))},closeDetail:function(){document.dispatchEvent(new CustomEvent("showSettingsApps")),this.displayDetails=!1}}},y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.displayed?a("div",[t.displayDetails?a("space-setting-applications-window",{attrs:{"space-id":t.spaceId,applications:t.applications},on:{back:t.closeDetail,refresh:t.refresh}}):a("v-card",{staticClass:"border-radius",attrs:{flat:""}},[a("v-list",[a("v-list-item",[a("v-list-item-content",[a("v-list-item-title",{staticClass:"title text-color"},[t._v("\n            "+t._s(t.$t("SpaceSettings.applications"))+"\n          ")])],1),t._v(" "),a("v-list-item-action",[a("v-btn",{attrs:{small:"",icon:""},on:{click:t.openDetail}},[a("v-icon",{staticClass:"text-sub-title",attrs:{size:"24"}},[t._v("\n              "+t._s(t.$vuetify.rtl?"fa-caret-left":"fa-caret-right")+"\n            ")])],1)],1)],1)],1)],1)],1):t._e()};y._withStripped=!0;var w=Object(s.a)(b,y,[],!1,null,null,null);w.options.__file="src/main/webapp/vue-apps/space-settings/components/SpaceSettingApplications.vue";var x=w.exports,A={props:{spaceId:{type:String,default:null},applications:{type:Array,default:function(){return[]}}},data:function(){return{deleteApplicationMessage:null,selectedApplication:null,saving:!1}},methods:{moveAfter:function(t){var e=this;this.$spaceService.moveApplicationDown(this.spaceId,t.id).then((function(){return e.$emit("refresh")}))},moveBefore:function(t){var e=this;this.$spaceService.moveApplicationUp(this.spaceId,t.id).then((function(){return e.$emit("refresh")}))},remove:function(t){this.selectedApplication=t,this.deleteApplicationMessage=this.$t("SpaceSettings.deleApplicationConfirm",{0:t.displayName}),this.$refs.deleteApplicationDialog.open()},removeConfirm:function(){var t=this;this.$spaceService.removeApplication(this.spaceId,this.selectedApplication.id).then((function(){return t.$emit("refresh")}))},openDrawer:function(){this.$refs.spaceSettingAddApplicationDrawer.open()}}},C=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{attrs:{flat:""}},[a("exo-confirm-dialog",{ref:"deleteApplicationDialog",attrs:{message:t.deleteApplicationMessage,title:t.$t("SpaceSettings.title.deleteApplicationConfirm"),"ok-label":t.$t("SpaceSettings.label.yes"),"cancel-label":t.$t("SpaceSettings.label.no")},on:{ok:function(e){return t.removeConfirm()}}}),t._v(" "),a("v-toolbar",{staticClass:"border-box-sizing",attrs:{flat:""}},[a("v-btn",{staticClass:"mx-1",attrs:{icon:"",height:"36",width:"36"},on:{click:function(e){return t.$emit("back")}}},[a("v-icon",{attrs:{size:"20"}},[t._v("\n        "+t._s(t.$vuetify.rtl?"mdi-arrow-right":"mdi-arrow-left")+"\n      ")])],1),t._v(" "),a("v-toolbar-title",{staticClass:"ps-0"},[t._v("\n      "+t._s(t.$t("SpaceSettings.applications"))+"\n    ")]),t._v(" "),a("v-spacer")],1),t._v(" "),a("v-container",{staticClass:"border-box-sizing"},[a("v-row",{attrs:{dense:""}},[t._l(t.applications,(function(e,i){return a("v-col",{key:e.id,staticClass:"SpaceApplicationCard my-1 mx-auto mx-sm-1"},[a("space-setting-application-card",{attrs:{application:e,"space-id":t.spaceId,index:i,length:t.applications.length},on:{moveAfter:function(a){return t.moveAfter(e)},moveBefore:function(a){return t.moveBefore(e)},remove:function(a){return t.remove(e)}}})],1)})),t._v(" "),a("v-col",{staticClass:"SpaceApplicationCard dashed-border my-1 mx-auto mx-sm-1"},[a("v-btn",{staticClass:"primary--text",attrs:{width:"100%",height:"100%",text:""},on:{click:t.openDrawer}},[a("v-icon",[t._v("mdi-plus")])],1)],1)],2)],1),t._v(" "),a("space-setting-add-application-drawer",{ref:"spaceSettingAddApplicationDrawer",attrs:{"space-id":t.spaceId,"installed-applications":t.applications},on:{refresh:function(e){return t.$emit("refresh")}}})],1)};C._withStripped=!0;var I=Object(s.a)(A,C,[],!1,null,null,null);I.options.__file="src/main/webapp/vue-apps/space-settings/components/SpaceSettingApplicationsWindow.vue";var E=I.exports,D={props:{spaceId:{type:Object,default:null},application:{type:String,default:null},index:{type:Number,default:0},length:{type:Number,default:0}},data:function(){return{displayActionMenu:!1}},computed:{firstApplication:function(){return 0===this.index},lastApplication:function(){return this.index===this.length-1},applicationRemovable:function(){return this.application&&this.application.id&&this.application.removable&&"true"===String(this.application.removable)},applicationId:function(){return this.application&&this.application.id},applicationName:function(){return this.application&&this.$t("SpaceSettings.application."+(/\s/.test(this.application.displayName)?this.application.displayName.replace(/ /g,".").toLowerCase():this.application.displayName.toLowerCase())+".title")},applicationDescription:function(){return this.application&&this.$t("SpaceSettings.application."+(/\s/.test(this.application.displayName)?this.application.displayName.replace(/ /g,".").toLowerCase():this.application.displayName.toLowerCase())+".description")},applicationIcon:function(){return this.application&&this.application.id?"uiIconApp"+(""+this.application.id.charAt(0).toUpperCase()+this.application.id.substring(1))+" uiIconDefaultApp":""}},mounted:function(){var t=this;this.spaceId&&$(document).on("click",(function(e){e.target&&!$(e.target).parents("#"+t.applicationId).length&&(t.displayActionMenu=!1)}))}},N=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{attrs:{id:t.applicationId,flat:""}},[a("div",{staticClass:"d-flex flex-no-wrap"},[a("v-avatar",{staticClass:"SpaceApplicationCardImage mx-1 my-auto",attrs:{size:"45",tile:""}},[a("i",{class:t.applicationIcon})]),t._v(" "),a("div",{staticClass:"flex-grow-1 SpaceApplicationCardBody text-truncate"},[a("div",{staticClass:"text-truncate subtitle-1 px-1 pt-4 text-color SpaceApplicationCardTitle",attrs:{title:t.applicationName}},[t._v("\n        "+t._s(t.applicationName)+"\n      ")]),t._v(" "),a("v-card-subtitle",{staticClass:"text-truncate subtitle-2 px-1 pt-0 text-sub-title SpaceApplicationCardDescription",attrs:{title:t.applicationDescription}},[t._v("\n        "+t._s(t.applicationDescription||t.applicationName)+"\n      ")])],1),t._v(" "),a("div",{staticClass:"SpaceApplicationCardAction"},[t.spaceId?a("v-btn",{staticClass:"primary--text",attrs:{icon:"",text:""},on:{click:function(e){t.displayActionMenu=!0}}},[a("v-icon",{attrs:{size:"16"}},[t._v("mdi-dots-vertical")])],1):a("v-btn",{staticClass:"primary--text",attrs:{text:"",height:"100%",width:"100%px"},on:{click:function(e){return t.$emit("add")}}},[a("v-icon",{attrs:{size:"36"}},[t._v("mdi-plus")])],1),t._v(" "),a("v-menu",{ref:"actionMenu",attrs:{attach:"#"+t.applicationId,transition:"slide-x-reverse-transition","offset-y":"",right:"","close-on-click":"","close-on-content-click":""},model:{value:t.displayActionMenu,callback:function(e){t.displayActionMenu=e},expression:"displayActionMenu"}},[a("v-list",{staticClass:"pa-0",attrs:{dense:""}},[t.applicationRemovable?a("v-list-item",{on:{click:function(e){return t.$emit("remove")}}},[a("v-list-item-title",[t._v("\n              "+t._s(t.$t("SpaceSettings.button.remove"))+"\n            ")])],1):t._e(),t._v(" "),t.firstApplication?t._e():a("v-list-item",{on:{click:function(e){return t.$emit("moveBefore")}}},[a("v-list-item-title",[t._v("\n              "+t._s(t.$t("SpaceSettings.button.moveBefore"))+"\n            ")])],1),t._v(" "),t.lastApplication?t._e():a("v-list-item",{on:{click:function(e){return t.$emit("moveAfter")}}},[a("v-list-item-title",[t._v("\n              "+t._s(t.$t("SpaceSettings.button.moveAfter"))+"\n            ")])],1)],1)],1)],1)],1)])};N._withStripped=!0;var T=Object(s.a)(D,N,[],!1,null,null,null);T.options.__file="src/main/webapp/vue-apps/space-settings/components/SpaceSettingApplicationCard.vue";var k=T.exports,L={props:{spaceId:{type:String,default:null},installedApplications:{type:Array,default:function(){return[]}}},data:function(){return{savingSpace:!1,applications:[]}},computed:{filteredApplications:function(){var t=this;return this.applications&&this.applications.length?this.applications.filter((function(e){return!t.installedApplications.find((function(t){return t.contentId===e.contentId}))})):[]}},watch:{savingSpace:function(){this.savingSpace?this.$refs.spaceApplicationInstallerDrawer.startLoading():this.$refs.spaceApplicationInstallerDrawer.endLoading()}},created:function(){var t=this;this.$spaceService.getSpaceApplicationsChoices().then((function(e){return t.applications=e}))},methods:{open:function(){this.savingSpace=!1,this.$refs.spaceApplicationInstallerDrawer.open()},cancel:function(){this.$refs.spaceApplicationInstallerDrawer.close()},addApplication:function(t){var e=this;this.savingSpace||(this.savingSpace=!0,this.$spaceService.addApplication(this.spaceId,t.contentId.split("/")[1]).then((function(){e.$emit("refresh"),window.setTimeout((function(){e.$refs.spaceApplicationInstallerDrawer.close()}),200)})).catch((function(t){console.warn("Error adding application to space ",t)})).finally((function(){return e.savingSpace=!1})))}}},O=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("exo-drawer",{ref:"spaceApplicationInstallerDrawer",staticClass:"spaceApplicationInstallerDrawer",attrs:{right:""}},[a("template",{slot:"title"},[t._v("\n    "+t._s(t.$t("SpaceSettings.title.addApplication"))+"\n  ")]),t._v(" "),a("template",{slot:"content"},t._l(t.filteredApplications,(function(e){return a("div",{key:e.id,staticClass:"d-flex flex-no-wrap justify-space-between border-radius border-color ma-3"},[a("space-setting-application-card",{staticClass:"flex-grow-1",attrs:{application:e},on:{add:function(a){return t.addApplication(e)}}})],1)})),0)],2)};O._withStripped=!0;var U=Object(s.a)(L,O,[],!1,null,null,null);U.options.__file="src/main/webapp/vue-apps/space-settings/components/SpaceSettingAddApplicationDrawer.vue";var z={"space-settings":c,"space-setting-general":d,"space-setting-avatar":_,"space-setting-form-drawer":m,"space-setting-applications":x,"space-setting-applications-window":E,"space-setting-application-card":k,"space-setting-add-application-drawer":U.exports};for(var j in z)Vue.component(j,z[j]);if(extensionRegistry){var B=extensionRegistry.loadComponents("SpaceSettings");B&&B.length>0&&B.forEach((function(t){Vue.component(t.componentName,t.componentOptions)}))}document.dispatchEvent(new CustomEvent("displayTopBarLoading"));var M=eXo&&eXo.env.portal.language||"en",P=eXo.env.portal.context+"/"+eXo.env.portal.rest+"/i18n/bundle/locale.portlet.Portlets-"+M+".json",R="SpaceSettings",F=R+"_"+eXo.env.portal.spaceId;function X(t){exoi18n.loadLanguageAsync(M,P).then((function(e){var a=document.createElement("div");a.id=R,Vue.createApp({mounted:function(){document.dispatchEvent(new CustomEvent("hideTopBarLoading"))},template:"<space-settings\n                  v-cacheable=\"{cacheId: '"+F+'\'}"\n                  id="'+R+'"\n                  :max-upload-size="'+t+'"\n                  class="singlePageApplication" />',i18n:e,vuetify:Vue.prototype.vuetifyOptions},a,"Space Settings")}))}}})}));