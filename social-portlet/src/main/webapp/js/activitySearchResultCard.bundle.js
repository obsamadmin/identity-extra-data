define((function(){return function(t){var e={};function i(r){if(e[r])return e[r].exports;var n=e[r]={i:r,l:!1,exports:{}};return t[r].call(n.exports,n,n.exports,i),n.l=!0,n.exports}return i.m=t,i.c=e,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(r,n,function(e){return t[e]}.bind(null,n));return r},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=52)}({0:function(t,e,i){"use strict";function r(t,e,i,r,n,s,o,a){var c=typeof(t=t||{}).default;"object"!==c&&"function"!==c||(t=t.default);var l,u="function"==typeof t?t.options:t;if(e&&(u.render=e,u.staticRenderFns=i,u._compiled=!0),r&&(u.functional=!0),s&&(u._scopeId=s),o?(l=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),n&&n.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(o)},u._ssrRegister=l):n&&(l=a?function(){n.call(this,this.$root.$options.shadowRoot)}:n),l)if(u.functional){u._injectStyles=l;var p=u.render;u.render=function(t,e){return l.call(e),p(t,e)}}else{var h=u.beforeCreate;u.beforeCreate=h?[].concat(h,l):[l]}return{exports:t,options:u}}i.d(e,"a",(function(){return r}))},52:function(t,e,i){"use strict";i.r(e),i.d(e,"formatSearchResult",(function(){return u}));var r={props:{term:{type:String,default:null},result:{type:Object,default:null}},data:function(){return{maxEllipsisHeight:90,lineHeight:22,profileActionExtensions:[]}},computed:{isComment:function(){return this.result&&this.result.comment},activity:function(){return this.isComment&&this.result.comment||this.result},poster:function(){return this.activity&&this.activity.poster.profile},posterFullname:function(){return this.poster&&this.poster.fullname},posterUsername:function(){return this.poster&&this.poster.username},posterIsExternal:function(){return this.poster&&(this.poster.isExternal||this.poster.external)},streamOwner:function(){return this.activity&&this.activity.streamOwner.space||this.activity.streamOwner.profile},spaceDisplayName:function(){return this.streamOwner&&this.streamOwner.displayName},excerpts:function(){return this.activity&&this.activity.excerpts},excerptHtml:function(){return this.excerpts&&this.excerpts.join("\r\n...")},excerptText:function(){return $("<div />").html(this.excerptHtml).text()},activityType:function(){return this.result?this.result.comment&&this.result.comment.type||this.result.type:""},activityIcon:function(){if(!this.result)return"";var t=this.activityType&&this.activityType.replace(":","_")||"";return"uiIconActivity "+(t="uiIcon"+t.charAt(0).toUpperCase()+t.substring(1))},activityLikes:function(){if(!this.result)return"";var t=this.result.likesCount||0;return this.$t("Search.activity.likesCount",{0:t})},activityComments:function(){var t=this.result.commentsCount||0;return this.$t("Search.activity.commentsCount",{0:t})},activityReactions:function(){return this.activityLikes+", "+this.activityComments},activityStreamOwner:function(){return this.result&&(this.result.streamOwner.profile&&this.result.streamOwner.profile.fullname||this.result.streamOwner.space&&this.result.streamOwner.space.displayName)||""},postedTime:function(){return this.result?this.result.comment&&this.result.comment.postedTime||this.result.postedTime:""},link:function(){return this.isComment?"/"+eXo.env.portal.containerName+"/"+eXo.env.portal.portalName+"/activity?id="+this.result.id+"#comment-comment"+this.result.comment.id:"/"+eXo.env.portal.containerName+"/"+eXo.env.portal.portalName+"/activity?id="+this.activity.id}},created:function(){this.profileActionExtensions=extensionRegistry.loadExtensions("profile-extension","action")||[]},mounted:function(){this.computeEllipsis()},methods:{computeEllipsis:function(){if(this.excerptHtml&&0!==this.excerptHtml.length||this.result&&this.result.body&&0!==this.result.body.length){var t=this.$refs.excerptNode;if(t){t.innerHTML=this.excerptHtml||this.result.body;var e=20,i=t.getBoundingClientRect().height||this.lineHeight;if(i>this.maxEllipsisHeight){for(;i>this.maxEllipsisHeight;){var r=this.deleteLastChars(t.innerHTML.replace(/&[a-z]*;/,""),e),n=t.innerHTML.length;t.innerHTML=r,t.innerHTML.length===n&&(e*=2),i=t.getBoundingClientRect().height||this.lineHeight}t.innerHTML=this.deleteLastChars(t.innerHTML,4),t.innerHTML=t.innerHTML+"..."}}}},deleteLastChars:function(t,e){">"===t.slice(-1)&&(t=t.replace(/<[a-zA-Z 0-9 "'=]*><\/[a-zA-Z 0-9]*>$/g,"")),e=e||1;var i="";return">"===(t=t.replace(/<br>(\.*)$/g,"")).slice(-1)?(i=(t=t.replace(/(<br>)*$/g,"")).replace(new RegExp("([^>]{"+e+"})(</)([a-zA-Z 0-9]*)(>)$"),"$2$3"),(i=$("<div />").html(i).html().replace(/&[a-z]*;/,"")).length===t.length&&(i=t.replace(new RegExp("([^>]*)(</)([a-zA-Z 0-9]*)(>)$"),"$2$3"))):i=t.substring(0,t.trimRight().length-e),i}}},n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-card",{staticClass:"d-flex flex-column border-radius box-shadow",attrs:{flat:"","min-height":"227"}},[t.poster?i("v-card-text",{staticClass:"px-2 pt-2 pb-0"},[i("exo-user-avatar",{attrs:{username:t.posterUsername,fullname:t.posterFullname,title:t.posterFullname,external:t.posterIsExternal,"retrieve-extra-information":!1,"avatar-class":"border-color"}},[i("template",{slot:"subTitle"},[i("date-format",{attrs:{value:t.postedTime}})],1)],2)],1):t._e(),t._v(" "),i("div",{staticClass:"mx-auto flex-grow-1 px-3 py-0"},[i("div",{ref:"excerptNode",staticClass:"text-wrap text-break caption",attrs:{title:t.excerptText}})]),t._v(" "),i("v-list",{staticClass:"light-grey-background flex-grow-0 border-top-color no-border-radius pa-0"},[i("v-list-item",{staticClass:"px-0 pt-1 pb-2",attrs:{href:t.link}},[i("v-list-item-icon",{staticClass:"mx-0 my-auto"},[i("span",{staticClass:"tertiary--text ps-1 pe-2 display-1",class:t.activityIcon})]),t._v(" "),i("v-list-item-content",[i("v-list-item-title",{attrs:{title:t.activityReactions}},[t._v("\n          "+t._s(t.activityReactions)+"\n        ")]),t._v(" "),i("v-list-item-subtitle",[t._v("\n          "+t._s(t.activityStreamOwner)+"\n        ")])],1)],1)],1)],1)};n._withStripped=!0;var s=i(0),o=Object(s.a)(r,n,[],!1,null,null,null);o.options.__file="src/main/webapp/vue-apps/search-activity/components/SearchActivityCard.vue";var a={"activity-search-result-card":o.exports};for(var c in a)Vue.component(c,a[c]);if(extensionRegistry){var l=extensionRegistry.loadComponents("SearchActivityCard");l&&l.length>0&&l.forEach((function(t){Vue.component(t.componentName,t.componentOptions)}))}function u(t){return t}}})}));