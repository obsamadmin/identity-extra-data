define((function(){return function(e){var t={};function r(i){if(t[i])return t[i].exports;var n=t[i]={i:i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=e,r.c=t,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(i,n,function(t){return e[t]}.bind(null,n));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=24)}({0:function(e,t,r){"use strict";function i(e,t,r,i,n,o,s,a){var l=typeof(e=e||{}).default;"object"!==l&&"function"!==l||(e=e.default);var c,p="function"==typeof e?e.options:e;if(t&&(p.render=t,p.staticRenderFns=r,p._compiled=!0),i&&(p.functional=!0),o&&(p._scopeId=o),s?(c=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),n&&n.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(s)},p._ssrRegister=c):n&&(c=a?function(){n.call(this,this.$root.$options.shadowRoot)}:n),c)if(p.functional){p._injectStyles=c;var f=p.render;p.render=function(e,t){return c.call(t),f(e,t)}}else{var u=p.beforeCreate;p.beforeCreate=u?[].concat(u,c):[c]}return{exports:e,options:p}}r.d(t,"a",(function(){return i}))},24:function(e,t,r){"use strict";r.r(t),r.d(t,"init",(function(){return D}));var i={data:function(){return{owner:eXo.env.portal.profileOwner===eXo.env.portal.userName,experiences:null,error:null,saving:null,workExperiencesDrawerKey:0}},computed:{mobile:function(){return"sm"===this.$vuetify.breakpoint.name||"xs"===this.$vuetify.breakpoint.name}},created:function(){var e=this;this.refresh().finally((function(){return e.$root.$applicationLoaded()}))},mounted:function(){this.experiences&&this.$root.$emit("application-loaded")},methods:{refresh:function(){var e=this;return this.$userService.getUser(eXo.env.portal.profileOwner,"all").then((function(t){return e.setExperiences(t&&t.experiences),e.$nextTick()})).catch((function(e){console.warn("Error while retrieving user details",e)})).finally((function(){e.$nextTick().then((function(){return e.$root.$emit("application-loaded")}))}))},setExperiences:function(e){e=e||[];try{e.sort((function(e,t){return e.isCurrent?-1:t.isCurrent?1:e.startDate||t.startDate?e.startDate?t.startDate?new Date(t.startDate).getTime()-new Date(e.startDate).getTime():-1:1:0}))}catch(e){console.error("Error sorting experiences",e)}this.experiences=e},initWorkExperiencesDrawer:function(){this.workExperiencesDrawerKey+=1},editWorkExperiences:function(){this.$refs.profileWorkExperiencesDrawer.open()}}},n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-app",{staticClass:"white",class:e.owner?"profileWorkExperience":"profileWorkExperienceOther"},[r("v-toolbar",{staticClass:"border-box-sizing",attrs:{color:"white",flat:""}},[r("div",{staticClass:"text-header-title text-sub-title"},[e._v("\n      "+e._s(e.$t("profileWorkExperiences.title"))+"\n    ")]),e._v(" "),r("v-spacer"),e._v(" "),e.owner?r("v-btn",{attrs:{icon:"",outlined:"",small:""},on:{click:e.editWorkExperiences}},[r("i",{staticClass:"uiIconEdit uiIconLightBlue pb-2"})]):e._e()],1),e._v(" "),e.owner||e.experiences&&e.experiences.length?r("div",{staticClass:"px-4 pb-6 white"},[r("v-timeline",{staticClass:"workExperienceTimeLine",attrs:{dense:e.mobile,"align-top":""}},[e.experiences&&e.experiences.length?e._l(e.experiences,(function(e){return r("profile-work-experience-item",{key:e.id,attrs:{experience:e}})})):e.owner?[r("profile-work-experience-item",{attrs:{empty:""}})]:e._e()],2)],1):e._e(),e._v(" "),r("profile-work-experience-drawer",{key:e.workExperiencesDrawerKey,ref:"profileWorkExperiencesDrawer",attrs:{experiences:e.experiences},on:{refreshWorkExperiencesDrawer:e.initWorkExperiencesDrawer,refresh:function(t){return e.setExperiences(t)}}})],1)};n._withStripped=!0;var o=r(0),s=Object(o.a)(i,n,[],!1,null,null,null);s.options.__file="src/main/webapp/vue-apps/profile-work-experience/components/ProfileWorkExperiences.vue";var a=s.exports,l={props:{experience:{type:Object,default:function(){return null}},empty:{type:Boolean,default:!1}},data:function(){return{dateFormat:{year:"numeric",month:"long",day:"numeric"}}},computed:{mobile:function(){return"sm"===this.$vuetify.breakpoint.name||"xs"===this.$vuetify.breakpoint.name},displayedDate:function(){if(this.empty)return this.$t("profileWorkExperiences.date");if(this.experience.isCurrent&&this.experience.startDate){var e=this.$dateUtil.formatDateObjectToDisplay(new Date(this.experience.startDate),this.dateFormat);return this.$t("profileWorkExperiences.since",{0:e})}var t=this.$dateUtil.formatDateObjectToDisplay(new Date(this.experience.startDate),this.dateFormat),r=this.$dateUtil.formatDateObjectToDisplay(new Date(this.experience.endDate),this.dateFormat);return this.$t("profileWorkExperiences.fromTo",{0:t,1:r})}}},c=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-timeline-item",{staticClass:"workExperienceTimeLineItem",class:e.mobile?"caption":"",attrs:{small:e.mobile,color:"tertiary",right:""}},[e.mobile?e._e():r("div",{staticClass:"workExperienceTimeLineItemTime",attrs:{slot:"opposite"},slot:"opposite"},[e._v("\n    "+e._s(e.displayedDate)+"\n  ")]),e._v(" "),r("v-card",[e.experience?r("v-card-text",{staticClass:"pb-3"},[e.mobile?r("div",{staticClass:"text-color font-weight-bold mb-2",domProps:{textContent:e._s(e.displayedDate)}}):e._e(),e._v(" "),r("div",{staticClass:"text-color",domProps:{textContent:e._s(e.experience.position)}}),e._v(" "),r("div",{staticClass:"text-sub-title",domProps:{textContent:e._s(e.experience.company)}})]):e._e(),e._v(" "),r("v-card-text",{staticClass:"pt-0"},[e.empty?[r("div",{staticClass:"text-color pt-2"},[e._v("\n          "+e._s(e.$t("profileWorkExperiences.emptyExperienceDescription"))+"\n        ")])]:[r("h6",{directives:[{name:"autolinker",rawName:"v-autolinker",value:e.experience.description,expression:"experience.description"}],staticClass:"paragraph text-color font-weight-light pb-1 mt-0"}),e._v(" "),r("div",{staticClass:"text-color font-weight-bold"},[e._v("\n          "+e._s(e.$t("profileWorkExperiences.appliedSkills"))+" : "+e._s(e.experience.skills)+"\n        ")])]],2)],1)],1)};c._withStripped=!0;var p=Object(o.a)(l,c,[],!1,null,null,null);p.options.__file="src/main/webapp/vue-apps/profile-work-experience/components/ProfileWorkExperienceItem.vue";var f=p.exports,u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d={props:{experiences:{type:Object,default:function(){return null}}},data:function(){return{hasCurrentExperience:!1,openedExperiences:[],saving:null,error:null}},created:function(){this.experiences&&(this.hasCurrentExperience=this.experiences.some((function(e){return e.isCurrent})))},methods:{save:function(){var e=this;this.error=null;var t=this.experiences.filter((function(e){return e&&(e.startDate||e.endDate||e.position||e.company||e.description||e.skills)})),r=!0,i=!1,n=void 0;try{var o=function(){var t=s.value,r=e.experiences.findIndex((function(e){return e.id===t.id}));if(e.openedExperiences=[],e.openedExperiences.push(r),!t.endDate&&e.hasCurrentExperience&&!t.id)return e.handleError(e.$t("profileWorkExperiences.invalidStillInPosition")),{v:void 0};if(t.startDate&&t.endDate&&new Date(t.startDate)>=new Date(t.endDate))return e.handleError(e.$t("profileWorkExperiences.invalidEndDate")),{v:void 0};if(t.company&&t.position){if(e.$refs.profileContactForm.$el[r+1]){if(t.company=t.company.trim(),null!==t.company&&t.company.length>250||null!==t.company&&t.company.length<3)return e.$refs.profileContactForm.$el[r+1].setCustomValidity(e.$t("profileWorkExperiences.invalidFieldLength",{0:e.$t("profileWorkExperiences.company"),1:3,2:250})),"break";t.company&&e.$refs.profileContactForm.$el[r+1].setCustomValidity("")}if(e.$refs.profileContactForm.$el[r+2]){if(t.position=t.position.trim(),null!==t.position&&t.position.length>100||null!==t.position&&t.position.length<3)return e.$refs.profileContactForm.$el[r+2].setCustomValidity(e.$t("profileWorkExperiences.invalidFieldLength",{0:e.$t("profileWorkExperiences.jobTitle"),1:3,2:100})),"break";t.position&&e.$refs.profileContactForm.$el[r+2].setCustomValidity("")}if(e.$refs.profileContactForm.$el[r+3]){if(t.description&&t.description.length>1500)return e.$refs.profileContactForm.$el[r+3].setCustomValidity(e.$t("profileWorkExperiences.invalidFieldLength",{0:e.$t("profileWorkExperiences.jobDetails"),1:0,2:1500})),"break";t.description&&e.$refs.profileContactForm.$el[r+3].setCustomValidity("")}if(t.endDate&&new Date(t.endDate)>new Date)return e.handleError(e.$t("profileWorkExperiences.beforeTodayEndDate")),"break";if(t.startDate&&new Date(t.startDate)>new Date)return e.handleError(e.$t("profileWorkExperiences.beforeTodayStartDate")),"break"}else{if(!t.company)return e.$refs.profileContactForm.$el[r+1]?(e.$refs.profileContactForm.$el[r+1].setCustomValidity(e.$t("profileWorkExperiences.invalidFieldLength",{0:e.$t("profileWorkExperiences.company"),1:3,2:250})),"break"):(e.handleError(e.$t("profileWorkExperiences.formValidationError")),"break");if(e.$refs.profileContactForm.$el[r+1]&&e.$refs.profileContactForm.$el[r+1].setCustomValidity(""),!t.position)return e.$refs.profileContactForm.$el[r+2]?(e.$refs.profileContactForm.$el[r+2].setCustomValidity(e.$t("profileWorkExperiences.invalidFieldLength",{0:e.$t("profileWorkExperiences.jobTitle"),1:3,2:100})),"break"):(e.handleError(e.$t("profileWorkExperiences.formValidationError")),"break");e.$refs.profileContactForm.$el[r+2]&&e.$refs.profileContactForm.$el[r+2].setCustomValidity("")}};e:for(var s,a=t[Symbol.iterator]();!(r=(s=a.next()).done);r=!0){var l=o();switch(l){case"break":break e;default:if("object"===(void 0===l?"undefined":u(l)))return l.v}}}catch(e){i=!0,n=e}finally{try{!r&&a.return&&a.return()}finally{if(i)throw n}}this.$refs.profileContactForm.validate()&&this.$refs.profileContactForm.$el.reportValidity()?(this.$refs.profileWorkExperiencesDrawer.startLoading(),this.saving=!0,this.$userService.updateProfileFields(eXo.env.portal.userName,{experiences:t},["experiences"]).then(this.refresh).then((function(){e.$refs.profileWorkExperiencesDrawer.close()})).catch(this.handleError).finally((function(){e.saving=!1,e.$refs.profileWorkExperiencesDrawer.endLoading(),e.$emit("refreshWorkExperiencesDrawer")}))):this.handleError(this.$t("profileWorkExperiences.formValidationError"))},handleError:function(e){var t=this;e&&(this.error=String(e),window.setTimeout((function(){t.error=null}),5e3))},refresh:function(){var e=this;return this.$userService.getUser(eXo.env.portal.profileOwner,"all").then((function(t){e.user=t,e.$emit("refresh",t&&t.experiences||[])})).catch((function(e){console.warn("Error while retrieving user details",e)}))},addNew:function(){this.experiences.unshift({}),this.openedExperiences.push(this.openedExperiences.length)},remove:function(e){var t=this.experiences.findIndex((function(t){return t===e}));this.openedExperiences.includes(t)&&this.openedExperiences.splice(this.openedExperiences.indexOf(t),1),this.experiences.splice(t,1)},cancel:function(){this.$refs.profileWorkExperiencesDrawer.close()},open:function(){var e=this.experiences?this.experiences.slice():[{}];this.experiences=e.map((function(e){return Object.assign({},e)})),this.$refs.profileWorkExperiencesDrawer.open()}}},x=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("exo-drawer",{ref:"profileWorkExperiencesDrawer",staticClass:"profileWorkExperiencesDrawer",attrs:{"body-classes":"hide-scroll decrease-z-index-more",right:""}},[r("template",{slot:"title"},[e._v("\n    "+e._s(e.$t("profileWorkExperiences.title"))+"\n  ")]),e._v(" "),r("template",{slot:"titleIcons"},[r("v-icon",{staticClass:"my-auto",on:{click:e.addNew}},[e._v("mdi-plus")])],1),e._v(" "),r("template",{slot:"content"},[r("v-form",{ref:"profileContactForm",staticClass:"form-horizontal pa-0",attrs:{flat:""}},[e.error?r("v-card-text",{staticClass:"errorBox"},[r("v-alert",{attrs:{type:"error"}},[e._v("\n          "+e._s(e.error)+"\n        ")])],1):e._e(),e._v(" "),e.experiences&&e.experiences.length?r("v-expansion-panels",{staticClass:"d-block border-box-sizing",attrs:{multiple:"",flat:""},model:{value:e.openedExperiences,callback:function(t){e.openedExperiences=t},expression:"openedExperiences"}},e._l(e.experiences,(function(t,i){return r("profile-work-experience-edit-item",{key:i,attrs:{experience:t},on:{remove:function(r){return e.remove(t)}}})})),1):e._e()],1)],1),e._v(" "),r("template",{slot:"footer"},[r("div",{staticClass:"d-flex"},[r("v-spacer"),e._v(" "),r("v-btn",{staticClass:"btn me-2",attrs:{disabled:e.saving},on:{click:e.cancel}},[e._v("\n        "+e._s(e.$t("profileWorkExperiences.cancel"))+"\n      ")]),e._v(" "),r("v-btn",{staticClass:"btn btn-primary",attrs:{disabled:e.saving,loading:e.saving},on:{click:e.save}},[e._v("\n        "+e._s(e.$t("profileWorkExperiences.save"))+"\n      ")])],1)])],2)};x._withStripped=!0;var v=Object(o.a)(d,x,[],!1,null,null,null);v.options.__file="src/main/webapp/vue-apps/profile-work-experience/components/ProfileWorkExperienceDrawer.vue";var m=v.exports,h={props:{experience:{type:Object,default:function(){return null}}},data:function(){return{isCurrent:null,endDate:null,company:null,position:null}},watch:{experience:function(){this.copyAtributes()},endDate:function(){this.experience.endDate=this.endDate},isCurrent:function(){this.experience.isCurrent=this.isCurrent,this.isCurrent&&(this.endDate="")}},created:function(){this.copyAtributes()},methods:{copyAtributes:function(){this.company=this.experience&&this.experience.company||"",this.position=this.experience&&this.experience.position||"",this.isCurrent=this.experience&&this.experience.isCurrent||!1,this.isCurrent?this.endDate="":this.endDate=this.experience&&this.experience.endDate||""}}},y=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.experience?r("v-expansion-panel",{staticClass:"profileWorkExperiencesEditItem border-color border-radius my-3 mx-2"},[r("v-expansion-panel-header",[e.experience.id?r("div",{staticClass:"truncate-text"},[r("div",[e._v(e._s(e.position))]),e._v(" "),r("div",{staticClass:"text-sub-title"},[e._v(e._s(e.company))])]):e._e()]),e._v(" "),r("v-expansion-panel-content",[r("v-card-text",{staticClass:"d-flex flex-grow-1 text-no-wrap text-left font-weight-bold pt-0 pb-2"},[e._v("\n      "+e._s(e.$t("profileWorkExperiences.company"))+"\n    ")]),e._v(" "),r("v-card-text",{staticClass:"d-flex py-0"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.experience.company,expression:"experience.company"}],staticClass:"ignore-vuetify-classes flex-grow-1",attrs:{type:"text",maxlength:"2000",required:""},domProps:{value:e.experience.company},on:{input:function(t){t.target.composing||e.$set(e.experience,"company",t.target.value)}}})]),e._v(" "),r("v-card-text",{staticClass:"d-flex flex-grow-1 text-no-wrap text-left font-weight-bold pb-2"},[e._v("\n      "+e._s(e.$t("profileWorkExperiences.jobTitle"))+"\n    ")]),e._v(" "),r("v-card-text",{staticClass:"d-flex py-0"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.experience.position,expression:"experience.position"}],staticClass:"ignore-vuetify-classes flex-grow-1",attrs:{type:"text",maxlength:"2000",required:""},domProps:{value:e.experience.position},on:{input:function(t){t.target.composing||e.$set(e.experience,"position",t.target.value)}}})]),e._v(" "),r("v-card-text",{staticClass:"d-flex flex-grow-1 text-no-wrap text-left font-weight-bold pb-2"},[e._v("\n      "+e._s(e.$t("profileWorkExperiences.jobDetails"))+"\n    ")]),e._v(" "),r("v-card-text",{staticClass:"d-flex py-0"},[r("textarea",{directives:[{name:"model",rawName:"v-model",value:e.experience.description,expression:"experience.description"}],staticClass:"ignore-vuetify-classes flex-grow-1",attrs:{maxlength:"2000"},domProps:{value:e.experience.description},on:{input:function(t){t.target.composing||e.$set(e.experience,"description",t.target.value)}}})]),e._v(" "),r("v-card-text",{staticClass:"d-flex flex-grow-1 text-no-wrap text-left font-weight-bold pb-2"},[e._v("\n      "+e._s(e.$t("profileWorkExperiences.usedSkills"))+"\n    ")]),e._v(" "),r("v-card-text",{staticClass:"d-flex py-0"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.experience.skills,expression:"experience.skills"}],staticClass:"ignore-vuetify-classes flex-grow-1",attrs:{type:"text",maxlength:"2000"},domProps:{value:e.experience.skills},on:{input:function(t){t.target.composing||e.$set(e.experience,"skills",t.target.value)}}})]),e._v(" "),r("v-card-text",{staticClass:"d-flex text-color pb-2"},[r("div",{staticClass:"align-start flex-grow-1 text-no-wrap text-left font-weight-bold me-3"},[e._v("\n        "+e._s(e.$t("profileWorkExperiences.startDate"))+"\n      ")]),e._v(" "),r("div",{staticClass:"align-start flex-grow-1 text-no-wrap text-left font-weight-bold px-3"},[e._v("\n        "+e._s(e.$t("profileWorkExperiences.endDate"))+"\n      ")])]),e._v(" "),r("v-card-text",{staticClass:"d-flex py-0 profileWorkExperiencesDates"},[r("div",{staticClass:"align-start flex-grow-0 text-no-wrap text-left font-weight-bold half-width me-3"},[r("date-picker",{staticClass:"ignore-vuetify-classes",attrs:{left:e.$vuetify.rtl,top:"","return-iso":"",required:""},model:{value:e.experience.startDate,callback:function(t){e.$set(e.experience,"startDate",t)},expression:"experience.startDate"}})],1),e._v(" "),r("div",{staticClass:"align-end flex-grow-0 text-no-wrap text-left font-weight-bold half-width"},[r("date-picker",{staticClass:"ignore-vuetify-classes",attrs:{disabled:e.isCurrent,"min-value":e.experience.startDate,left:!e.$vuetify.rtl,top:"","return-iso":"",required:""},model:{value:e.endDate,callback:function(t){e.endDate=t},expression:"endDate"}})],1)]),e._v(" "),r("v-card-text",{staticClass:"d-flex"},[r("v-switch",{attrs:{label:e.$t("profileWorkExperiences.stillInPosition")},model:{value:e.isCurrent,callback:function(t){e.isCurrent=t},expression:"isCurrent"}})],1),e._v(" "),r("v-card-text",{staticClass:"d-flex py-0"},[r("v-btn",{staticClass:"pa-0",attrs:{color:"error",outlined:""},on:{click:function(t){return e.$emit("remove")}}},[r("i",{staticClass:"uiIconTrash pb-1 pe-2"}),e._v("\n        "+e._s(e.$t("profileWorkExperiences.removeExperience"))+"\n      ")])],1)],1)],1):e._e()};y._withStripped=!0;var _=Object(o.a)(h,y,[],!1,null,null,null);_.options.__file="src/main/webapp/vue-apps/profile-work-experience/components/ProfileWorkExperienceEditItem.vue";var w={"profile-work-experiences":a,"profile-work-experience-item":f,"profile-work-experience-drawer":m,"profile-work-experience-edit-item":_.exports};for(var b in w)Vue.component(b,w[b]);if(extensionRegistry){var k=extensionRegistry.loadComponents("ProfileWorkExperience");k&&k.length>0&&k.forEach((function(e){Vue.component(e.componentName,e.componentOptions)}))}document.dispatchEvent(new CustomEvent("displayTopBarLoading"));var E=eXo&&eXo.env.portal.language||"en",$="ProfileWorkExperience",C=$+"_"+eXo.env.portal.profileOwnerIdentityId,g=eXo.env.portal.context+"/"+eXo.env.portal.rest+"/i18n/bundle/locale.portlet.social.ProfileWorkExperience-"+E+".json";function D(){exoi18n.loadLanguageAsync(E,g).then((function(e){var t=document.createElement("div");t.id=$,Vue.createApp({mounted:function(){document.dispatchEvent(new CustomEvent("hideTopBarLoading"))},template:"<profile-work-experiences v-cacheable=\"{cacheId: '"+C+'\'}" id="'+$+'" />',i18n:e,vuetify:Vue.prototype.vuetifyOptions},t,"Profile Work Experience")}))}}})}));