define((function(){return function(t){var i={};function e(n){if(i[n])return i[n].exports;var a=i[n]={i:n,l:!1,exports:{}};return t[n].call(a.exports,a,a.exports,e),a.l=!0,a.exports}return e.m=t,e.c=i,e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:n})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,i){if(1&i&&(t=e(t)),8&i)return t;if(4&i&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(e.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&i&&"string"!=typeof t)for(var a in t)e.d(n,a,function(i){return t[i]}.bind(null,a));return n},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},e.p="",e(e.s=10)}({0:function(t,i,e){"use strict";function n(t,i,e,n,a,o,s,c){var r=typeof(t=t||{}).default;"object"!==r&&"function"!==r||(t=t.default);var m,l="function"==typeof t?t.options:t;if(i&&(l.render=i,l.staticRenderFns=e,l._compiled=!0),n&&(l.functional=!0),o&&(l._scopeId=o),s?(m=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),a&&a.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(s)},l._ssrRegister=m):a&&(m=c?function(){a.call(this,this.$root.$options.shadowRoot)}:a),m)if(l.functional){l._injectStyles=m;var d=l.render;l.render=function(t,i){return m.call(i),d(t,i)}}else{var u=l.beforeCreate;l.beforeCreate=u?[].concat(u,m):[m]}return{exports:t,options:l}}e.d(i,"a",(function(){return n}))},10:function(t,i,e){"use strict";e.r(i),e.d(i,"init",(function(){return qi}));var n={};e.r(n),e.d(n,"initCometd",(function(){return Fi})),e.d(n,"isDisconnected",(function(){return Vi}));var a={data:function(){return{loaded:!1,spaceId:eXo.env.portal.spaceId,forceReload:!1,activityId:null,activityTypes:{},activityActions:{},commentActions:{},extensionApp:"activity",activityTypeExtension:"type",activityActionExtension:"action",commentActionExtension:"comment-action"}},computed:{commentTypes:function(){return this.activityTypes},drawerParams:function(){return{activityTypes:this.activityTypes,activityActions:this.activityActions,commentTypes:this.commentTypes,commentActions:this.commentActions}}},created:function(){document.addEventListener("extension-"+this.extensionApp+"-"+this.activityTypeExtension+"-updated",this.refreshActivityTypes),document.addEventListener("extension-"+this.extensionApp+"-"+this.activityActionExtension+"-updated",this.refreshActivityActions),document.addEventListener("extension-"+this.extensionApp+"-"+this.commentActionExtension+"-updated",this.refreshCommentActions),this.refreshActivityTypes(),this.refreshActivityActions(),this.refreshCommentActions(),0===window.location.pathname.indexOf(this.$root.activityBaseLink)&&(this.$root.selectedActivityId=this.getQueryParam("id"),window.location.hash&&(this.$root.selectedCommentId=window.location.hash.replace("#comment-",""))),this.displayActivityDetail(this.$root.selectedActivityId,this.$root.selectedCommentId)},methods:{displayActivityDetail:function(t,i){var e=this;this.loaded=!1,this.$root.selectedActivityId=this.activityId=t,this.$root.selectedCommentId=window.location.hash.replace("#comment-",""),i&&!this.$root.selectedCommentId&&(this.$root.selectedCommentId=i,window.history.replaceState("",window.document.title,window.location.pathname+"?id="+t+"#comment-"+i),this.forceReload=!0),this.$nextTick().then((function(){return e.loaded=!0}))},refreshActivityTypes:function(){var t=this,i=extensionRegistry.loadExtensions(this.extensionApp,this.activityTypeExtension),e=!1;i.forEach((function(i){!i.type||!i.options||t.activityTypes[i.type]&&t.activityTypes[i.type]===i.options||(t.activityTypes[i.type]=i.options,e=!0)})),e&&(this.activityTypes=Object.assign({},this.activityTypes))},refreshActivityActions:function(){var t=this;extensionRegistry.loadExtensions(this.extensionApp,this.activityActionExtension).forEach((function(i){i.id&&(t.activityActions[i.id]=i)}))},refreshCommentActions:function(){var t=this;extensionRegistry.loadExtensions(this.extensionApp,this.commentActionExtension).forEach((function(i){i.id&&(t.commentActions[i.id]=i)}))},getQueryParam:function(t){var i=window.location.search.substring(1);return new URLSearchParams(i).get(t)}}},o=function(){var t=this,i=t.$createElement,e=t._self._c||i;return t.loaded?e("v-app",[e("activity-notification-alerts"),t._v(" "),e("activity-stream-list",{attrs:{"activity-id":t.activityId,"activity-types":t.activityTypes,"activity-actions":t.activityActions,"comment-types":t.commentTypes,"comment-actions":t.commentActions},on:{"activity-select":t.displayActivityDetail}}),t._v(" "),e("extension-registry-components",{staticClass:"drawer-parent",attrs:{params:t.drawerParams,name:"ActivityStream",type:"activity-stream-drawers","parent-element":"div",element:"div"}})],1):t._e()};o._withStripped=!0;var s=e(0),c=Object(s.a)(a,o,[],!1,null,null,null);c.options.__file="src/main/webapp/vue-apps/activity-stream/components/ActivityStream.vue";var r=c.exports,m={data:function(){return{height:"380px"}},computed:{welcomeTitle:function(){return this.$t&&this.$t("UIActivity.label.Welcome_Space",{"space name":"<strong>"+eXo.env.portal.spaceDisplayName+"</strong>"})},welcomeSpaceParagraph1:function(){return this.$t&&this.$t("UIActivity.label.empty_space_stream_paragraph_one")},welcomeSpaceParagraph2:function(){return this.$t&&this.$t("UIActivity.label.empty_space_stream_paragraph_two")},conclusionParagraph:function(){return this.$t&&this.$t("UIActivity.label.empty_stream_lets_begin")}}},l=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"d-flex flex-column white border-radius"},[e("img",{staticClass:"mx-auto",style:{maxHeight:t.height},attrs:{height:t.height,src:"/social-portlet/images/emptySpaceStream.png",loading:"lazy"}}),t._v(" "),e("div",{staticClass:"mx-4 mb-4"},[e("p",{directives:[{name:"sanitized-html",rawName:"v-sanitized-html",value:t.welcomeTitle,expression:"welcomeTitle"}]}),t._v(" "),e("div",{directives:[{name:"sanitized-html",rawName:"v-sanitized-html",value:t.welcomeSpaceParagraph1,expression:"welcomeSpaceParagraph1"}],staticClass:"mb-4"}),t._v(" "),e("div",{directives:[{name:"sanitized-html",rawName:"v-sanitized-html",value:t.welcomeSpaceParagraph2,expression:"welcomeSpaceParagraph2"}],staticClass:"mb-4"}),t._v(" "),e("div",{directives:[{name:"sanitized-html",rawName:"v-sanitized-html",value:t.conclusionParagraph,expression:"conclusionParagraph"}]})])])};l._withStripped=!0;var d=Object(s.a)(m,l,[],!1,null,null,null);d.options.__file="src/main/webapp/vue-apps/activity-stream/components/empty-stream/ActivityStreamEmptyMessageSpace.vue";var u=d.exports,h={data:function(){return{branding:null,height:"380px",productName:eXo.env.portal.productName}},computed:{profileName:function(){return this.$currentUserIdentity&&this.$currentUserIdentity.profile&&this.$currentUserIdentity.profile.fullname},profileUri:function(){return eXo.env.portal.context+"/"+eXo.env.portal.portalName+"/profile"},profilelink:function(){return'<a href="'+this.profileUri+'"><strong class="text-color">'+this.profileName+"</strong></a>"},welcomeTitle:function(){return this.$t&&this.$t("UIActivity.label.Welcome_Activity_Welcome_Onboard",{"user full name":this.profilelink})},companyName:function(){return this.branding&&this.branding.companyName},thanksForJoingMeeds:function(){return this.$t&&this.$t("UIActivity.label.Thanks_for_joing_company",{"company name":this.companyName})},welcomeParagraph1:function(){return this.$t&&this.$t("UIActivity.label.empty_stream_paragraph_one",{"product name":this.productName})},welcomeParagraph2:function(){return this.$t&&this.$t("UIActivity.label.empty_stream_paragraph_two",{"product name":this.productName})},welcomeParagraph3:function(){return this.$t&&this.$t("UIActivity.label.empty_stream_paragraph_three")},welcomeParagraph4:function(){return this.$t&&this.$t("UIActivity.label.empty_stream_paragraph_four")},welcomeParagraph5:function(){return this.$t&&this.$t("UIActivity.label.empty_stream_paragraph_five")},conclusionParagraph:function(){return this.$t&&this.$t("UIActivity.label.empty_stream_lets_begin")}},created:function(){var t=this;fetch(eXo.env.portal.context+"/"+eXo.env.portal.rest+"/v1/platform/branding",{method:"GET",credentials:"include"}).then((function(t){return t&&t.ok&&t.json()})).then((function(i){return t.branding=i}))}},v=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"d-flex flex-column white border-radius"},[e("img",{staticClass:"mx-auto",style:{maxHeight:t.height},attrs:{height:t.height,src:"/social-portlet/images/emptyUserStream.png",loading:"lazy"}}),t._v(" "),e("div",{staticClass:"mx-4 mb-4"},[e("p",{directives:[{name:"sanitized-html",rawName:"v-sanitized-html",value:t.welcomeTitle,expression:"welcomeTitle"}]}),t._v(" "),e("div",{directives:[{name:"sanitized-html",rawName:"v-sanitized-html",value:t.thanksForJoingMeeds,expression:"thanksForJoingMeeds"}]}),t._v(" "),e("div",{directives:[{name:"sanitized-html",rawName:"v-sanitized-html",value:t.welcomeParagraph1,expression:"welcomeParagraph1"}]}),t._v(" "),e("div",{directives:[{name:"sanitized-html",rawName:"v-sanitized-html",value:t.welcomeParagraph2,expression:"welcomeParagraph2"}],staticClass:"mb-4"}),t._v(" "),e("div",{directives:[{name:"sanitized-html",rawName:"v-sanitized-html",value:t.welcomeParagraph3,expression:"welcomeParagraph3"}]}),t._v(" "),e("div",{directives:[{name:"sanitized-html",rawName:"v-sanitized-html",value:t.welcomeParagraph4,expression:"welcomeParagraph4"}],staticClass:"mb-4"}),t._v(" "),e("div",{directives:[{name:"sanitized-html",rawName:"v-sanitized-html",value:t.welcomeParagraph5,expression:"welcomeParagraph5"}],staticClass:"mb-4"}),t._v(" "),e("div",{directives:[{name:"sanitized-html",rawName:"v-sanitized-html",value:t.conclusionParagraph,expression:"conclusionParagraph"}]})])])};v._withStripped=!0;var p=Object(s.a)(h,v,[],!1,null,null,null);p.options.__file="src/main/webapp/vue-apps/activity-stream/components/empty-stream/ActivityStreamEmptyMessageUser.vue";var y=p.exports,f=function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"uiNotFoundActivity mx-auto mt-8"},[i("div",{staticClass:"notfoundActivity"}),this._v(" "),i("h3",{staticClass:"text-sub-title font-weight-bold mt-6"},[this._v("\n    "+this._s(this.$t("UIUserActivitiesDisplay.label.activityNotFound"))+"\n  ")])])};f._withStripped=!0;var g=Object(s.a)(null,f,[],!1,null,null,null);g.options.__file="src/main/webapp/vue-apps/activity-stream/components/empty-stream/ActivityNotFound.vue";var C=g.exports,b={created:function(){this.updateDocumentLinks()},mounted:function(){this.$root.$on("activity-created",this.updateDocumentLinks),this.$root.$on("activity-updated",this.updateDocumentLinks),this.$root.$on("activity-refresh-ui",this.updateDocumentLinks),this.$root.$on("activity-refreshed",this.updateDocumentLinks),this.$root.$on("activity-comment-created",this.updateDocumentLinks),this.$root.$on("activity-comment-updated",this.updateDocumentLinks),this.$root.$on("activity-comment-refreshed",this.updateDocumentLinks),this.updateDocumentLinks()},beforeDestroy:function(){this.$root.$off("activity-created",this.updateDocumentLinks),this.$root.$off("activity-updated",this.updateDocumentLinks),this.$root.$off("activity-refresh-ui",this.updateDocumentLinks),this.$root.$off("activity-refreshed",this.updateDocumentLinks),this.$root.$off("activity-comment-created",this.updateDocumentLinks),this.$root.$off("activity-comment-updated",this.updateDocumentLinks),this.$root.$off("activity-comment-refreshed",this.updateDocumentLinks)},methods:{updateDocumentLinks:function(){window.setTimeout((function(){window.document.querySelectorAll("a[href^=http]").forEach((function(t){t.href&&0===t.href.indexOf("http")&&!t.target&&t.hostname!==window.location.hostname&&(t.target="_blank")}))}),200)}}},x=Object(s.a)(b,void 0,void 0,!1,null,null,null);x.options.__file="src/main/webapp/vue-apps/activity-stream/components/common/ActivityAutoLink.vue";var _=x.exports,T=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("v-snackbar",{attrs:{left:!t.$vuetify.rtl,right:t.$vuetify.rtl,color:"transparent",elevation:"0",app:""},model:{value:t.snackbar,callback:function(i){t.snackbar=i},expression:"snackbar"}},[e("exo-notification-alert",{attrs:{alert:t.alert},on:{dismissed:t.clear}})],1)};T._withStripped=!0;var E=Object(s.a)({data:function(){return{snackbar:!1,alert:null}},watch:{alert:function(){this.snackbar=!!this.alert}},created:function(){var t=this;this.$root.$on("activity-notification-alert",(function(i){return t.alert=i})),this.$root.$on("activity-shared",(function(i,e){if(e&&e.length>0){var n=e.map((function(t){return t.displayName||""})),a=t.$t("UIActivity.share.message")+" "+n.join(", ");t.alert={activityId:i,message:a,type:"success"}}}))},methods:{clear:function(){this.alert=null}}},T,[],!1,null,null,null);E.options.__file="src/main/webapp/vue-apps/activity-stream/components/common/ActivityNotificationAlerts.vue";var w=E.exports,A={props:{spaceId:{type:String,default:null},activities:{type:Array,default:null}},data:function(){return{updatedActivities:new Set,newerActivitiesCount:0}},computed:{hasNewActivity:function(){return this.newerActivitiesCount>0}},created:function(){this.$activityStreamWebSocket.initCometd(this.handleActivityStreamUpdates),this.$root.$on("activity-stream-activity-createActivity",this.increaseActivitiesLimitToRetrieve)},methods:{init:function(){this.newerActivitiesCount=0,this.updatedActivities=new Set},handleActivityStreamUpdates:function(t){this.$root.$emit("activity-stream-activity-"+t.eventName,t.activityId,t.commentId,t.parentCommentId)},increaseActivitiesLimitToRetrieve:function(t){this.updatedActivities.add(t),this.newerActivitiesCount=this.updatedActivities.size},displayNewActivities:function(){this.$activityStreamWebSocket.isDisconnected()?window.location.reload():(this.$emit("loadActivities",this.updatedActivities.size),this.init())}}},k=function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"newActivitiesButtonContainer d-flex"},[i("div",{staticClass:"mx-auto"},[i("v-btn",{directives:[{name:"show",rawName:"v-show",value:this.hasNewActivity,expression:"hasNewActivity"}],staticClass:"btn primary rounded-xl newActivitiesButton",attrs:{height:"24px",small:"",primary:"",absolute:""},on:{click:this.displayNewActivities}},[i("v-icon",{staticClass:"me-1",attrs:{size:"14px"}},[this._v("fa-arrow-up")]),this._v(" "),i("span",[this._v(this._s(this.$t("activity.button.newPosts")))])],1)],1)])};k._withStripped=!0;var I=Object(s.a)(A,k,[],!1,null,null,null);I.options.__file="src/main/webapp/vue-apps/activity-stream/components/common/ActivityStreamUpdater.vue";var S=I.exports,z=function(){var t=this,i=t.$createElement;return(t._self._c||i)("exo-confirm-dialog",{ref:"confirmDialog",attrs:{message:t.$t(t.confirmMessageKey),title:t.$t(t.confirmTitleKey),"ok-label":t.$t(t.confirmOkKey),"cancel-label":t.$t(t.confirmCancelKey)},on:{ok:function(i){t.clickCallback&&t.clickCallback()},"dialog-opened":function(i){t.dialogOpened=!0},"dialog-closed":function(i){t.dialogOpened=!1}}})};z._withStripped=!0;var O=Object(s.a)({data:function(){return{confirmMessageKey:null,confirmTitleKey:null,confirmOkKey:null,confirmCancelKey:null,clickCallback:null,dialogOpened:!1}},watch:{dialogOpened:function(){this.dialogOpened?this.$root.$emit("activity-stream-confirm-opened"):this.$root.$emit("activity-stream-confirm-closed")}},created:function(){var t=this;this.$root.$on("activity-stream-display-confirm",(function(i){t.confirmTitleKey=i.title,t.confirmMessageKey=i.message,t.confirmOkKey=i.ok,t.confirmCancelKey=i.cancel,t.clickCallback=i.callback,t.$refs.confirmDialog.open()}))}},z,[],!1,null,null,null);O.options.__file="src/main/webapp/vue-apps/activity-stream/components/common/ActivityStreamConfirm.vue";var L=O.exports,P={props:{activityId:{type:String,default:null},activityTypes:{type:Object,default:null},activityActions:{type:Object,default:null},commentTypes:{type:Object,default:null},commentActions:{type:Object,default:null}},data:function(){return{activities:[],pageSize:10,limit:10,retrievedSize:0,loadedActivities:new Set,spaceId:eXo.env.portal.spaceId,userName:eXo.env.portal.userName,canPost:!1,hasMore:!1,loading:!1,error:!1}},computed:{activitiesToDisplay:function(){return this.activities&&this.activities.filter((function(t){return t&&!t.activityId}))||[]},activityStreamTypeClass:function(){return this.spaceId?"activity-stream-space":"activity-stream-user"}},watch:{loading:function(){this.loading||(window.setTimeout((function(){socialUIProfile.initUserProfilePopup("ActivityStream",{}),document.dispatchEvent(new CustomEvent("analytics-install-watchers"))}),500),(!this.activities.length||this.loadedActivities>=this.activitiesToDisplay.length)&&this.$root.$applicationLoaded())}},created:function(){var t=this;document.addEventListener("activity-deleted",(function(i){var e=i&&i.detail;if(e){var n=t.activities.findIndex((function(t){return e===t.id}));n>=0&&(t.activities.splice(n,1),t.$forceUpdate())}})),document.addEventListener("activity-updated",(function(i){var e=i&&i.detail;t.updateActivityDisplayById(e)})),this.$root.$on("activity-updated",(function(i,e){e?t.updateActivityDisplay(e):t.updateActivityDisplayById(i)})),this.limit=this.pageSize,this.retrievedSize=this.limit,this.hasMore=!1,Promise.resolve(this.init()).finally((function(){t.$refs&&t.$refs.activityUpdater&&t.$refs.activityUpdater.init(),document.dispatchEvent(new CustomEvent("hideTopBarLoading"))}))},methods:{init:function(){return this.activityId?this.loadActivity():this.loadActivityIds()},loadActivity:function(){var t=this;return this.loading=!0,this.$activityService.getActivityById(this.activityId,this.$activityConstants.FULL_ACTIVITY_EXPAND).then(this.setDisplayedActivity).catch((function(){return t.error=!0})).finally((function(){return t.loading=!1}))},loadActivityIds:function(){var t=this;return this.loading=!0,this.$activityService.getActivities(this.spaceId,2*this.limit,this.$activityConstants.FULL_ACTIVITY_IDS_EXPAND).then((function(i){t.canPost=i.canPost;var e=i&&(i.activityIds||i.activities)||[];t.retrievedSize=e.length,t.hasMore=t.retrievedSize>t.limit;var n=e.slice(0,t.limit).map((function(i,e){var n=i&&i.id,a=t.activities.find((function(t){return t.id===n}));return a?Promise.resolve(a):n?(t.$set(i,"loading",!0),e<t.activities.length?t.activities.splice(e,0,i):t.activities.push(i),t.$activityService.getActivityById(n,t.$activityConstants.FULL_ACTIVITY_EXPAND).then((function(t){return Object.assign(i,t)})).finally((function(){return t.$set(i,"loading",!1)}))):void 0}));return Promise.all(n)})).finally((function(){return t.loading=!1}))},activityLoaded:function(t){this.loadedActivities.add(t),this.loadedActivities.size&&this.loadedActivities.size>=this.activitiesToDisplay.length&&this.$root.$applicationLoaded()},setDisplayedActivity:function(t){t.activityId?this.$emit("activity-select",t.activityId,t.id):this.activities=t&&[t]||[]},updateActivityDisplayById:function(t){var i=this;return this.loading=!0,this.$activityService.getActivityById(t,this.$activityConstants.ACTIVITY_EXPAND).then((function(t){return i.updateActivityDisplay(t)})).finally((function(){return i.loading=!1}))},updateActivityDisplay:function(t){var i=this.activities.findIndex((function(i){return t.id===i.id}));if(i>=0){var e=Object.assign({},this.activities[i],t);this.activities.splice(i,1,e),this.$root.$emit("activity-refresh-ui",t.id)}},loadMore:function(){this.limit+=this.pageSize,this.loadActivityIds()},loadActivities:function(t){this.limit+=t,this.loadActivityIds().catch((function(){return window.location.reload()}))}}},D=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"activityStream pa-0",class:t.activityStreamTypeClass},[e("exo-activity-composer",{attrs:{standalone:!t.canPost,id:"activityComposer"}}),t._v(" "),e("activity-stream-confirm-dialog"),t._v(" "),t.activityId?t._e():e("activity-stream-updater",{ref:"activityUpdater",attrs:{"space-id":t.spaceId,activities:t.activities},on:{loadActivities:t.loadActivities}}),t._v(" "),t.activitiesToDisplay.length?t._l(t.activitiesToDisplay,(function(i){return e("activity-stream-loader",{key:i.id,staticClass:"mb-6 contentBox",attrs:{activity:i,"activity-types":t.activityTypes,"activity-actions":t.activityActions,"comment-types":t.commentTypes,"comment-actions":t.commentActions,"is-activity-detail":t.activityId},on:{loaded:function(e){return t.activityLoaded(i.id)}}})})):t.loading?e("div",{staticClass:"white border-radius activity-detail flex d-flex flex-column mb-6 contentBox"},[e("v-progress-circular",{staticClass:"mx-auto my-10",attrs:{color:"primary",size:"32",indeterminate:""}})],1):[t.activityId?e("activity-not-found"):t.error?t._e():[t.spaceId?e("activity-stream-empty-message-space"):e("activity-stream-empty-message-user")]],t._v(" "),t.hasMore?e("v-btn",{staticClass:"btn pa-0",attrs:{loading:t.loading,disabled:t.loading,block:""},on:{click:t.loadMore}},[t._v("\n    "+t._s(t.$t("Search.button.loadMore"))+"\n  ")]):t._e(),t._v(" "),e("activity-auto-link")],2)};D._withStripped=!0;var j=Object(s.a)(P,D,[],!1,null,null,null);j.options.__file="src/main/webapp/vue-apps/activity-stream/components/activity/list/ActivityStreamList.vue";var U=j.exports,N={props:{activity:{type:Object,default:null},activityTypes:{type:Object,default:null},activityActions:{type:Object,default:null},commentTypes:{type:Object,default:null},commentActions:{type:Object,default:null},isActivityDetail:{type:Boolean,default:!1},isActivityShared:{type:Boolean,default:!1},hideFooter:{type:Boolean,default:!1},hideMenu:{type:Boolean,default:!1}},data:function(){return{loading:!1,initialized:!1,noExtension:!1}},computed:{id:function(){return"activity-detail-"+this.activityId},activityId:function(){return this.activity&&this.activity.id},activityTypeExtension:function(){return this.sharedActivityTypeExtension&&this.sharedActivityTypeExtension.extendSharedActivity&&this.sharedActivityTypeExtension.extendSharedActivity(this.activity,this.isActivityDetail)?this.sharedActivityTypeExtension:this.activity&&this.activityTypes&&(this.activityTypes[this.activityType]||this.activityTypes.default)||{}},sharedActivity:function(){return this.activity&&this.activity.originalActivity},sharedActivityType:function(){return this.sharedActivity&&this.sharedActivity.type},sharedActivityTypeExtension:function(){return!this.noExtension&&this.sharedActivity&&this.activityTypes&&(this.activityTypes[this.sharedActivityType]||this.activityTypes.default)||null},extendedComponent:function(){if(this.noExtension)return null;var t=this.activityTypeExtension&&this.activityTypeExtension.getExtendedComponent&&this.activityTypeExtension.getExtendedComponent(this.activity,this.isActivityDetail);return t||this.sharedActivityTypeExtension&&this.sharedActivityTypeExtension.getExtendedComponent&&this.sharedActivityTypeExtension.getExtendedComponent(this.activity,this.isActivityDetail)},extendedComponentOptions:function(){return this.extendedComponent&&{componentName:"Activity-"+this.activityTypeExtension.id,componentOptions:{vueComponent:this.extendedComponent.component}}},extendedComponentParams:function(){return{activity:this.activity,isActivityDetail:this.isActivityDetail,activityTypeExtension:this.activityTypeExtension,activityTypes:this.activityTypes,loading:this.loading}},init:function(){return this.activityTypeExtension&&this.activityTypeExtension.init},displayLoading:function(){return this.activityLoading||!this.initialized},activityType:function(){return this.activity&&this.activity.type},activityLoading:function(){return this.activity&&this.activity.loading}},watch:{activityLoading:function(){this.activityLoading||this.retrieveActivityProperties()},loading:function(){this.loading||(this.refreshTipTip(),this.setWindowTitle())},displayLoading:function(){this.displayLoading||this.$emit("loaded")},activityTypeExtension:function(){this.activityTypeExtension&&this.retrieveActivityProperties()}},created:function(){this.$root.$on("activity-extension-abort",this.abortSpecificExtension),this.$root.$on("activity-refresh-ui",this.retrieveActivityProperties),this.retrieveActivityProperties()},mounted:function(){var t=this;this.$root.selectedCommentId&&this.activity&&this.activity.id===this.$root.selectedActivityId&&window.setTimeout((function(){document.dispatchEvent(new CustomEvent("activity-comments-display",{detail:{activity:t.activity,offset:0,limit:200,noAuitomaticScroll:!0}}))}),50),this.activity.highlight&&this.scrollTo(this.$el),this.$root.$emit("activity-refreshed")},beforeDestroy:function(){this.$root.$off("activity-refresh-ui",this.retrieveActivityProperties),this.$root.$off("activity-extension-abort",this.abortSpecificExtension)},methods:{retrieveActivityProperties:function(t){var i=this;this.activityLoading||t&&t!==this.activityId||(this.loading=!0,this.$nextTick((function(){if(i.init){var t=i.init(i.activity,i.isActivityDetail);if(t&&t.then)return t.then((function(){return i.$nextTick()})).finally((function(){i.loading=!1,i.initialized=!0}))}i.loading=!1,i.initialized=!0})))},setWindowTitle:function(){if(this.isActivityDetail&&this.activityTypeExtension){var t=document.title||"",i=this.activityTypeExtension.windowTitlePrefixKey||"activity.window.title";this.activityTypeExtension.getWindowTitle?(t=this.activityTypeExtension.getWindowTitle(this.activity)||"",t=this.$t(i,{0:this.$utils.htmlToText(t)})):this.activityTypeExtension.getTitle?((t=this.activityTypeExtension.getTitle(this.activity)||"")&&t.key&&(t=this.$t(t.key,t.params||{})),t=this.$t(i,{0:this.$utils.htmlToText(t)})):(t=this.activity.title||"",t=this.$t(i,{0:this.$utils.htmlToText(t)})),t&&(t.length>100?document.title=t.substring(0,100)+"...":document.title=t)}},abortSpecificExtension:function(t){t===this.activityId&&(this.noExtension=!0)},refreshTipTip:function(){var t=this;window.setTimeout((function(){t.$utils.initTipTip(t.$el,{})}),200)},scrollTo:function(t){window.setTimeout((function(){t&&t.scrollIntoView&&t.scrollIntoView({behavior:"smooth",block:"start"})}),10)}}},R=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"white border-radius activity-detail flex d-flex flex-column",attrs:{id:t.id}},[t.displayLoading?e("v-progress-circular",{staticClass:"mx-auto my-10",attrs:{color:"primary",size:"32",indeterminate:""}}):t._e(),t._v(" "),!t.noExtension&&t.extendedComponent?[t.extendedComponent.overrideHeader?t._e():e("activity-head",{class:t.isActivityShared?"py-4 px-0":"py-4 ps-4 pe-1",attrs:{activity:t.activity,"activity-actions":t.activityActions,"activity-type-extension":t.activityTypeExtension,"hide-menu":t.hideMenu}}),t._v(" "),t.loading?t._e():[e("extension-registry-component",{staticClass:"d-flex flex-column",attrs:{component:t.extendedComponentOptions,element:t.extendedComponent.element,"element-class":t.extendedComponent.class,params:t.extendedComponentParams}})],t._v(" "),t.hideFooter?t._e():[t.extendedComponent.overrideFooter?t._e():e("activity-footer",{attrs:{activity:t.activity,"is-activity-detail":t.isActivityDetail,"activity-types":t.activityTypes,"activity-type-extension":t.activityTypeExtension}}),t._v(" "),t.extendedComponent.overrideComments?t._e():e("activity-comments-preview",{staticClass:"px-4",attrs:{activity:t.activity,"comment-types":t.commentTypes,"comment-actions":t.commentActions}})]]:[e("activity-head",{class:t.isActivityShared?"py-4 px-0":"py-4 ps-4 pe-1",attrs:{activity:t.activity,"activity-actions":t.activityActions,"activity-type-extension":t.activityTypeExtension,"hide-menu":t.hideMenu}}),t._v(" "),t.loading?t._e():e("v-card",{attrs:{flat:""}},[t.initialized?e("extension-registry-components",{staticClass:"d-flex flex-column",class:!t.isActivityShared&&"px-4",attrs:{params:t.extendedComponentParams,name:"ActivityContent",type:"activity-content-extensions","parent-element":"div",element:"div"}}):t._e()],1),t._v(" "),t.hideFooter?t._e():[e("activity-footer",{attrs:{activity:t.activity,"is-activity-detail":t.isActivityDetail,"activity-types":t.activityTypes,"activity-type-extension":t.activityTypeExtension}}),t._v(" "),e("activity-comments-preview",{staticClass:"px-4",attrs:{activity:t.activity,"comment-types":t.commentTypes,"comment-actions":t.commentActions}})]]],2)};R._withStripped=!0;var B=Object(s.a)(N,R,[],!1,null,null,null);B.options.__file="src/main/webapp/vue-apps/activity-stream/components/activity/ActivityStreamActivity.vue";var M=B.exports,X={props:{activity:{type:Object,default:null},activityTypes:{type:Object,default:null},activityActions:{type:Object,default:null},commentTypes:{type:Object,default:null},commentActions:{type:Object,default:null},isActivityDetail:{type:Boolean,default:!1},isActivityShared:{type:Boolean,default:!1},hideFooter:{type:Boolean,default:!1},hideMenu:{type:Boolean,default:!1}},computed:{activityLoading:function(){return this.activity&&this.activity.loading}}},W=function(){var t=this,i=t.$createElement,e=t._self._c||i;return t.activityLoading?e("div",{key:t.activity.id,staticClass:"white border-radius activity-detail flex d-flex flex-column mb-6 contentBox"},[e("v-progress-circular",{staticClass:"mx-auto my-10",attrs:{color:"primary",size:"32",indeterminate:""}})],1):e("activity-stream-activity",{key:t.activity.id,staticClass:"mb-6 contentBox",attrs:{activity:t.activity,"activity-types":t.activityTypes,"activity-actions":t.activityActions,"comment-types":t.commentTypes,"comment-actions":t.commentActions,"is-activity-detail":t.isActivityDetail},on:{loaded:function(i){return t.$emit("loaded")}}})};W._withStripped=!0;var F=Object(s.a)(X,W,[],!1,null,null,null);F.options.__file="src/main/webapp/vue-apps/activity-stream/components/activity/ActivityStreamLoader.vue";var V=F.exports,K={props:{activity:{type:Object,default:null},activityTypeExtension:{type:Object,default:null},activityActions:{type:Object,default:null},spaceStream:{type:Object,default:null}},computed:{space:function(){return this.activity&&this.activity.activityStream&&this.activity.activityStream.space},posterIdentity:function(){return this.activity&&this.activity.identity}}},H=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("v-list-item",{staticClass:"activity-head",attrs:{dense:""}},[e("activity-head-user",{staticClass:"me-3",attrs:{identity:t.posterIdentity,avatar:""}}),t._v(" "),e("v-list-item-content",{staticClass:"py-0 accountTitleLabel"},[e("v-list-item-title",{staticClass:"font-weight-bold body-2 mb-0"},[e("activity-head-user",{attrs:{identity:t.posterIdentity}}),t._v(" "),t.space?[t.$vuetify.rtl?e("v-icon",{staticClass:"mx-1",attrs:{size:"8"}},[t._v("\n          fa-chevron-left\n        ")]):e("v-icon",{staticClass:"mx-1",attrs:{size:"8"}},[t._v("\n          fa-chevron-right\n        ")]),t._v(" "),e("activity-head-space",{attrs:{space:t.space}})]:t._e()],2),t._v(" "),e("activity-head-time",{staticClass:"d-flex activity-head-time",attrs:{activity:t.activity}})],1),t._v(" "),e("activity-head-menu",{attrs:{activity:t.activity,"activity-actions":t.activityActions,"activity-type-extension":t.activityTypeExtension}})],1)};H._withStripped=!0;var Y=Object(s.a)(K,H,[],!1,null,null,null);Y.options.__file="src/main/webapp/vue-apps/activity-stream/components/activity/header/ActivityHead.vue";var G=Y.exports,q={props:{space:{type:Object,default:null},size:{type:Number,default:function(){return 20}}},data:function(){return{id:"spaceAvatar"+parseInt(1e4*Math.random()),tiptipInitialized:!1}},computed:{spaceId:function(){return this.space&&this.space.id},displayName:function(){return this.space&&this.space.displayName},groupId:function(){return this.space&&this.space.groupId},avatarUrl:function(){return this.space&&this.space.avatarUrl||eXo.env.portal.context+"/"+eXo.env.portal.rest+"/v1/social/spaces/"+this.prettyName+"/avatar"},url:function(){if(!this.groupId)return"#";var t=this.groupId.replace(/\//g,":");return eXo.env.portal.context+"/g/"+t+"/"}},mounted:function(){var t=this;this.spaceId&&this.groupId&&window.setTimeout((function(){t.initTiptip()}),500)},methods:{initTiptip:function(){var t=this;this.tiptipInitialized||this.$nextTick((function(){var i=$("#"+t.id);i.length?(t.tiptipInitialized=!0,i.spacePopup({userName:eXo.env.portal.userName,spaceID:t.spaceId,restURL:"/portal/rest/v1/social/spaces/{0}",membersRestURL:"/portal/rest/v1/social/spaces/{0}/users?returnSize=true",managerRestUrl:"/portal/rest/v1/social/spaces/{0}/users?role=manager&returnSize=true",membershipRestUrl:"/portal/rest/v1/social/spacesMemberships?space={0}&returnSize=true",defaultAvatarUrl:t.avatarUrl,deleteMembershipRestUrl:"/portal/rest/v1/social/spacesMemberships/{0}:{1}:{2}",content:!1,keepAlive:!0,defaultPosition:t.$vuetify.rtl?"right_bottom":"left_bottom",maxWidth:"320px"})):window.setTimeout((function(){t.initTiptip()}),1e3)}))}}},J=function(){var t=this.$createElement,i=this._self._c||t;return i("a",{staticClass:"text-none primary--text space-avatar activity-head-space-link",attrs:{id:this.id,href:this.url}},[i("v-avatar",{staticClass:"ma-0",attrs:{size:"20",rounded:""}},[i("img",{staticClass:"object-fit-cover my-auto",attrs:{src:this.avatarUrl,loading:"lazy"}})]),this._v("\n  "+this._s(this.displayName)+"\n")],1)};J._withStripped=!0;var Q=Object(s.a)(q,J,[],!1,null,null,null);Q.options.__file="src/main/webapp/vue-apps/activity-stream/components/activity/header/ActivityHeadSpace.vue";var Z=Q.exports,tt={props:{identity:{type:Object,default:function(){return null}},avatar:{type:Boolean,default:!1},size:{type:Number,default:function(){return 45}}},data:function(){return{id:"userAvatar"+parseInt(1e4*Math.random())}},computed:{username:function(){return this.identity&&this.identity.remoteId},url:function(){return eXo.env.portal.context+"/"+eXo.env.portal.portalName+"/profile/"+this.username},avatarUrl:function(){return this.identity&&this.identity.profile&&this.identity.profile.avatar},fullName:function(){return this.identity&&this.identity.profile&&this.identity.profile.fullname},isExternal:function(){return this.identity&&this.identity.profile&&this.identity.profile.dataEntity&&"true"===this.identity.profile.dataEntity.external}},mounted:function(){this.initTiptip()},methods:{initTiptip:function(){var t=this;this.$nextTick((function(){$("#"+t.id).userPopup({restURL:"/portal/rest/social/people/getPeopleInfo/{0}.json",userId:t.username,keepAlive:!0})}))}}},it=function(){var t=this,i=t.$createElement,e=t._self._c||i;return t.avatar?e("a",{staticClass:"activity-head-user-link",attrs:{id:t.id,href:t.url}},[e("v-list-item-avatar",{staticClass:"ma-0",attrs:{size:t.size}},[e("img",{staticClass:"object-fit-cover my-auto",attrs:{src:t.avatarUrl,loading:"lazy"}})])],1):e("a",{staticClass:"text-none primary--text activity-head-user-link",attrs:{id:t.id,href:t.url}},[t._v("\n  "+t._s(t.fullName)+"\n  "),t.isExternal?e("span",{staticClass:"externalFlagClass"},[t._v("\n    ("+t._s(t.$t("userAvatar.external.label"))+")\n  ")]):t._e()])};it._withStripped=!0;var et=Object(s.a)(tt,it,[],!1,null,null,null);et.options.__file="src/main/webapp/vue-apps/activity-stream/components/activity/header/ActivityHeadUser.vue";var nt=et.exports,at={props:{activity:{type:Object,default:null},noIcon:{type:Boolean,default:!1}},data:function(){return{dateFormat:{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"}}},computed:{isActivityEdited:function(){return this.activity&&this.activity.updateDate!==this.activity.createDate},activityId:function(){return this.activity&&this.activity.id},activityLink:function(){return this.$root.activityBaseLink+"?id="+this.activityId},activityPostedTime:function(){return this.activity&&(this.activity.updateDate||this.activity.createDate)}}},ot=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"caption text-light-color text-truncate"},[t.noIcon?t._e():e("v-icon",{staticClass:"text-light-color",attrs:{"x-small":""}},[t._v("\n    far fa-clock\n  ")]),t._v(" "),e("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(i){var n=i.on,a=i.attrs;return[e("v-btn",t._g(t._b({staticClass:"hover-underline width-auto text-capitalize-first-letter d-inline px-0",attrs:{href:t.activityLink,height:20,"x-small":"",link:"",text:"",plain:""}},"v-btn",a,!1),n),[t.isActivityEdited?e("relative-date-format",{staticClass:"text-capitalize-first-letter text-light-color text-truncate pt-1 ps-1",attrs:{label:"UIActivity.label.EditedFrom",value:t.activity.updateDate}}):e("relative-date-format",{staticClass:"text-capitalize-first-letter text-light-color text-truncate pt-1 ps-1",attrs:{value:t.activity.createDate}})],1)]}}])},[t._v(" "),e("date-format",{attrs:{value:t.activityPostedTime,format:t.dateFormat}})],1)],1)};ot._withStripped=!0;var st=Object(s.a)(at,ot,[],!1,null,null,null);st.options.__file="src/main/webapp/vue-apps/activity-stream/components/activity/header/ActivityHeadTime.vue";var ct=st.exports,rt={props:{activity:{type:Object,default:null},activityTypeExtension:{type:Object,default:null},activityActions:{type:Object,default:null}},data:function(){return{menu:!1,loading:!1}},computed:{menuButtonStyle:function(){return this.$vuetify&&this.$vuetify.rtl?"top:8px;left:4px;":"top:8px;right:4px;"},enabledActions:function(){var t=this;return this.activityActions&&Object.values(this.activityActions).filter((function(i){return i.isEnabled&&i.id&&i.click&&i.isEnabled(t.activity,t.activityTypeExtension)}))}},created:function(){var t=this;$(document).mousedown((function(){t.menu&&window.setTimeout((function(){t.menu=!1}),200)}))},methods:{clickOnAction:function(t){var i=this;t.confirmDialog?this.$root.$emit("activity-stream-display-confirm",{title:t.confirmTitleKey,message:t.confirmMessageKey,ok:t.confirmOkKey,cancel:t.confirmCancelKey,callback:function(){return i.confirmAction(t)}}):this.confirmAction(t)},confirmAction:function(t){var i=this,e=t.click(this.activity,this.activityTypeExtension);e&&e.finally&&e.then&&(this.loading=!0,e.finally((function(){window.setTimeout((function(){i.loading=!1}),500)})))}}},mt=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("v-list-item-icon",{directives:[{name:"show",rawName:"v-show",value:t.enabledActions&&t.enabledActions.length,expression:"enabledActions && enabledActions.length"}],staticClass:"ma-0"},[e("v-menu",{attrs:{left:!t.$vuetify.rtl,right:t.$vuetify.rtl,bottom:"","offset-y":"",attach:""},scopedSlots:t._u([{key:"activator",fn:function(i){var n=i.on,a=i.attrs;return[e("v-btn",t._g(t._b({style:t.menuButtonStyle,attrs:{disabled:t.loading,loading:t.loading,absolute:"",icon:"",small:""}},"v-btn",a,!1),n),[e("v-icon",{staticClass:"primary--text",attrs:{size:"18"}},[t._v("mdi-dots-vertical")])],1)]}}]),model:{value:t.menu,callback:function(i){t.menu=i},expression:"menu"}},[t._v(" "),e("v-list",{staticClass:"pa-0",attrs:{dense:""}},t._l(t.enabledActions,(function(i){return e("v-list-item",{key:i.id,attrs:{dense:""},on:{click:function(e){return t.clickOnAction(i)}}},[e("v-list-item-title",[t._v(t._s(t.$t(i.labelKey)))])],1)})),1)],1)],1)};mt._withStripped=!0;var lt=Object(s.a)(rt,mt,[],!1,null,null,null);lt.options.__file="src/main/webapp/vue-apps/activity-stream/components/activity/header/ActivityHeadMenu.vue";var dt=lt.exports,ut={props:{activity:{type:Object,default:null},activityTypeExtension:{type:Object,default:null},isActivityDetail:{type:Boolean,default:!1},loading:{type:Boolean,default:!1}},data:function(){return{body:null}},computed:{getBody:function(){return this.activityTypeExtension&&this.activityTypeExtension.getBody},activityId:function(){return this.activity&&this.activity.id},isBodyNotEmpty:function(){return this.body&&this.$utils.trim(this.body).length},useParagraph:function(){return!this.body.includes("</p>")},element:function(){return this.useParagraph?"p":"div"},isComment:function(){return this.activity&&this.activity.activityId},bodyClass:function(){return this.isComment?"rich-editor-content":"postContent text-color py-0"}},watch:{loading:function(){var t=this;this.loading&&this.$nextTick().then((function(){return t.retrieveActivityProperties()}))}},created:function(){this.retrieveActivityProperties()},methods:{retrieveActivityProperties:function(){this.body=this.getBody&&this.getBody(this.activity,this.isActivityDetail)}}},ht=function(){var t=this.$createElement,i=this._self._c||t;return this.isBodyNotEmpty?i("dynamic-html-element",{directives:[{name:"sanitized-html",rawName:"v-sanitized-html",value:this.body,expression:"body"}],staticClass:"reset-style-box text-break overflow-hidden",class:this.bodyClass,attrs:{element:this.element,dir:"auto"}}):this._e()};ht._withStripped=!0;var vt=Object(s.a)(ut,ht,[],!1,null,null,null);vt.options.__file="src/main/webapp/vue-apps/activity-stream/components/activity/content/ActivityBody.vue";var pt=vt.exports,yt={props:{activity:{type:Object,default:null},activityTypeExtension:{type:String,default:null},isActivityDetail:{type:Boolean,default:!1}},data:function(){return{title:null,titleTooltip:null,summary:null,summaryTooltip:null,thumbnail:null,sourceLink:null,tooltip:null,useEllipsisOnSummary:!0,useEllipsisOnTitle:!0}},computed:{getTitle:function(){return this.activityTypeExtension&&this.activityTypeExtension.getTitle},getSummary:function(){return this.activityTypeExtension&&this.activityTypeExtension.getSummary},getThumbnail:function(){return this.activityTypeExtension&&this.activityTypeExtension.getThumbnail},getSourceLink:function(){return this.activityTypeExtension&&this.activityTypeExtension.getSourceLink},supportsThumbnail:function(){return this.activityTypeExtension&&this.activityTypeExtension.supportsThumbnail},thumbnailProperties:function(){return this.activityTypeExtension&&this.activityTypeExtension.getThumbnailProperties?this.activityTypeExtension.getThumbnailProperties(this.activity,this.isActivityDetail):this.activityTypeExtension&&this.activityTypeExtension.thumbnailProperties},useSameViewForMobile:function(){return this.activityTypeExtension&&this.activityTypeExtension.isUseSameViewForMobile?this.activityTypeExtension.isUseSameViewForMobile(this.activity,this.isActivityDetail):this.activityTypeExtension&&this.activityTypeExtension.useSameViewForMobile},supportsIcon:function(){return this.supportsThumbnail||this.activityTypeExtension&&this.activityTypeExtension.supportsIcon},getTooltip:function(){return this.activityTypeExtension&&this.activityTypeExtension.getTooltip},defaultIcon:function(){return this.activityTypeExtension&&(this.activityTypeExtension.defaultIcon||this.activityTypeExtension.getDefaultIcon&&this.activityTypeExtension.getDefaultIcon(this.comment||this.activity))},defaultIconClass:function(){return this.defaultIcon&&this.defaultIcon.icon||"far fa-image"},defaultIconSize:function(){return this.defaultIcon&&this.defaultIcon.size||58},useMobileView:function(){return"xs"===this.$vuetify.breakpoint.name&&!this.useSameViewForMobile},htmlElement:function(){return this.sourceLink&&"#"!==this.sourceLink?"a":"div"},link:function(){return"#"!==this.sourceLink&&this.sourceLink||"javascript:void(0)"},linkTarget:function(){return(!this.sourceLink||0!==this.sourceLink.indexOf("/")&&0!==this.sourceLink.indexOf("#")?this.sourceLink&&"_blank":"_self")||""},thumbnailHeight:function(){return this.thumbnailProperties&&this.thumbnailProperties.height||"150px"},thumbnailWidth:function(){return this.thumbnailProperties&&this.thumbnailProperties.width||"252px"},thumbnailNoBorder:function(){return this.thumbnailProperties&&this.thumbnailProperties.noBorder},iconHeight:function(){return this.defaultIcon&&this.defaultIcon.height||"150px"},iconWidth:function(){return this.defaultIcon&&this.defaultIcon.width||"90px"},iconNoBorder:function(){return this.defaultIcon&&this.defaultIcon.noBorder},thumbnailMobileHeight:function(){return this.thumbnailProperties&&this.thumbnailProperties.mobile&&this.thumbnailProperties.mobile.height||"75vw"},thumbnailMobileWidth:function(){return this.thumbnailProperties&&this.thumbnailProperties.mobile&&this.thumbnailProperties.mobile.width||"100%"},thumbnailMobileNoBorder:function(){return this.thumbnailProperties&&this.thumbnailProperties.mobile&&(!1===this.thumbnailProperties.mobile.noBorder||!0===this.thumbnailProperties.mobile.noBorder)?this.thumbnailProperties.mobile.noBorder:(!1===this.thumbnailNoBorder||!0===this.thumbnailNoBorder)&&this.thumbnailNoBorder},tooltipText:function(){return this.tooltip&&this.$t(this.tooltip)||""},titleText:function(){return this.title&&this.$utils.htmlToText(this.title)||""},summaryText:function(){return this.summary&&this.$utils.htmlToText(this.summary)||""}},watch:{activityTypeExtension:function(t,i){i&&t===i||this.retrieveActivityProperties()}},created:function(){this.retrieveActivityProperties()},methods:{retrieveActivityProperties:function(){this.useEllipsisOnTitle=this.activityTypeExtension&&!this.activityTypeExtension.noTitleEllipsis,this.useEllipsisOnSummary=this.activityTypeExtension&&!this.activityTypeExtension.noSummaryEllipsis,this.title=this.getTitle&&this.getTitle(this.activity,this.isActivityDetail),this.title&&this.title.key?this.title=this.$t(this.title.key,this.title.params||{}):this.title=this.$utils.trim(this.title),this.titleTooltip=this.$utils.htmlToText(this.title),this.summary=this.getSummary&&this.$utils.trim(this.getSummary(this.activity,this.isActivityDetail)),this.summaryTooltip=this.$utils.htmlToText(this.summary),this.sourceLink=this.getSourceLink&&this.getSourceLink(this.activity,this.isActivityDetail),this.tooltip=this.getTooltip&&this.getTooltip(this.activity,this.isActivityDetail),this.supportsThumbnail&&(this.thumbnail=this.getThumbnail&&this.getThumbnail(this.activity,this.isActivityDetail))}}},ft=function(){var t=this,i=t.$createElement,e=t._self._c||i;return t.sourceLink?e("dynamic-html-element",{staticClass:"d-flex flex-no-wrap activity-thumbnail-box",attrs:{element:t.htmlElement,href:t.link,target:t.linkTarget,title:t.tooltipText}},[t.useMobileView?[e("div",{staticClass:"border-box-sizing flex"},[t.supportsThumbnail?e("v-avatar",{class:t.thumbnailMobileNoBorder||"border-color",attrs:{"min-height":t.thumbnailMobileHeight,height:t.thumbnailMobileHeight,"min-width":t.thumbnailMobileWidth,width:t.thumbnailMobileWidth,rounded:"",eager:"",tile:""}},[t.thumbnail?e("img",{staticClass:"object-fit-cover my-auto",attrs:{src:t.thumbnail,alt:t.title,loading:"lazy"}}):e("v-icon",{staticClass:"grey-text",attrs:{size:t.defaultIconSize,contain:""}},[t._v("\n          "+t._s(t.defaultIconClass)+"\n        ")])],1):t._e(),t._v(" "),t.title?e("div",{staticClass:"pa-4",class:t.thumbnailMobileNoBorder||"border-color no-border-top"},[t.title?e("div",{staticClass:"font-weight-bold text-color ma-0 text-wrap text-break text-truncate-2",attrs:{title:t.titleTooltip},domProps:{textContent:t._s(t.titleText)}}):t._e()]):t._e()],1)]:[t.supportsThumbnail?e("v-avatar",{staticClass:"border-box-sizing align-start my-4 me-4",class:t.thumbnailNoBorder||"border-color",attrs:{"min-height":t.thumbnailHeight,height:t.thumbnailHeight,"min-width":t.thumbnailWidth,width:t.thumbnailWidth,rounded:"",eager:"",tile:""}},[t.thumbnail?e("img",{staticClass:"object-fit-cover my-auto",attrs:{src:t.thumbnail,alt:t.title,loading:"lazy"}}):e("v-icon",{staticClass:"grey-text",attrs:{size:t.defaultIconSize,contain:""}},[t._v("\n        "+t._s(t.defaultIconClass)+"\n      ")])],1):t.supportsIcon?e("v-avatar",{staticClass:"border-box-sizing align-start my-4 me-4",class:t.iconNoBorder||"border-color",attrs:{"min-height":t.iconHeight,height:t.iconHeight,"min-width":t.iconWidth,width:t.iconWidth,rounded:"",eager:"",tile:""}},[e("v-icon",{staticClass:"grey-text",attrs:{size:t.defaultIconSize,contain:""}},[t._v("\n        "+t._s(t.defaultIconClass)+"\n      ")])],1):t._e(),t._v(" "),e("div",{staticClass:"my-4"},[t.title?e("div",{directives:[{name:"sanitized-html",rawName:"v-sanitized-html",value:t.title,expression:"title"}],staticClass:"font-weight-bold text-color mx-0 mt-0 mb-2 text-wrap text-break",class:t.useEllipsisOnTitle?"text-truncate-2":"",attrs:{title:t.titleTooltip}}):t._e(),t._v(" "),t.summary?e("div",{directives:[{name:"sanitized-html",rawName:"v-sanitized-html",value:t.summary,expression:"summary"}],staticClass:"caption text-wrap text-break rich-editor-content reset-style-box",class:t.useEllipsisOnSummary?"text-light-color text-truncate-3":"text-color",attrs:{title:t.summaryTooltip}}):t._e()])]],2):t._e()};ft._withStripped=!0;var gt=Object(s.a)(yt,ft,[],!1,null,null,null);gt.options.__file="src/main/webapp/vue-apps/activity-stream/components/activity/content/ActivityLink.vue";var Ct=gt.exports,bt={props:{activity:{type:Object,default:null},isActivityDetail:{type:Boolean,default:!1},activityTypes:{type:Object,default:null}},computed:{originalActivity:function(){return this.activity&&this.activity.originalActivity&&Object.assign({parentActivity:this.activity},this.activity.originalActivity)}},data:function(){return{activityTypes:null}}},xt=function(){var t=this.$createElement,i=this._self._c||t;return this.originalActivity&&this.activityTypes?i("div",{staticClass:"border-color border-radius my-3"},[i("activity-stream-activity",{staticClass:"px-4",attrs:{activity:this.originalActivity,"activity-types":this.activityTypes,"is-activity-detail":this.isActivityDetail,"is-activity-shared":"","hide-footer":"","hide-menu":""}})],1):this._e()};xt._withStripped=!0;var _t=Object(s.a)(bt,xt,[],!1,null,null,null);_t.options.__file="src/main/webapp/vue-apps/activity-stream/components/activity/content/ActivityShare.vue";var Tt=_t.exports,$t={props:{activity:{type:Object,default:null},activityTypeExtension:{type:String,default:null},isActivityDetail:{type:Boolean,default:!1}},data:function(){return{maxWidth:320,elementReady:!1}},computed:{embeddedHTML:function(){return this.activity&&this.activity.templateParams&&this.activity.templateParams.html},sourceLink:function(){return this.activity&&this.activity.templateParams&&this.activity.templateParams.link||""},link:function(){return this.sourceLink||"javascript:void(0)"},linkClass:function(){return"#"===this.sourceLink?"not-clickable":""},linkTarget:function(){return(!this.sourceLink||0!==this.sourceLink.indexOf("/")&&0!==this.sourceLink.indexOf("#")?this.sourceLink&&"_blank":"_self")||""},title:function(){return this.activity&&this.activity.templateParams&&this.activity.templateParams.title},titleText:function(){return this.title&&this.$utils.htmlToText(this.title)||""},previewWidth:function(){return Number(this.activity.templateParams&&this.activity.templateParams.previewWidth||this.maxWidth)},parentStyle:function(){return{width:(this.previewWidth>this.maxWidth&&this.maxWidth||this.previewWidth)+"px"}},embeddedHTMLStyle:function(){return{width:(this.previewWidth>this.maxWidth&&this.maxWidth||this.previewWidth)+"px",maxWidth:this.maxWidth+"px",maxHeight:this.maxWidth+"px"}}},mounted:function(){this.maxWidth=this.$el&&this.$el.parentElement.offsetWidth<this.maxWidth&&String(this.$el.parentElement.offsetWidth-2)||""+this.maxWidth,this.elementReady=!0}},Et=function(){var t=this,i=t.$createElement,e=t._self._c||i;return t.embeddedHTML?e("div",{staticClass:"d-flex flex-column flex activity-embedded-box mx-auto",style:t.parentStyle},[t.elementReady?e("div",{staticClass:"border-radius",style:t.embeddedHTMLStyle,domProps:{innerHTML:t._s(t.embeddedHTML)}}):t._e(),t._v(" "),t.titleText?e("a",{staticClass:"py-4 text-color",attrs:{href:t.link,target:t.linkTarget,title:t.titleText}},[e("div",{staticClass:"font-weight-bold text-color ma-0 text-wrap text-break text-truncate-2",domProps:{textContent:t._s(t.titleText)}})]):t._e()]):t._e()};Et._withStripped=!0;var wt=Object(s.a)($t,Et,[],!1,null,null,null);wt.options.__file="src/main/webapp/vue-apps/activity-stream/components/activity/content/ActivityEmbeddedHTML.vue";var At=wt.exports,kt={props:{activity:{type:Object,default:null},isActivityDetail:{type:Boolean,default:!1},activityTypes:{type:Object,default:null},activityTypeExtension:{type:Object,default:null}},data:function(){return{likersCount:0,commentsCount:0,kudosCount:0,likers:[]}},computed:{displayShareInformation:function(){return this.activity&&this.activity.originalActivity&&this.activityTypeExtension&&this.activityTypeExtension.showSharedInformationFooter&&this.activityTypeExtension.showSharedInformationFooter(this.activity,this.isActivityDetail)},activityId:function(){return this.activity&&this.activity.id},actionBarBorderClass:function(){return this.isDesktop?"border-top-color border-light-color":""},isDesktop:function(){return this.$vuetify&&this.$vuetify.breakpoint&&"xs"!==this.$vuetify.breakpoint.name&&"sm"!==this.$vuetify.breakpoint.name&&"md"!==this.$vuetify.breakpoint.name}},created:function(){this.$root.$on("activity-comment-created",this.checkCommentsSize),this.$root.$on("activity-comment-updated",this.checkCommentsSize),this.$root.$on("activity-comment-deleted",this.checkCommentsSize),this.$root.$on("activity-comments-retrieved",this.checkCommentsSize),this.$root.$on("activity-liked",this.checkLikesSize),this.checkCommentsSize(),this.checkLikesSize()},beforeDestroy:function(){this.$root.$off("activity-comment-created",this.checkCommentsSize),this.$root.$off("activity-comment-updated",this.checkCommentsSize),this.$root.$off("activity-comment-deleted",this.checkCommentsSize),this.$root.$off("activity-comments-retrieved",this.checkCommentsSize),this.$root.$off("activity-liked",this.checkLikesSize)},methods:{checkLikesSize:function(){this.likers=this.activity.likes||[],this.likersCount=this.activity.likesCount&&Number(this.activity.likesCount)},checkCommentsSize:function(){this.commentsCount=this.activity.commentsSize}}},It=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",[t.displayShareInformation?e("activity-share-information",{staticClass:"no-border-bottom mb-0 py-3",attrs:{activity:t.activity,"activity-types":t.activityTypes}}):t._e(),t._v(" "),e("div",{staticClass:"mb-0 d-flex flex-wrap flex-column flex-lg-row",class:t.actionBarBorderClass},[e("activity-reactions",{staticClass:"flex-grow-1 ps-4",attrs:{"activity-id":t.activityId,activity:t.activity,likers:t.likers,"likers-number":t.likersCount,"comment-number":t.commentsCount}}),t._v(" "),e("activity-actions",{staticClass:"px-4",attrs:{activity:t.activity,"activity-type-extension":t.activityTypeExtension}})],1)],1)};It._withStripped=!0;var St=Object(s.a)(kt,It,[],!1,null,null,null);St.options.__file="src/main/webapp/vue-apps/activity-stream/components/activity/footer/ActivityFooter.vue";var zt=St.exports,Ot={props:{activity:{type:Object,default:null},activityTypes:{type:Object,default:null}},computed:{extendedComponentParams:function(){return{activity:this.activity,activityTypeExtension:this.activityTypes.default}},sharedPoster:function(){return this.activity&&this.activity.identity&&this.activity.identity.profile},space:function(){return this.activity&&this.activity.activityStream&&this.activity.activityStream.space}}},Lt=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"activity-share-information d-flex flex-column align-start"},[e("div",{staticClass:"activity-share-stream d-flex flex-row flex text-truncate"},[e("exo-user-avatar",{staticClass:"activity-share-user",attrs:{username:t.sharedPoster.username,title:t.sharedPoster.fullname,fullname:t.sharedPoster.fullname,"avatar-url":t.sharedPoster.avatar,size:25,external:t.sharedPoster.external||t.sharedPoster.isExternal,"retrieve-extra-information":!1,"bold-title":"","link-style":""}}),t._v(" "),t._m(0),t._v(" "),e("exo-space-avatar",{staticClass:"activity-share-space d-inline-block my-auto",attrs:{space:t.space,size:30,"avatar-class":"border-color","bold-title":"","link-style":""}})],1),t._v(" "),e("div",{staticClass:"activity-share-message"},[e("extension-registry-components",{staticClass:"d-flex flex-column mt-1",attrs:{params:t.extendedComponentParams,name:"ActivityContent",type:"activity-content-extensions","parent-element":"div",element:"div"}})],1)])};Lt._withStripped=!0;var Pt=Object(s.a)(Ot,Lt,[function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"createIn me-2 my-auto"},[i("span",{staticClass:"uiIconArrowRightMini uiIconLightGray"})])}],!1,null,null,null);Pt.options.__file="src/main/webapp/vue-apps/activity-stream/components/activity/footer/ActivityShareInformation.vue";var Dt=Pt.exports,jt={props:{activity:{type:Object,default:null},activityTypeExtension:{type:Object,default:null}},computed:{params:function(){return{activity:this.activity,activityTypeExtension:this.activityTypeExtension}},actionBarBorderClass:function(){return this.isDesktop?"":"border-top-color border-light-color"},isDesktop:function(){return this.$vuetify&&this.$vuetify.breakpoint&&"xs"!==this.$vuetify.breakpoint.name&&"sm"!==this.$vuetify.breakpoint.name&&"md"!==this.$vuetify.breakpoint.name}}},Ut=function(){var t=this.$createElement;return(this._self._c||t)("extension-registry-components",{staticClass:"d-flex flex-no-wrap ms-lg-auto py-2 activity-footer-actions",class:this.actionBarBorderClass,attrs:{params:this.params,name:"ActivityFooter",type:"activity-footer-action","parent-element":"div",element:"div","element-class":"mx-auto ma-lg-0 activity-footer-action"}})};Ut._withStripped=!0;var Nt=Object(s.a)(jt,Ut,[],!1,null,null,null);Nt.options.__file="src/main/webapp/vue-apps/activity-stream/components/activity/footer/ActivityActions.vue";var Rt=Nt.exports,Bt={props:{activity:{type:Object,default:null}},data:function(){return{hasCommented:!1}},computed:{activityId:function(){return this.activity&&this.activity.id},commentColorClass:function(){return this.hasCommented?"primary--text":"disabled--text"},commentTextColorClass:function(){return this.hasCommented?"primary--text":""}},watch:{activity:function(){this.checkWhetherCommented()}},created:function(){this.$root.$on("activity-comment-created",this.handleCommentCreated),this.$root.$on("activity-comment-deleted",this.handleCommentDeleted),this.checkWhetherCommented()},beforeDestroy:function(){this.$root.$off("activity-comment-created",this.handleCommentCreated),this.$root.$off("activity-comment-deleted",this.handleCommentDeleted)},methods:{handleCommentCreated:function(t){t.activityId===this.activityId&&(this.hasCommented=!0)},handleCommentDeleted:function(t){t.activityId===this.activityId&&this.checkWhetherCommented()},checkWhetherCommented:function(){this.hasCommented=this.activity&&"true"===this.activity.hasCommented},openCommentsDrawer:function(){document.dispatchEvent(new CustomEvent("activity-comments-display",{detail:{activity:this.activity,newComment:!0}}))}}},Mt=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"d-inline-flex ms-lg-4"},[e("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(i){var n=i.on,a=i.attrs;return[e("v-btn",t._g(t._b({staticClass:"pa-0 mt-0",class:t.commentTextColorClass,attrs:{id:"CommentLink"+t.activityId,text:"",link:"",small:""},on:{click:t.openCommentsDrawer}},"v-btn",a,!1),n),[e("div",{staticClass:"d-flex flex-lg-row flex-column"},[e("v-icon",{staticClass:"baseline-vertical-align mx-auto",class:t.commentColorClass,attrs:{size:"14"}},[t._v("\n            fa-comment\n          ")]),t._v(" "),e("span",{staticClass:"mx-auto mt-1 mt-lg-0 ms-lg-2"},[t._v("\n            "+t._s(t.$t("UIActivity.label.Comment"))+"\n          ")])],1)])]}}])},[t._v(" "),e("span",[t._v("\n      "+t._s(t.$t("UIActivity.label.Comment"))+"\n    ")])])],1)};Mt._withStripped=!0;var Xt=Object(s.a)(Bt,Mt,[],!1,null,null,null);Xt.options.__file="src/main/webapp/vue-apps/activity-stream/components/activity/footer/actions/ActivityCommentAction.vue";var Wt=Xt.exports,Ft={props:{activity:{type:Object,default:null}},data:function(){return{changingLike:!1,hasLiked:!1}},computed:{activityId:function(){return this.activity&&this.activity.id},likeColorClass:function(){return this.hasLiked?"primary--text":"disabled--text"},likeTextColorClass:function(){return this.hasLiked?"primary--text":""},likeButtonTitle:function(){return this.hasLiked&&this.$t("UIActivity.msg.UnlikeActivity")||this.$t("UIActivity.msg.LikeActivity")}},created:function(){this.computeLikes()},methods:{changeLike:function(){if(!this.changingLike)return this.hasLiked?this.unlikeActivity():this.likeActivity()},likeActivity:function(){var t=this;return this.changingLike=!0,this.$activityService.likeActivity(this.activityId).then((function(i){t.activity.hasLiked="true",t.computeLikes(i),t.$root.$emit("activity-liked",t.activity)})).finally((function(){return t.changingLike=!1}))},unlikeActivity:function(){var t=this;return this.changingLike=!0,this.$activityService.unlikeActivity(this.activityId).then((function(i){t.activity.hasLiked="false",t.computeLikes(i),t.$root.$emit("activity-liked",t.activity)})).finally((function(){return t.changingLike=!1}))},computeLikes:function(t){t&&(this.$set(this.activity,"likes",t&&t.likes||[]),this.$set(this.activity,"likesCount",t&&t.size||0)),this.hasLiked=this.activity&&"true"===this.activity.hasLiked}}},Vt=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"d-inline-flex ms-lg-4"},[e("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(i){var n=i.on,a=i.attrs;return[e("v-btn",t._g(t._b({staticClass:"pa-0 mt-0",class:t.likeTextColorClass,attrs:{id:"LikeLink"+t.activityId,loading:t.changingLike,text:"",link:"",small:""},on:{click:t.changeLike}},"v-btn",a,!1),n),[e("div",{staticClass:"d-flex flex-lg-row flex-column"},[e("v-icon",{staticClass:"baseline-vertical-align",class:t.likeColorClass,attrs:{size:"14"}},[t._v("\n            fa-thumbs-up\n          ")]),t._v(" "),e("span",{staticClass:"mx-auto mt-1 mt-lg-0 ms-lg-2"},[t._v("\n            "+t._s(t.$t("UIActivity.msg.LikeActivity"))+"\n          ")])],1)])]}}])},[t._v(" "),e("span",[t._v("\n      "+t._s(t.likeButtonTitle)+"\n    ")])])],1)};Vt._withStripped=!0;var Kt=Object(s.a)(Ft,Vt,[],!1,null,null,null);Kt.options.__file="src/main/webapp/vue-apps/activity-stream/components/activity/footer/actions/ActivityLikeAction.vue";var Ht=Kt.exports,Yt={props:{activity:{type:Object,default:null},activityTypeExtension:{type:Object,default:null}},data:function(){return{hasShared:!1}},computed:{isShareable:function(){return this.activity&&this.activityTypeExtension&&this.activityTypeExtension.canShare&&this.activityTypeExtension.canShare(this.activity)},activityId:function(){return this.activity&&this.activity.id},activityType:function(){return this.activity&&this.activity.type},shareTextColorClass:function(){return this.hasShared?"primary--text":""},shareIconColorClass:function(){return this.hasShared?"primary--text":"disabled--text"}},created:function(){this.$root.$on("activity-shared",this.setHasShared)},mounted:function(){this.hasShared=this.activity&&this.activity.shareActions&&this.activity.shareActions.find((function(t){return""+t.userIdentityId===eXo.env.portal.userIdentityId}))},beforeDestroy:function(){this.$root.$off("activity-shared",this.setHasShared)},methods:{setHasShared:function(t){this.activity&&this.activity.id===t&&(this.hasShared=!0)},checkHasShared:function(){this.hasShared||(this.hasShared=this.activity&&this.activity.shareActions&&this.activity.shareActions.find((function(t){return""+t.userIdentityId===eXo.env.portal.userIdentityId})))},openShareDrawer:function(){this.$root.$emit("activity-share-drawer-open",this.activityId)}}},Gt=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"d-inline-flex ms-lg-4"},[e("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(i){var n=i.on,a=i.attrs;return[t.isShareable?e("v-btn",t._g(t._b({staticClass:"pa-0 mt-0",class:t.shareTextColorClass,attrs:{id:"ShareActivity"+t.activityId,text:"",link:"",small:""},on:{click:function(i){return t.openShareDrawer()}}},"v-btn",a,!1),n),[e("div",{staticClass:"d-flex flex-lg-row flex-column"},[e("v-icon",{staticClass:"me-lg-1 baseline-vertical-align",class:t.shareIconColorClass,attrs:{size:"14"}},[t._v("\n            fa-share\n          ")]),t._v(" "),e("span",{staticClass:"mx-auto mt-1 mt-lg-0 ms-lg-2"},[t._v("\n            "+t._s(t.$t("UIActivity.share"))+"\n          ")])],1)]):t._e()]}}])},[t._v(" "),e("span",[t._v("\n      "+t._s(t.$t("UIActivity.share"))+"\n    ")])])],1)};Gt._withStripped=!0;var qt=Object(s.a)(Yt,Gt,[],!1,null,null,null);qt.options.__file="src/main/webapp/vue-apps/activity-stream/components/activity/footer/actions/ActivityShareAction.vue";var Jt=qt.exports,Qt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zt={props:{activity:{type:Object,default:null},commentTypes:{type:Object,default:null},commentActions:{type:Object,default:null}},data:function(){return{comments:[],commentsSize:0,limit:2,loading:!0}},computed:{parentCommentClass:function(){return this.commentsSize?"pb-0 pt-5":"pa-0"}},created:function(){var t=this;this.activity&&this.activity.comments&&"object"===Qt(this.activity.comments)?(this.comments=[],this.commentsSize=0,this.loading=!0,this.$nextTick().then((function(){t.comments=t.$activityService.computeParentCommentsList(t.activity.comments)||[],t.activity.commentsSize=t.commentsSize=t.activity.commentsCount&&Number(t.activity.commentsCount)||0,t.$root.$emit("activity-comments-retrieved",t.activity,t.comments),t.loading=!1}))):this.retrieveLastComment()},methods:{retrieveLastComment:function(){var t=this;this.loading=!0,this.$activityService.getActivityComments(this.activity.id,!0,0,this.limit,this.$activityConstants.FULL_COMMENT_EXPAND).then((function(i){t.comments=[],t.commentsSize=0,t.$nextTick().then((function(){t.comments=i&&i.comments||[],t.activity.commentsSize=t.commentsSize=i&&i.size&&Number(i.size)||0,t.$root.$emit("activity-comments-retrieved",t.activity,t.comments)}))})).finally((function(){return t.loading=!1}))},openCommentsDrawer:function(){document.dispatchEvent(new CustomEvent("activity-comments-display",{detail:{activity:this.activity}}))}}},ti=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",[t.loading?e("v-progress-linear",{attrs:{color:"primary",height:"2",indeterminate:""}}):t._e(),t._v(" "),e("activity-comments",{class:t.parentCommentClass,attrs:{activity:t.activity,comments:t.comments,"comment-types":t.commentTypes,"comment-actions":t.commentActions},on:{"comment-created":t.retrieveLastComment,"comment-deleted":t.retrieveLastComment,"comment-updated":t.retrieveLastComment}}),t._v(" "),t.commentsSize>2?e("v-btn",{staticClass:"primary--text font-weight-bold mb-1 subtitle-2 px-0",attrs:{disabled:t.loading,small:"",link:"",text:""},on:{click:t.openCommentsDrawer}},[t._v("\n    "+t._s(t.$t("UIActivity.label.Show_All_Comments",{0:t.commentsSize}))+"\n  ")]):t._e()],1)};ti._withStripped=!0;var ii=Object(s.a)(Zt,ti,[],!1,null,null,null);ii.options.__file="src/main/webapp/vue-apps/activity-stream/components/comment/list/ActivityCommentsPreview.vue";var ei=ii.exports,ni={props:{commentTypes:{type:Object,default:null},commentActions:{type:Object,default:null}},data:function(){return{comments:[],commentsSize:0,activity:null,initialized:!1,drawerOpened:!1,temporaryDrawer:!0,newCommentEditor:!1,selectedCommentIdToReply:null,highlightCommentId:null,highlightRepliesCommentId:null,scrollOnOpen:!0,commentToEdit:null,offset:0,limit:10,pageSize:10,page:1,pagesCount:1}},computed:{commentsTitle:function(){return this.initialized?0===this.commentsSize?this.$t("activity.noComments"):1===this.commentsSize?this.$t("activity.singleComment"):this.$t("activity.commentsCount",{0:this.commentsSize}):""}},created:function(){var t=this;document.addEventListener("activity-comments-display",this.displayActivityComments),document.addEventListener("activity-comment-edit",this.editActivityComments),this.$root.$on("activity-comment-created",this.hideCommentRichEditor),this.$root.$on("activity-comment-updated",this.hideCommentRichEditor),this.$root.$on("activity-comment-edit-cancel",this.hideCommentRichEditor),this.$root.$on("activity-stream-confirm-opened",(function(){return t.temporaryDrawer=!1})),this.$root.$on("activity-stream-confirm-closed",(function(){return t.temporaryDrawer=!0}))},methods:{reset:function(){this.comments=[],this.commentsSize=0,this.drawerOpened=!1,this.page=1,this.offset=0,this.initialized=!1,this.limit=this.pageSize,this.hideCommentRichEditor(),this.$root.selectedCommentId=null},addComment:function(t){this.$root.selectedCommentId=t.id,this.highlightCommentId=this.$root.selectedCommentId,this.retrieveComments(!t.parentCommentId)},deleteComment:function(){this.retrieveComments()},updateComment:function(t,i){this.comments.splice(i,1,t)},scrollToEnd:function(){this.initialized=!0,!this.scrollOnOpen||this.newCommentEditor&&this.selectedCommentIdToReply||this.highlightCommentId||this.highlightRepliesCommentId||(this.scrollOnOpen=!1,this.$root.commentsDrawerInitializing=!1,window.setTimeout((function(){var t=document.querySelector("#activityCommentsDrawer .drawerContent");t.scrollTo({top:t.scrollHeight,behavior:"smooth",block:"start"})}),100))},editActivityComments:function(t){var i=t&&t.detail&&t.detail.comment,e=t&&t.detail&&t.detail.activity;if(i&&e){var n=t&&t.detail&&t.detail.activityBody;i.contentToEdit=n,this.displayActivityComments({options:{activity:e,editComment:i,offset:this.offset,limit:this.limit}})}},displayActivityComments:function(t){var i=this,e=t&&(t.detail||t.options);e&&e.activity&&e.activity.id&&(this.hideCommentRichEditor(),this.$nextTick().then((function(){i.activity=e.activity,i.commentToEdit=e.editComment,i.newCommentEditor=!i.commentToEdit&&e.newComment,i.selectedCommentIdToReply=!i.commentToEdit&&e.commentId,i.highlightCommentId=e.highlightCommentId,i.highlightRepliesCommentId=e.highlightRepliesCommentId,i.drawerOpened||(i.drawerOpened=!0,i.scrollOnOpen=!e.editComment&&!e.noAuitomaticScroll,i.retrieveComments(!0,!0),i.$nextTick().then((function(){i.$refs.activityCommentsDrawer&&i.$refs.activityCommentsDrawer.open()})))})))},displayCommentRichEditor:function(t){var i=this;this.hideCommentRichEditor(),this.$nextTick().then((function(){i.selectedCommentIdToReply=t,i.newCommentEditor=!0}))},hideCommentRichEditor:function(){this.newCommentEditor=!1,this.selectedCommentIdToReply=null,this.commentToEdit=null},loadPreviousPage:function(){var t=this;return this.page--,this.offset=(this.page-1)*this.pageSize,this.comments=[],this.$nextTick().then((function(){return t.retrieveComments(!1,!0)}))},changePage:function(){var t=this;return this.hideCommentRichEditor(),this.$root.selectedCommentId=null,this.offset=(this.page-1)*this.pageSize,this.comments=[],this.$nextTick().then((function(){return t.retrieveComments()}))},retrieveComments:function(t,i){var e=this;return t&&(this.offset=0),this.$refs.activityCommentsDrawer&&this.$refs.activityCommentsDrawer.startLoading(),this.$activityService.getActivityComments(this.activity.id,!!t,this.offset,this.limit,this.$activityConstants.FULL_COMMENT_EXPAND).then((function(n){var a=n&&n.comments||[];if(e.commentsSize=n&&n.size&&Number(n.size)||0,e.pagesCount=parseInt((e.commentsSize+e.limit-1)/e.limit),t&&(e.page=e.pagesCount,e.offset=(e.page-1)*e.pageSize,e.commentsSize>e.pageSize)){var o=e.pageSize-((e.commentsSize-1)%e.pageSize+1),s=a.length;a=a.slice(o,s)}var c=void 0,r=void 0;if(e.$root.selectedCommentId&&e.$root.selectedActivityId===e.activity.id?(c=e.highlightComment(a,e.$root.selectedCommentId),r=e.$root.selectedCommentId):e.highlightCommentId?(c=e.highlightComment(a,e.highlightCommentId),r=e.highlightCommentId):e.highlightRepliesCommentId?((c=a.find((function(t){return t.id===e.highlightRepliesCommentId})))&&(c.highlightReplies=!0,c.expandSubComments=!0),r=e.highlightRepliesCommentId):e.commentToEdit?(c=a.find((function(t){return t.id===e.commentToEdit.id})),r=e.commentToEdit.id):e.selectedCommentIdToReply?r=e.selectedCommentIdToReply:i=!1,i&&r&&!c&&e.page>1)return e.loadPreviousPage();e.comments=a})).finally((function(){e.comments.length||(e.initialized=!0),e.$refs.activityCommentsDrawer&&e.$refs.activityCommentsDrawer.endLoading()}))},highlightComment:function(t,i){var e=t.find((function(t){return t.id===i}));if(e)return e.highlight=!0,e;for(var n=0;n<t.length;n++){var a=t[n],o=a.subComments&&a.subComments.find((function(t){return t.id===i}));if(o)return a.expandSubComments=!0,o.highlight=!0,o}}}},ai=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("exo-drawer",{ref:"activityCommentsDrawer",attrs:{temporary:t.temporaryDrawer,id:"activityCommentsDrawer","allow-expand":"",right:"","disable-pull-to-refresh":""},on:{closed:t.reset}},[e("template",{slot:"title"},[e("span",{staticClass:"text-capitalize-first-letter"},[t._v("\n      "+t._s(t.commentsTitle)+"\n    ")])]),t._v(" "),e("template",{slot:"titleIcons"},[e("v-btn",{staticClass:"my-auto",attrs:{elevation:"0",icon:"",plain:""},on:{click:function(i){return t.displayCommentRichEditor()}}},[e("v-icon",{attrs:{color:"primary"}},[t._v("mdi-chat-plus")])],1)],1),t._v(" "),e("template",{slot:"content"},[e("activity-comments",{ref:"activityComments",staticClass:"pb-0 pt-5 px-4",attrs:{activity:t.activity,comments:t.comments,"comment-types":t.commentTypes,"comment-actions":t.commentActions,"comment-editing":t.commentToEdit,"new-comment-editor":t.newCommentEditor,"selected-comment-id-to-reply":t.selectedCommentIdToReply,initialized:t.initialized,"allow-edit":""},on:{"comment-created":t.addComment,"comment-deleted":t.deleteComment,"comment-updated":t.updateComment,initialized:t.scrollToEnd}})],1),t._v(" "),t.pagesCount>1&&t.initialized?e("template",{slot:"footer"},[e("div",{staticClass:"text-center"},[e("v-pagination",{attrs:{length:t.pagesCount,circle:"",light:"",flat:""},on:{input:t.changePage},model:{value:t.page,callback:function(i){t.page=i},expression:"page"}})],1)]):t._e()],2)};ai._withStripped=!0;var oi=Object(s.a)(ni,ai,[],!1,null,null,null);oi.options.__file="src/main/webapp/vue-apps/activity-stream/components/comment/list/ActivityCommentsDrawer.vue";var si=oi.exports,ci={props:{activity:{type:Object,default:null},comments:{type:Array,default:null},commentTypes:{type:Object,default:null},commentActions:{type:Object,default:null},commentEditing:{type:Object,default:null},newCommentEditor:{type:Boolean,default:!1},selectedCommentIdToReply:{type:String,default:null},allowEdit:{type:Boolean,default:!1},initialized:{type:Boolean,default:!1}},data:function(){return{lastEditorOptions:null,initializedComment:0}},computed:{activityId:function(){return this.activity&&this.activity.id},replyLastEditorOptions:function(){return this.lastEditorOptions&&this.lastEditorOptions.parentCommentId&&this.lastEditorOptions},commentLastEditorOptions:function(){return this.lastEditorOptions&&!this.lastEditorOptions.parentCommentId&&this.lastEditorOptions},commentsSize:function(){return this.comments.length}},watch:{comments:function(){this.commentsSize||(this.initializedComment=0)},initializedComment:function(t,i){i<this.commentsSize&&t>=this.commentsSize&&this.$emit("initialized")}},created:function(){this.allowEdit&&this.$root.$on("activity-comment-editor-updated",this.updateEditorOptions),this.$root.$on("activity-comment-created",this.addComment),this.$root.$on("activity-comment-updated",this.updateComment),this.$root.$on("activity-comment-deleted",this.deleteComment),document.addEventListener("activity-comment-created",this.handleCommentCreated),document.addEventListener("activity-comment-updated",this.handleCommentUpdated),document.addEventListener("activity-comment-deleted",this.handleCommentDeleted)},beforeDestroy:function(){this.allowEdit&&this.$root.$off("activity-comment-editor-updated",this.updateEditorOptions),this.$root.$off("activity-comment-created",this.addComment),this.$root.$off("activity-comment-updated",this.updateComment),this.$root.$off("activity-comment-deleted",this.deleteComment),document.removeEventListener("activity-comment-created",this.handleCommentCreated),document.removeEventListener("activity-comment-updated",this.handleCommentUpdated),document.removeEventListener("activity-comment-deleted",this.handleCommentDeleted)},methods:{handleCommentInitialized:function(){this.initializedComment=this.initializedComment+1},handleCommentDeleted:function(t){this.$root.$emit("activity-comment-deleted",t&&t.detail)},deleteComment:function(t){var i=this;if((t&&t.activityId)===this.activityId){var e=this.comments.findIndex((function(i){return i.id===t.id}));if(e>=0){var n=this.comments[e];this.$emit("comment-deleted",n,e)}else this.comments.forEach((function(e,n){var a=e.subComments||[],o=a.findIndex((function(i){return i.id===t.id}));o>=0&&(t.highlight=!0,t.updated=!0,a.splice(o,1),i.$emit("comment-updated",t,n,o))}))}},handleCommentCreated:function(t){var i=this,e=t&&t.detail;e&&e.id?e.activityId===this.activityId&&(e.templateParams?this.$root.$emit("activity-comment-created",e):this.$activityService.getActivityById(e.id,this.$activityConstants.FULL_COMMENT_EXPAND).then((function(t){return i.$root.$emit("activity-comment-created",t)}))):console.error("no comment was sent in triggered event")},addComment:function(t){if((t&&t.activityId)===this.activityId)if(t.highlight=!0,t.added=!0,t.parentCommentId){var i=this.comments.findIndex((function(i){return i.id===t.parentCommentId}));if(i>=0){var e=this.comments[i];e.subComments.find((function(i){return i.id===t.id}))||(e.subComments.push(t),e.subCommentsSize++),this.$emit("comment-updated",e,i)}else this.$emit("comment-created",t)}else this.$emit("comment-created",t);this.resetEditorOptions()},handleCommentUpdated:function(t){var i=this,e=t&&t.detail;e&&e.id?e.activityId===this.activityId&&(e.templateParams?this.$root.$emit("activity-comment-updated",e):this.$activityService.getActivityById(e.id,this.$activityConstants.FULL_COMMENT_EXPAND).then((function(t){return i.$root.$emit("activity-comment-updated",t)}))):console.error("no comment was sent in triggered event")},updateComment:function(t){var i=this;if((t&&t.activityId)===this.activityId){var e=this.comments.findIndex((function(i){return i.id===t.id}));e>=0?(t.highlight=!0,t.updated=!0,t.subComments=this.comments[e].subComments,this.$emit("comment-updated",t,e)):this.comments.forEach((function(e,n){var a=e.subComments||[],o=a.findIndex((function(i){return i.id===t.id}));o>=0&&(t.highlight=!0,t.updated=!0,a.splice(o,1,t),i.$emit("comment-updated",e,n,o))}))}this.resetEditorOptions()},resetEditorOptions:function(){var t=this;this.lastEditorOptions=!1,window.setTimeout((function(){t.lastEditorOptions=null}),5e3)},updateEditorOptions:function(t){t&&!1!==this.lastEditorOptions&&t.activityId===this.activityId&&(this.lastEditorOptions=t)}}},ri=function(){var t=this,i=t.$createElement,e=t._self._c||i;return t.comments?e("v-list",{staticClass:"flex d-flex flex-column"},[t._l(t.comments,(function(i){return e("activity-comment",{key:i.id,attrs:{activity:t.activity,comment:i,"sub-comments":i.subComments,"new-reply-editor":t.newCommentEditor&&t.selectedCommentIdToReply===i.id,"editor-options":t.replyLastEditorOptions,"comment-types":t.commentTypes,"comment-actions":t.commentActions,"comment-editing":t.commentEditing},on:{"comment-initialized":t.handleCommentInitialized}})})),t._v(" "),t.allowEdit&&t.newCommentEditor&&!t.selectedCommentIdToReply&&t.initialized?e("activity-comment-rich-text",{ref:"commentRichEditor",staticClass:"mb-6",attrs:{"activity-id":t.activityId,options:t.commentLastEditorOptions,label:t.$t("UIActivity.label.Comment")}}):t._e()],2):t._e()};ri._withStripped=!0;var mi=Object(s.a)(ci,ri,[],!1,null,null,null);mi.options.__file="src/main/webapp/vue-apps/activity-stream/components/comment/list/ActivityComments.vue";var li=mi.exports,di={props:{activity:{type:Object,default:null},comment:{type:Object,default:null},subComments:{type:Array,default:null},commentTypes:{type:Object,default:null},commentActions:{type:Object,default:null},newReplyEditor:{type:Boolean,default:!1},commentEditing:{type:Boolean,default:!1},editorOptions:{type:Object,default:null}},data:function(){return{displayedSubCommentCount:2}},computed:{activityId:function(){return this.activity&&this.activity.id||""},commentId:function(){return this.comment&&this.comment.id||""},parentCommentId:function(){return this.comment&&(this.comment.parentCommentId||this.comment.id)||""},id:function(){return"ActivityCommment_"+this.comment.id},ckEditorId:function(){return"reply_"+this.comment.id},highlight:function(){return this.comment&&this.comment.highlight},highlightClass:function(){return this.highlight?"light-grey-background":""},highlightReplies:function(){return this.comment&&this.comment.highlightReplies},highlightRepliesClass:function(){return this.highlightReplies?"light-grey-background":""},posterIdentity:function(){return this.comment&&this.comment.identity},isEditingComment:function(){return this.commentEditing&&this.commentEditing.id===this.comment.id},commentTypeExtension:function(){return this.commentTypes&&(this.commentTypes[this.comment.type]||this.commentTypes.default)},commentEditOptions:function(){var t=this.isEditingComment?this.commentEditing:this.comment,i=t.contentToEdit||this.commentTypeExtension&&this.commentTypeExtension.getBodyToEdit&&this.commentTypeExtension.getBodyToEdit(t)||this.commentToEdit.title||this.commentToEdit.body;return{activityId:this.activityId,parentCommentId:this.comment.parentCommentId||null,commentId:this.commentId,message:i}},subCommentsToDisplay:function(){return!this.comment.expandSubComments&&this.subComments&&this.subComments.length>this.displayedSubCommentCount?this.subComments&&this.subComments.slice(this.subComments.length-this.displayedSubCommentCount,this.subComments.length):this.subComments},displayedSubCommentsSize:function(){return this.subCommentsToDisplay&&this.subCommentsToDisplay.length||0},subCommentsSize:function(){return this.comment&&this.comment.subCommentsSize||0},hasMoreRepliesToDisplay:function(){return this.subCommentsSize>this.displayedSubCommentsSize}},watch:{highlight:{immediate:!0,handler:function(t){var i=this;t&&window.setTimeout((function(){i.comment.highlight=!1,i.comment.highlightReplies=!1}),5e3)}},highlightReplies:{immediate:!0,handler:function(t){var i=this;t&&window.setTimeout((function(){i.comment.highlightReplies=!1,i.comment.highlight=!1}),5e3)}}},mounted:function(){var t=this;this.highlight?this.$nextTick().then((function(){return t.scrollToComment()})):this.highlightReplies&&this.$nextTick().then(this.scrollToReplies)},methods:{openReplies:function(){this.$el.closest("#activityCommentsDrawer")?(this.comment.expandSubComments=!0,this.displayedSubCommentCount=this.subCommentsSize):document.dispatchEvent(new CustomEvent("activity-comments-display",{detail:{activity:this.activity,commentId:this.commentId,highlightRepliesCommentId:this.commentId}}))},scrollToReplies:function(){var t=document.querySelector("#activityCommentsDrawer .drawerContent #"+this.id+" .activity-comment");this.scrollTo(t)},scrollToComment:function(t){var i=this,e=document.querySelector("#activityCommentsDrawer .drawerContent #"+this.id);e?this.scrollTo(e):!t||t<5?window.setTimeout((function(){i.scrollToComment(t&&t+1||1)}),200):console.warn("Can't scroll to comment with id "+this.id+" after "+t+" tentatives")},scrollTo:function(t){window.setTimeout((function(){t&&t.scrollIntoView&&t.scrollIntoView({behavior:"smooth",block:"start"})}),50)}}},ui=function(){var t=this,i=t.$createElement,e=t._self._c||i;return t.commentTypeExtension?e("div",{staticClass:"d-inline-flex flex-column activity-comment border-box-sizing",attrs:{id:t.id}},[t.isEditingComment?e("div",{staticClass:"col-auto mb-4 py-0 flex-shrink-1"},[e("activity-comment-rich-text",{ref:"commentEditRichEditor",attrs:{"activity-id":t.activityId,"parent-comment-id":t.comment.parentCommentId,"comment-id":t.comment.id,"template-params":t.templateParams,label:t.$t("UIActivity.label.Update"),options:t.commentEditOptions}})],1):[e("v-list-item",{staticClass:"pa-0 mb-4 width-fit-content",class:t.highlightClass},[e("activity-head-user",{staticClass:"mt-0 mb-auto me-2 flex-grow-0",attrs:{identity:t.posterIdentity,size:33,avatar:""}}),t._v(" "),e("div",{staticClass:"flex-grow-1 flex-shrink-1 overflow-hidden"},[e("div",{staticClass:"px-2 py-1 flex-grow-1 activity-comment-background border-box-sizing rounded-lg"},[e("v-list-item-title",{staticClass:"pt-1 font-weight-bold subtitle-2"},[e("activity-head-user",{attrs:{identity:t.posterIdentity}})],1),t._v(" "),e("activity-comment-body-text",{attrs:{activity:t.activity,comment:t.comment,"comment-type-extension":t.commentTypeExtension},on:{"comment-initialized":function(i){return t.$emit("comment-initialized")}}})],1),t._v(" "),e("div",{staticClass:"py-0 my-1 align-start d-flex flex-row border-box-sizing"},[e("activity-comment-actions",{staticClass:"d-flex flex-row py-0 mb-auto flex-shrink-1",attrs:{activity:t.activity,comment:t.comment,"comment-type-extension":t.commentTypeExtension}}),t._v(" "),e("activity-comment-time",{staticClass:"d-inline ps-2 activity-comment-head-time",attrs:{activity:t.comment,"no-icon":""}})],1),t._v(" "),t.hasMoreRepliesToDisplay?e("div",{staticClass:"py-0 my-1 align-start d-flex flex-row border-box-sizing"},[e("v-btn",{staticClass:"primary--text font-weight-bold mb-1 subtitle-2 pa-0",attrs:{small:"",link:"",text:""},on:{click:t.openReplies}},[e("v-icon",{staticClass:"me-1 fa-flip-horizontal",attrs:{size:"12"}},[t._v("fa-reply")]),t._v("\n            "+t._s(t.$t("UIActivity.label.ViewAllReplies",{0:t.subCommentsSize}))+"\n          ")],1)],1):t._e()]),t._v(" "),e("v-list-item-action",{staticClass:"mb-auto ms-0 me-1 mt-0 pt-0"},[e("activity-comment-menu",{attrs:{activity:t.activity,comment:t.comment,actions:t.commentActions,"comment-type-extension":t.commentTypeExtension}})],1)],1)],t._v(" "),t.displayedSubCommentsSize?e("div",{staticClass:"flex d-flex flex-column",class:t.highlightRepliesClass},t._l(t.subCommentsToDisplay,(function(i){return e("activity-comment",{key:i.id,staticClass:"ps-10",attrs:{activity:t.activity,comment:i,"comment-types":t.commentTypes,"comment-actions":t.commentActions,"comment-editing":t.commentEditing},on:{"comment-initialized":function(i){return t.$emit("comment-initialized")}}})})),1):t._e(),t._v(" "),t.newReplyEditor?e("div",{staticClass:"ps-10 py-0 mb-2 align-start border-box-sizing"},[e("activity-comment-rich-text",{ref:"commentRichEditor",staticClass:"col-auto pa-0 mt-0 mb-2 flex-shrink-1",attrs:{"activity-id":t.activityId,"parent-comment-id":t.parentCommentId,label:t.$t("UIActivity.label.Comment"),options:t.editorOptions}})],1):t._e()],2):t._e()};ui._withStripped=!0;var hi=Object(s.a)(di,ui,[],!1,null,null,null);hi.options.__file="src/main/webapp/vue-apps/activity-stream/components/comment/ActivityComment.vue";var vi=hi.exports,pi={props:{activity:{type:Object,default:null},comment:{type:Object,default:null},actions:{type:Object,default:null},commentTypeExtension:{type:String,default:null}},data:function(){return{menu:!1}},computed:{enabledActions:function(){var t=this;return this.actions&&Object.values(this.actions).filter((function(i){return i.isEnabled&&i.id&&i.click&&i.isEnabled(t.activity,t.comment,t.commentTypeExtension)}))}},created:function(){var t=this;$(document).mousedown((function(){t.menu&&window.setTimeout((function(){t.menu=!1}),200)}))},methods:{clickOnAction:function(t){var i=this;t.confirmDialog?this.$root.$emit("activity-stream-display-confirm",{title:t.confirmTitleKey,message:t.confirmMessageKey,ok:t.confirmOkKey,cancel:t.confirmCancelKey,callback:function(){return t.click(i.activity,i.comment,i.commentTypeExtension)}}):t.click(this.activity,this.comment,this.commentTypeExtension)}}},yi=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("v-list-item-icon",{directives:[{name:"show",rawName:"v-show",value:t.enabledActions&&t.enabledActions.length,expression:"enabledActions && enabledActions.length"}],staticClass:"ma-0"},[e("v-menu",{attrs:{"content-class":"white",left:!t.$vuetify.rtl,right:t.$vuetify.rtl,"nudge-left":!t.$vuetify.rtl&&"12","nudge-right":!t.$vuetify.rtl&&"12",bottom:"","offset-y":"",attach:""},scopedSlots:t._u([{key:"activator",fn:function(i){var n=i.on,a=i.attrs;return[e("v-btn",t._g(t._b({attrs:{icon:"",small:""}},"v-btn",a,!1),n),[e("v-icon",{staticClass:"primary--text",attrs:{size:"18"}},[t._v("mdi-dots-vertical")])],1)]}}]),model:{value:t.menu,callback:function(i){t.menu=i},expression:"menu"}},[t._v(" "),e("v-list",{staticClass:"pa-0",attrs:{dense:""}},t._l(t.enabledActions,(function(i){return e("v-list-item",{key:i.id,attrs:{dense:""},on:{click:function(e){return t.clickOnAction(i)}}},[e("v-list-item-title",[t._v(t._s(t.$t(i.labelKey)))])],1)})),1)],1)],1)};yi._withStripped=!0;var fi=Object(s.a)(pi,yi,[],!1,null,null,null);fi.options.__file="src/main/webapp/vue-apps/activity-stream/components/comment/header/ActivityCommentMenu.vue";var gi=fi.exports,Ci={props:{activity:{type:Object,default:null},comment:{type:Object,default:null},commentTypeExtension:{type:String,default:null}},data:function(){return{loading:!1,initialized:!1,initializedEmited:!1}},computed:{id:function(){return"activity-comment-detail-"+this.commentId},commentId:function(){return this.comment&&this.comment.id},extendedComponent:function(){return this.commentTypeExtension&&this.commentTypeExtension.getExtendedComponent&&this.commentTypeExtension.getExtendedComponent(this.activity,this.isActivityDetail)},extendedComponentOptions:function(){return this.extendedComponent&&{componentName:"Activity-"+this.commentTypeExtension.id,componentOptions:{vueComponent:this.extendedComponent.component}}},extendedComponentParams:function(){return{activity:this.comment,activityTypeExtension:this.commentTypeExtension}},init:function(){return this.commentTypeExtension&&this.commentTypeExtension.init},refresh:function(){return this.commentTypeExtension&&this.commentTypeExtension.refresh}},watch:{activity:function(){this.retrieveCommentProperties()},commentTypeExtension:function(){this.retrieveCommentProperties()},loading:function(){this.loading||(this.refreshTipTip(),this.$root.$emit("activity-comment-refreshed"))},initialized:function(){this.initialized&&!this.initializedEmited&&(this.$emit("comment-initialized"),this.initializedEmited=!0),this.initialized&&this.refreshTipTip()}},created:function(){this.retrieveCommentProperties(),this.$root.$on("activity-comment-updated",this.commentUpdated)},mounted:function(){this.initialized&&!this.initializedEmited&&(this.$emit("comment-initialized"),this.initializedEmited=!0)},methods:{commentUpdated:function(t){t.id===this.comment.id&&(this.comment.updated=!0,this.retrieveCommentProperties())},retrieveCommentProperties:function(){var t=this;this.refresh&&(this.comment.updated||this.comment.added)&&this.refresh(this.comment,!1,this.activity),delete this.comment.updated,delete this.comment.added,this.loading=!0,this.$nextTick().then((function(){if(t.init){var i=t.init(t.comment,!1,t.activity);if(i&&i.finally)return t.initialized=!1,i.finally((function(){t.initialized=!0,t.loading=!1}))}t.loading=!1,t.initialized=!0}))},refreshTipTip:function(){var t=this;window.setTimeout((function(){t.$utils.initTipTip(t.$el,{})}),200)}}},bi=function(){var t=this,i=t.$createElement,e=t._self._c||i;return t.initialized?e("div",{staticClass:"activity-detail overflow-hidden activity-comment-detail flex",attrs:{id:t.id,dir:"auto"}},[t.extendedComponent?[e("extension-registry-component",{attrs:{component:t.extendedComponentOptions,element:t.extendedComponent.element,"element-class":t.extendedComponent.class,params:t.extendedComponentParams}})]:[e("extension-registry-components",{staticClass:" d-flex flex-column",attrs:{params:t.extendedComponentParams,name:"ActivityContent",type:"activity-content-extensions","parent-element":"div",element:"div"}})]],2):t._e()};bi._withStripped=!0;var xi=Object(s.a)(Ci,bi,[],!1,null,null,null);xi.options.__file="src/main/webapp/vue-apps/activity-stream/components/comment/content/ActivityCommentBodyText.vue";var _i=xi.exports,Ti={props:{activityId:{type:String,default:null},parentCommentId:{type:String,default:null},commentId:{type:String,default:null},templateParams:{type:Object,default:function(){return{}}},label:{type:String,default:null},options:{type:Object,default:null}},data:function(){return{initialized:!1,commenting:!1,message:null,avatarSize:"33px"}},computed:{avatarUrl:function(){return this.$currentUserIdentity&&this.$currentUserIdentity.profile&&this.$currentUserIdentity.profile.avatar},textLength:function(){var t=this.$utils.htmlToText(this.message);return t&&t.length||0},commentUpdate:function(){return!!this.commentId},disableButton:function(){return this.commenting||!this.message||!this.message.trim()||"<p></p>"===this.message.trim()||"<div></div>"===this.message.trim()||this.textLength>this.$activityConstants.COMMENT_MAX_LENGTH},ckEditorId:function(){return"comment_"+(this.commentId||"")+"_"+(this.parentCommentId||"")+"_"+this.activityId}},mounted:function(){this.init()},beforeDestroy:function(){this.reset()},methods:{reset:function(){this.initialized&&(this.initialized=!1,this.message&&this.$root.$emit("activity-comment-editor-updated",{activityId:this.activityId,commentId:this.commentId,parentCommentId:this.parentCommentId,message:this.message&&String(this.message),templateParams:this.templateParams}),this.commenting=!1,this.message=null,this.$refs.commentEditor&&this.$refs.commentEditor.destroyCKEditor())},init:function(){!this.options||this.options.activityId!==this.activityId||(this.parentCommentId||!this.parentCommentId!=!this.options.parentCommentId)&&this.options.parentCommentId!==this.parentCommentId||(this.commentId||!this.commentId!=!this.options.commentId)&&this.options.commentId!==this.commentId?this.message=null:this.message=this.options.message||null,this.$refs.commentEditor&&(this.$refs.commentEditor.initCKEditor(),this.initialized=!0,this.scrollToCommentEditor())},handleEditorReady:function(){this.commentUpdate&&this.scrollToCommentEditor()},scrollToCommentEditor:function(){var t=this;window.setTimeout((function(){var i=document.querySelector("#activityCommentsDrawer .drawerContent #"+t.ckEditorId);i&&i.scrollIntoView&&i.scrollIntoView({behavior:"smooth",block:"start"})}),50)},postComment:function(){var t=this;this.commenting||(this.commenting=!0,this.commentUpdate?this.$activityService.updateComment(this.activityId,this.parentCommentId,this.commentId,this.message,this.templateParams,this.$activityConstants.FULL_COMMENT_EXPAND).then((function(i){return t.$root.$emit("activity-comment-updated",i)})).finally((function(){t.message=null,t.commenting=!1})):this.$activityService.createComment(this.activityId,this.parentCommentId,this.message,this.templateParams,this.$activityConstants.FULL_COMMENT_EXPAND).then((function(i){return t.$root.$emit("activity-comment-created",i)})).finally((function(){t.message=null,t.commenting=!1})))}}},$i=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{attrs:{id:t.ckEditorId}},[e("v-list-item",{staticClass:"pa-0"},[e("v-list-item-avatar",{staticClass:"mt-0 mb-auto me-2",attrs:{size:t.avatarSize}},[e("img",{staticClass:"object-fit-cover my-auto",attrs:{src:t.avatarUrl,loading:"lazy"}})]),t._v(" "),e("v-list-item-content",{staticClass:"flex px-0 py-0 mb-2 flex-shrink-1 border-box-sizing rich-editor-content"},[e("exo-activity-rich-editor",{ref:"commentEditor",attrs:{"ck-editor-type":t.ckEditorId,"max-length":t.$activityConstants.COMMENT_MAX_LENGTH,placeholder:t.$t("activity.composer.placeholder",{0:t.$activityConstants.COMMENT_MAX_LENGTH}),"activity-id":t.activityId,"template-params":t.templateParams,"suggestor-type-of-relation":"mention_comment",autofocus:""},on:{ready:t.handleEditorReady},model:{value:t.message,callback:function(i){t.message=i},expression:"message"}})],1)],1),t._v(" "),e("v-btn",{staticClass:"btn btn-primary ms-10",attrs:{loading:t.commenting,disabled:t.disableButton,color:"primary"},on:{click:t.postComment}},[t._v("\n    "+t._s(t.label)+"\n  ")]),t._v(" "),t.commentUpdate?e("v-btn",{staticClass:"btn ms-2",attrs:{disabled:t.commenting},on:{click:function(i){return t.$root.$emit("activity-comment-edit-cancel")}}},[t._v("\n    "+t._s(t.$t("UIActivity.label.Cancel"))+"\n  ")]):t._e()],1)};$i._withStripped=!0;var Ei=Object(s.a)(Ti,$i,[],!1,null,null,null);Ei.options.__file="src/main/webapp/vue-apps/activity-stream/components/comment/content/ActivityCommentRichText.vue";var wi=Ei.exports,Ai={props:{activity:{type:Object,default:null},noIcon:{type:Boolean,default:!1}},data:function(){return{dateFormat:{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"}}},computed:{isActivityEdited:function(){return this.activity&&this.activity.updateDate!==this.activity.createDate},activityId:function(){return this.activity&&this.activity.id},activityLink:function(){return this.$root.activityBaseLink+"?id="+this.activityId},activityPostedTime:function(){return this.activity&&(this.activity.updateDate||this.activity.createDate)}}},ki=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"caption text-light-color text-truncate"},[e("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(i){var n=i.on,a=i.attrs;return[e("v-btn",t._g(t._b({staticClass:"hover-underline width-auto text-capitalize-first-letter d-inline px-0",attrs:{href:t.activityLink,height:20,"x-small":"",link:"",text:"",plain:""}},"v-btn",a,!1),n),[t.isActivityEdited?e("relative-date-format",{staticClass:"text-capitalize-first-letter text-light-color text-truncate pt-1 ps-1",attrs:{value:t.activity.updateDate,label:"TimeConvert.label.Short.Edited",short:""}}):e("relative-date-format",{staticClass:"text-capitalize-first-letter text-light-color text-truncate pt-1 ps-1",attrs:{value:t.activity.createDate,short:""}})],1)]}}])},[t._v(" "),e("date-format",{attrs:{value:t.activityPostedTime,format:t.dateFormat}})],1)],1)};ki._withStripped=!0;var Ii=Object(s.a)(Ai,ki,[],!1,null,null,null);Ii.options.__file="src/main/webapp/vue-apps/activity-stream/components/comment/footer/ActivityCommentTime.vue";var Si=Ii.exports,zi={props:{activity:{type:Object,default:null},comment:{type:Object,default:null},commentTypeExtension:{type:Object,default:null}},computed:{params:function(){return{activity:this.activity,comment:this.comment,commentTypeExtension:this.commentTypeExtension}}}},Oi=function(){var t=this.$createElement;return(this._self._c||t)("extension-registry-components",{attrs:{name:"ActivityCommentFooter",type:"activity-comment-footer-action","element-class":"d-flex my-0 ms-0 me-2",params:this.params}})};Oi._withStripped=!0;var Li=Object(s.a)(zi,Oi,[],!1,null,null,null);Li.options.__file="src/main/webapp/vue-apps/activity-stream/components/comment/footer/ActivityCommentActions.vue";var Pi=Li.exports,Di={props:{activity:{type:Object,default:null},comment:{type:Object,default:null}},data:function(){return{hasCommented:!1}},computed:{activityId:function(){return this.comment&&this.comment.activityId},commentId:function(){return this.comment&&(this.comment.parentCommentId||this.comment.id)||""},commentTextColorClass:function(){return this.hasCommented?"primary--text":""},subCommentsSize:function(){return this.comment&&this.comment.subCommentsSize||0}},watch:{comment:function(){this.checkWhetherCommented()}},created:function(){this.$root.$on("activity-comment-created",this.handleCommentCreated),this.$root.$on("activity-comment-deleted",this.handleCommentDeleted),this.checkWhetherCommented()},beforeDestroy:function(){this.$root.$off("activity-comment-created",this.handleCommentCreated),this.$root.$off("activity-comment-deleted",this.handleCommentDeleted)},methods:{handleCommentCreated:function(t){t.activityId===this.activityId&&this.comment.id===t.parentCommentId&&(this.hasCommented=!0)},handleCommentDeleted:function(t){t.activityId===this.activityId&&this.comment.id===t.parentCommentId&&this.checkWhetherCommented()},checkWhetherCommented:function(){this.hasCommented=this.comment&&"true"===this.comment.hasCommented},openCommentsDrawer:function(){document.dispatchEvent(new CustomEvent("activity-comments-display",{detail:{activity:this.activity,commentId:this.commentId,newComment:!0}}))},openReplies:function(){document.dispatchEvent(new CustomEvent("activity-comments-display",{detail:{activity:this.activity,commentId:this.commentId,highlightRepliesCommentId:this.commentId}}))}}},ji=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"d-inline-flex pe-1"},[e("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(i){var n=i.on,a=i.attrs;return[e("v-btn",t._g(t._b({staticClass:"pa-0 me-0",class:t.commentTextColorClass,attrs:{id:"CommentLink"+t.activityId,text:"",link:"","x-small":""},on:{click:t.openCommentsDrawer}},"v-btn",a,!1),n),[e("span",[t._v("\n          "+t._s(t.$t("UIActivity.label.Reply"))+"\n        ")])])]}}])},[t._v(" "),e("span",[t._v("\n      "+t._s(t.$t("UIActivity.label.Comment"))+"\n    ")])]),t._v(" "),e("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(i){var n=i.on,a=i.attrs;return[e("v-btn",t._g(t._b({directives:[{name:"show",rawName:"v-show",value:t.subCommentsSize,expression:"subCommentsSize"}],staticClass:"primary--text font-weight-bold",attrs:{id:"RepliesListLink"+t.commentId,title:t.$t("UIActivity.label.ViewAllReplies",{0:t.subCommentsSize}),"x-small":"",icon:""},on:{click:t.openReplies}},"v-btn",a,!1),n),[t._v("\n        ("+t._s(t.subCommentsSize)+")\n      ")])]}}])},[t._v(" "),e("span",[t._v("\n      "+t._s(t.$t("UIActivity.label.ViewAllReplies",{0:t.subCommentsSize}))+"\n    ")])])],1)};ji._withStripped=!0;var Ui=Object(s.a)(Di,ji,[],!1,null,null,null);Ui.options.__file="src/main/webapp/vue-apps/activity-stream/components/comment/footer/actions/ActivityCommentReplyAction.vue";var Ni=Ui.exports;var Ri={props:{activity:{type:Object,default:null},comment:{type:Object,default:null}},data:function(){return{changingLike:!1}},computed:{commentId:function(){return this.comment&&this.comment.id},likers:function(){return this.comment&&this.comment.likes&&this.comment.likes.slice().reverse()||[]},likesCount:function(){return this.likers.length},likersFullnameTitle:function(){var t=this.likers.map((function(t){return t&&t.fullname})).filter((function(t){return!!t}));if(this.likesCount>10){var i=t.slice(0,9).join("<br />");return i+"<br />"+this.$t("UIActivity.msg.MoreLikers",{0:this.likesCount-9})}return t.slice(0,10).join("<br />")},hasLiked:function(){return this.likers.filter((function(t){return t&&t.id===eXo.env.portal.userIdentityId})).length},likeColorClass:function(){return this.hasLiked?"primary--text":"disabled--text"},likeTextColorClass:function(){return this.hasLiked?"primary--text":""},likeButtonTitle:function(){return this.hasLiked&&this.$t("UIActivity.msg.UnlikeActivity")||this.$t("UIActivity.msg.LikeActivity")}},created:function(){this.$root.$on("activity-comment-liked",this.updateCommentLikers)},beforeDestroy:function(){this.$root.$off("activity-comment-liked",this.updateCommentLikers)},methods:{updateCommentLikers:function(t){t&&t.id===this.comment.id&&(this.comment.likes=t.likes||[])},changeLike:function(){if(!this.changingLike)return this.hasLiked?this.unlikeComment():this.likeComment()},likeComment:function(){var t=this;return this.changingLike=!0,this.$activityService.likeActivity(this.commentId).then((function(){var i=Object.assign({},t.$currentUserIdentity,t.$currentUserIdentity.profile);t.comment.likes=[].concat(function(t){if(Array.isArray(t)){for(var i=0,e=Array(t.length);i<t.length;i++)e[i]=t[i];return e}return Array.from(t)}(t.likers),[i]),t.comment.likesCount++,t.$root.$emit("activity-comment-liked",t.comment)})).finally((function(){return t.changingLike=!1}))},unlikeComment:function(){var t=this;return this.changingLike=!0,this.$activityService.unlikeActivity(this.commentId).then((function(){t.comment.likes=t.likers.filter((function(t){return t.id!==eXo.env.portal.userIdentityId})),t.comment.likesCount--,t.$root.$emit("activity-comment-liked",t.comment)})).finally((function(){return t.changingLike=!1}))}}},Bi=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"d-inline-flex pe-1"},[e("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(i){var n=i.on,a=i.attrs;return[e("v-btn",t._g(t._b({staticClass:"px-0 width-auto",class:t.likeTextColorClass,attrs:{id:"LikeLink"+t.commentId,loading:t.changingLike,text:"",link:"","x-small":""},on:{click:t.changeLike}},"v-btn",a,!1),n),[t._v("\n        "+t._s(t.$t("UIActivity.msg.LikeActivity"))+"\n      ")])]}}])},[t._v(" "),e("span",[t._v("\n      "+t._s(t.likeButtonTitle)+"\n    ")])]),t._v(" "),e("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(i){var n=i.on,a=i.attrs;return[e("v-btn",t._g(t._b({directives:[{name:"show",rawName:"v-show",value:t.likesCount,expression:"likesCount"}],staticClass:"primary--text font-weight-bold",attrs:{id:"LikersListLink"+t.commentId,"x-small":"",icon:""}},"v-btn",a,!1),n),[t._v("\n        ("+t._s(t.likesCount)+")\n      ")])]}}])},[t._v(" "),e("span",{directives:[{name:"sanitized-html",rawName:"v-sanitized-html",value:t.likersFullnameTitle,expression:"likersFullnameTitle"}]})])],1)};Bi._withStripped=!0;var Mi=Object(s.a)(Ri,Bi,[],!1,null,null,null);Mi.options.__file="src/main/webapp/vue-apps/activity-stream/components/comment/footer/actions/ActivityCommentLikeAction.vue";var Xi={"activity-stream":r,"activity-stream-list":U,"activity-notification-alerts":w,"activity-auto-link":_,"activity-stream-empty-message-space":u,"activity-stream-empty-message-user":y,"activity-not-found":C,"activity-stream-updater":S,"activity-stream-confirm-dialog":L,"activity-stream-activity":M,"activity-stream-loader":V,"activity-head":G,"activity-head-space":Z,"activity-head-user":nt,"activity-head-time":ct,"activity-head-menu":dt,"activity-body":pt,"activity-link":Ct,"activity-share":Tt,"activity-embedded-html":At,"activity-footer":zt,"activity-share-information":Dt,"activity-actions":Rt,"activity-comment-action":Wt,"activity-like-action":Ht,"activity-share-action":Jt,"activity-comments-preview":ei,"activity-comments-drawer":si,"activity-comments":li,"activity-comment":vi,"activity-comment-body-text":_i,"activity-comment-rich-text":wi,"activity-comment-time":Si,"activity-comment-actions":Pi,"activity-comment-reply-action":Ni,"activity-comment-like-action":Mi.exports,"activity-comment-menu":gi};for(var Wi in Xi)Vue.component(Wi,Xi[Wi]);e(9);function Fi(t){var i=window.location,e=eXo.env.portal.cometdContext,n=eXo.env.portal.cometdToken;cCometd.configure({url:i.protocol+"//"+i.hostname+(i.port?":":"")+(i.port||"")+"/"+e+"/cometd",exoId:eXo.env.portal.userName,exoToken:n}),cCometd.subscribe("/eXo/Application/ActivityStream",null,(function(i){var e=i.data&&JSON.parse(i.data);e&&t(e)}))}function Vi(){return cCometd.isDisconnected()}Vue.prototype.$activityStreamWebSocket||window.Object.defineProperty(Vue.prototype,"$activityStreamWebSocket",{value:n}),Vue.prototype.$activityConstants||window.Object.defineProperty(Vue.prototype,"$activityConstants",{value:{FULL_ACTIVITY_IDS_EXPAND:"ids,identity,likes,shared,commentsPreview,subComments",FULL_ACTIVITY_EXPAND:"identity,likes,shared,commentsPreview,subComments",ACTIVITY_EXPAND:"identity,likes,shared",FULL_COMMENT_EXPAND:"identity,likes,subComments",COMMENT_MAX_LENGTH:1300}}),document.dispatchEvent(new CustomEvent("displayTopBarLoading"));var Ki=eXo.env.portal.context+"/"+eXo.env.portal.portalName+"/activity";if(extensionRegistry){var Hi=extensionRegistry.loadComponents("ActivityStream");Hi&&Hi.length>0&&Hi.forEach((function(t){Vue.component(t.componentName,t.componentOptions)}))}window.disableSwipeOnPage=!0;var Yi="undefined"!=typeof eXo?eXo.env.portal.language:"en",Gi=[eXo.env.portal.context+"/"+eXo.env.portal.rest+"/i18n/bundle/locale.portlet.Portlets-"+Yi+".json",eXo.env.portal.context+"/"+eXo.env.portal.rest+"/i18n/bundle/locale.commons.Commons-"+Yi+".json",eXo.env.portal.context+"/"+eXo.env.portal.rest+"/i18n/bundle/locale.social.Webui-"+Yi+".json"];function qi(t,i){exoi18n.loadLanguageAsync(Yi,Gi).then((function(e){Vue.createApp({data:{initialData:t,initialLimit:i,activityBaseLink:Ki},template:'<activity-stream id="ActivityStream" :initial-limit="initialLimit" :initial-data="initialData" />',vuetify:Vue.prototype.vuetifyOptions,i18n:e},"#ActivityStream","Stream")}))}},9:function(t,i){var e=eXo.env.portal.context+"/"+eXo.env.portal.portalName+"/activity";extensionRegistry.registerComponent("ActivityStream","activity-stream-drawers",{id:"share-drawer",vueComponent:Vue.options.components["activity-share-drawer"],rank:10}),extensionRegistry.registerComponent("ActivityStream","activity-stream-drawers",{id:"comments-drawer",vueComponent:Vue.options.components["activity-comments-drawer"],rank:20}),extensionRegistry.registerComponent("ActivityContent","activity-content-extensions",{id:"body",vueComponent:Vue.options.components["activity-body"],rank:1}),extensionRegistry.registerComponent("ActivityContent","activity-content-extensions",{id:"link",isEnabled:function(t){var i=t&&t.activityTypeExtension,e=t&&t.activity,n=t&&t.isActivityDetail;return i.getSourceLink&&i.getSourceLink(e,n)},vueComponent:Vue.options.components["activity-link"],rank:5}),extensionRegistry.registerComponent("ActivityContent","activity-content-extensions",{id:"shared-activity",isEnabled:function(t){return t.activity&&t.activity.originalActivity},vueComponent:Vue.options.components["activity-share"],rank:1e3}),extensionRegistry.registerComponent("ActivityContent","activity-content-extensions",{id:"embedded-html",isEnabled:function(t){var i=t&&t.activityTypeExtension,e=t&&t.activity,n=t&&t.isActivityDetail;return i.getEmbeddedHtml&&i.getEmbeddedHtml(e,n)},vueComponent:Vue.options.components["activity-embedded-html"],rank:5});var n={getEmbeddedHtml:function(t){return t&&t.templateParams&&t.templateParams.html},getSourceLink:function(t){return t&&t.templateParams&&!t.templateParams.html&&t.templateParams.link},getTitle:function(t){return t&&t.templateParams&&(t.templateParams.title||t.templateParams.defaultTitle||t.templateParams.link)||""},getWindowTitle:function(t){return t&&t.templateParams&&t.templateParams.title||t.templateParams.defaultTitle||t.templateParams.link||t.title||""},getSummary:function(t){return t&&t.templateParams&&t.templateParams.description||""},getThumbnail:function(t){return t&&t.templateParams&&t.templateParams.image||""},getThumbnailProperties:function(t){return!(t&&t.templateParams&&t.templateParams.image)&&{height:"90px",width:"90px",noBorder:!0}},isUseSameViewForMobile:function(t){return!t||!t.templateParams||!t.templateParams.image},supportsThumbnail:!0,supportsIcon:!0,defaultIcon:{icon:"fa fa-link"},getBody:function(t){return Vue.prototype.$utils.trim(t.templateParams&&t.templateParams.comment||t&&t.title||t&&t.body||"")},getBodyToEdit:function(t){var i=t.templateParams;return Vue.prototype.$utils.trim(window.decodeURIComponent(i&&i.default_title&&i.default_title||t.title||t.body||""))},canShare:function(){return!0}};extensionRegistry.registerExtension("activity","type",{type:"default",options:n}),extensionRegistry.registerExtension("activity","action",{id:"edit",labelKey:"UIActivity.label.Edit",isEnabled:function(t,i){return"true"===t.canEdit&&(!i.canEdit||i.canEdit(t))},click:function(t,i){var e=i.getBodyToEdit&&i.getBodyToEdit(t)||i.getBody(t);document.dispatchEvent(new CustomEvent("activity-composer-edit-activity",{detail:{activityId:t.id,composerAction:"update",ckEditorType:"editActivity"+t.id,activityBody:e,templateParams:t.templateParams}}))}}),extensionRegistry.registerExtension("activity","action",{id:"delete",labelKey:"UIActivity.label.Delete",confirmDialog:!0,confirmMessageKey:"UIActivity.msg.Are_You_Sure_To_Delete_This_Activity",confirmTitleKey:"UIActivity.label.Confirmation",confirmOkKey:"UIActivity.label.Confirm_Delete_Activity-Button",confirmCancelKey:"UIActivity.label.Cancel_Delete_Activity-Button",isEnabled:function(t,i){return!(i.canDelete&&!i.canDelete(t))&&"true"===t.canDelete},click:function(t,i){return document.dispatchEvent(new CustomEvent("displayTopBarLoading")),Vue.prototype.$activityService.deleteActivity(t.id,i.hideOnDelete).then((function(){document.dispatchEvent(new CustomEvent("activity-deleted",{detail:t.id}))})).finally((function(){return document.dispatchEvent(new CustomEvent("hideTopBarLoading"))}))}}),extensionRegistry.registerExtension("activity","action",{id:"copyLink",labelKey:"UIActivity.label.CopyLink",isEnabled:function(t){return t&&t.id},click:function(t){var i=""+window.location.origin+e+"?id="+t.id;$("#copyToClipboard").length||$("body").append('<input id="copyToClipboard" type="text" value="'+i+'" style="position:absolute;left: -9999px;">');var n=$("#copyToClipboard")[0];n.value=i,n.select(),n.setSelectionRange(0,99999),document.execCommand("copy")}}),extensionRegistry.registerExtension("activity","comment-action",{id:"delete",rank:20,labelKey:"UIActivity.label.Delete",confirmDialog:!0,confirmMessageKey:"UIActivity.msg.Are_You_Sure_To_Delete_This_Comment",confirmTitleKey:"UIActivity.label.Confirmation",confirmOkKey:"UIActivity.label.Confirm_Delete_Activity-Button",confirmCancelKey:"UIActivity.label.Cancel_Delete_Activity-Button",isEnabled:function(t,i){return"true"===i.canDelete},click:function(t,i){return document.dispatchEvent(new CustomEvent("displayTopBarLoading")),Vue.prototype.$activityService.deleteActivity(i.id).then((function(){document.dispatchEvent(new CustomEvent("activity-comment-deleted",{detail:i}))})).finally((function(){return document.dispatchEvent(new CustomEvent("hideTopBarLoading"))}))}}),extensionRegistry.registerExtension("activity","comment-action",{id:"edit",labelKey:"UIActivity.label.Edit",rank:10,isEnabled:function(t,i,e){if(e.canEdit){if(e.forceCanEditOverwrite)return e.canEdit(i);if(!e.canEdit(i))return!1}return"true"===i.canEdit},click:function(t,i,e){var n=e.getBodyToEdit&&e.getBodyToEdit(i)||e.getBody(i);document.dispatchEvent(new CustomEvent("activity-comment-edit",{detail:{activity:t,comment:i,activityBody:n}}))}}),extensionRegistry.registerComponent("ActivityFooter","activity-footer-action",{id:"like",vueComponent:Vue.options.components["activity-like-action"],rank:10}),extensionRegistry.registerComponent("ActivityFooter","activity-footer-action",{id:"comment",vueComponent:Vue.options.components["activity-comment-action"],rank:20}),extensionRegistry.registerComponent("ActivityFooter","activity-footer-action",{id:"share",isEnabled:function(t){return t.activity&&!t.activity.originalActivity},vueComponent:Vue.options.components["activity-share-action"],rank:100}),extensionRegistry.registerComponent("ActivityCommentFooter","activity-comment-footer-action",{id:"like",vueComponent:Vue.options.components["activity-comment-like-action"],rank:10}),extensionRegistry.registerComponent("ActivityCommentFooter","activity-comment-footer-action",{id:"reply",vueComponent:Vue.options.components["activity-comment-reply-action"],rank:20})}})}));