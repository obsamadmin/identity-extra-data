define((function(){return function(e){var t={};function n(a){if(t[a])return t[a].exports;var r=t[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(a,r,function(t){return e[t]}.bind(null,r));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=37)}({0:function(e,t,n){"use strict";function a(e,t,n,a,r,i,o,s){var c=typeof(e=e||{}).default;"object"!==c&&"function"!==c||(e=e.default);var u,l="function"==typeof e?e.options:e;if(t&&(l.render=t,l.staticRenderFns=n,l._compiled=!0),a&&(l.functional=!0),i&&(l._scopeId=i),o?(u=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(o)},l._ssrRegister=u):r&&(u=s?function(){r.call(this,this.$root.$options.shadowRoot)}:r),u)if(l.functional){l._injectStyles=u;var d=l.render;l.render=function(e,t){return u.call(t),d(e,t)}}else{var p=l.beforeCreate;l.beforeCreate=p?[].concat(p,u):[u]}return{exports:e,options:l}}n.d(t,"a",(function(){return a}))},37:function(e,t,n){"use strict";n.r(t),n.d(t,"init",(function(){return b}));var a={props:{admin:{type:Boolean,default:!1},maxUploadSize:{type:Number,default:function(){return 2}},navigations:{type:Array,default:function(){return[]}},selectedNavigationUri:{type:String,default:null},bannerUrl:{type:String,default:null}},data:function(){return{errorMessage:null}},computed:{maxUploadSizeInBytes:function(){return 1024*this.maxUploadSize*1024},height:function(){return this.hasNavigations?"208px":"240px"},hasNavigations:function(){return this.navigations&&this.navigations.length},isMobile:function(){return this.$vuetify.breakpoint.xs}},created:function(){var e=this;document.addEventListener("refreshSpaceNavigations",(function(){e.$spaceService.getSpaceNavigations(eXo.env.portal.spaceId).then((function(t){return t&&t.length&&(t.forEach((function(t){var n=e.navigations.find((function(e){return e.id===t.id}));n?t.uri=n.uri:t.uri&&t.uri.indexOf("/")>=0&&(t.uri=t.uri.split("/")[1])})),e.navigations=t),e.$nextTick()})).then((function(){return e.$root.$emit("application-cache")}))}))},mounted:function(){this.$root.$applicationLoaded()},methods:{refresh:function(){var e=this;this.bannerUrl=eXo.env.portal.context+"/"+eXo.env.portal.rest+"/v1/social/spaces/"+eXo.env.portal.spaceName+"/banner?updated="+Math.random(),this.$nextTick().then((function(){return e.$root.$emit("application-cache")}))},handleError:function(e){e&&(String(e).indexOf(this.$uploadService.bannerExcceedsLimitError)>=0?this.errorMessage=this.$t("spaceHeader.label.bannerExcceededAllowedSize",{0:this.maxUploadSize}):this.errorMessage=String(e),this.$refs.errorUploadDialog.open())}}},r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",{staticClass:"spaceMenuParent white",class:e._f("''")(e.hasNavigations&&"hasNavigations")},[n("v-hover",{scopedSlots:e._u([{key:"default",fn:function(t){var a=t.hover;return n("v-img",{staticClass:"spaceBannerImg d-flex",attrs:{"lazy-src":e.bannerUrl||"",src:e.bannerUrl||"",height:e.height,"min-height":e.height,"max-height":e.height,eager:""}},[n("v-flex",{attrs:{"fill-height":"",column:""}},[n("v-layout",[n("v-flex",{staticClass:"d-flex spaceHeaderTitle"},[n("div",{staticClass:"flex-grow-1"}),e._v(" "),n("div",{staticClass:"d-flex flex-grow-0 justify-end pe-4"},[n("exo-confirm-dialog",{ref:"errorUploadDialog",attrs:{message:e.errorMessage,title:e.$t("spaceHeader.title.errorUploadingImage"),"ok-label":e.$t("spaceHeader.label.ok")}}),e._v(" "),e.admin?n("space-header-banner-button",{attrs:{"max-upload-size":e.maxUploadSizeInBytes,hover:a},on:{refresh:e.refresh,error:e.handleError}}):e._e()],1)])],1)],1)],1)}}])}),e._v(" "),e.hasNavigations?n("v-tabs",{staticClass:"mx-auto",attrs:{value:e.selectedNavigationUri,"active-class":"SelectedTab","show-arrows":"","center-active":"","slider-size":"4"},on:{change:function(t){return e.$root.$emit("application-cache")}}},e._l(e.navigations,(function(t){return n("v-tab",{key:t.id,staticClass:"spaceNavigationTab",attrs:{value:t.id,href:t.uri}},[e._v("\n      "+e._s(t.label)+"\n    ")])})),1):e._e()],1)};r._withStripped=!0;var i=n(0),o=Object(i.a)(a,r,[],!1,null,null,null);o.options.__file="src/main/webapp/vue-apps/space-header/components/SpaceHeader.vue";var s=o.exports,c={props:{maxUploadSize:{type:Number,default:function(){return 2}},hover:{type:Boolean,default:function(){return!1}}},data:function(){return{sendingImage:!1}},watch:{sendingImage:function(){this.sendingImage?document.dispatchEvent(new CustomEvent("displayTopBarLoading")):document.dispatchEvent(new CustomEvent("hideTopBarLoading"))}},methods:{uploadBanner:function(e){var t=this;if(e&&e.size)return e.type&&0!==e.type.indexOf("image/")?void this.$emit("error",this.$t("profile.warning.message.fileType")):e.size>this.maxUploadSize?void this.$emit("error",this.$uploadService.bannerExcceedsLimitError):(this.sendingImage=!0,this.$uploadService.upload(e).then((function(e){return t.$spaceService.updateSpace({id:eXo.env.portal.spaceId,bannerId:e})})).then((function(){return t.$emit("refresh")})).catch((function(e){return t.$emit("error",e)})).finally((function(){t.sendingImage=!1})))}}},u=function(){var e=this.$createElement,t=this._self._c||e;return this.sendingImage?this._e():t("v-file-input",{directives:[{name:"show",rawName:"v-show",value:this.hover,expression:"hover"}],ref:"bannerInput",staticClass:"changeBannerButton me-4",attrs:{"prepend-icon":"fa-file-image",accept:"image/*",clearable:""},on:{change:this.uploadBanner}})};u._withStripped=!0;var l=Object(i.a)(c,u,[],!1,null,null,null);l.options.__file="src/main/webapp/vue-apps/space-header/components/SpaceHeaderBannerButton.vue";var d={"space-header":s,"space-header-banner-button":l.exports};for(var p in d)Vue.component(p,d[p]);if(extensionRegistry){var f=extensionRegistry.loadComponents("SpaceHeader");f&&f.length>0&&f.forEach((function(e){Vue.component(e.componentName,e.componentOptions)}))}var h="SpaceHeader",v=h+"_"+eXo.env.portal.spaceId,g="undefined"!=typeof eXo?eXo.env.portal.language:"en",m=eXo.env.portal.context+"/"+eXo.env.portal.rest+"/i18n/bundle/locale.portlet.Portlets-"+g+".json";function b(e,t,n,a){document.dispatchEvent(new CustomEvent("displayTopBarLoading")),exoi18n.loadLanguageAsync(g,m).then((function(r){var i=document.createElement("div");i.id=h,Vue.createApp({data:{navigations:e&&e.navigations,selectedNavigationUri:e&&e.selectedNavigationUri,bannerUrl:t},mounted:function(){document.dispatchEvent(new CustomEvent("hideTopBarLoading"))},template:"<space-header v-cacheable=\"{cacheId: '"+v+'\'}" id="'+h+'" :navigations="navigations" :selected-navigation-uri="selectedNavigationUri" :banner-url="bannerUrl" :max-upload-size="'+n+'" :admin="'+a+'" />',vuetify:Vue.prototype.vuetifyOptions,i18n:r},i,"Space Header")}))}}})}));