define((function(){return function(t){var e={};function s(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,s),r.l=!0,r.exports}return s.m=t,s.c=e,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)s.d(n,r,function(e){return t[e]}.bind(null,r));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s=35)}({0:function(t,e,s){"use strict";function n(t,e,s,n,r,i,o,a){var l=typeof(t=t||{}).default;"object"!==l&&"function"!==l||(t=t.default);var c,d="function"==typeof t?t.options:t;if(e&&(d.render=e,d.staticRenderFns=s,d._compiled=!0),n&&(d.functional=!0),i&&(d._scopeId=i),o?(c=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),r&&r.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(o)},d._ssrRegister=c):r&&(c=a?function(){r.call(this,this.$root.$options.shadowRoot)}:r),c)if(d.functional){d._injectStyles=c;var u=d.render;d.render=function(t,e){return c.call(e),u(t,e)}}else{var p=d.beforeCreate;d.beforeCreate=p?[].concat(p,c):[c]}return{exports:t,options:d}}s.d(e,"a",(function(){return n}))},35:function(t,e,s){"use strict";s.r(e),s.d(e,"init",(function(){return g}));var n={data:function(){return{id:"Security"+parseInt(1e4*Math.random()).toString().toString(),displayed:!0,allowedToChangePassword:!1,displayDetails:!1}},watch:{displayed:function(){var t=this;this.$nextTick().then((function(){return t.$root.$emit("application-cache")}))}},created:function(){var t=this;document.addEventListener("hideSettingsApps",(function(e){e&&e.detail&&t.id!==e.detail&&(t.displayed=!1)})),this.$userService.isSynchronizedUserAllowedToChangePassword().then((function(e){t.allowedToChangePassword="true"===e.isSynchronizedUserAllowedToChangePassword})),document.addEventListener("showSettingsApps",(function(){return t.displayed=!0}))},mounted:function(){var t=this;this.$nextTick().then((function(){return t.$root.$applicationLoaded()}))},methods:{openSecurityDetail:function(){document.dispatchEvent(new CustomEvent("hideSettingsApps",{detail:this.id})),this.displayDetails=!0},closeSecurityDetail:function(){document.dispatchEvent(new CustomEvent("showSettingsApps")),this.displayDetails=!1}}},r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-app",[t.displayed?[t.displayDetails?s("user-setting-security-window",{on:{back:t.closeSecurityDetail}}):s("v-card",{staticClass:"ma-4 border-radius",attrs:{flat:""}},[s("v-list",[s("v-list-item",[s("v-list-item-content",[s("v-list-item-title",{staticClass:"title text-color"},[t._v("\n              "+t._s(t.$t("UserSettings.security"))+"\n            ")])],1),t._v(" "),s("v-list-item-action",[s("span",{directives:[{name:"exo-tooltip",rawName:"v-exo-tooltip.bottom",value:t.allowedToChangePassword?t.$t("UserSettings.button.tooltip.enabled"):t.$t("UserSettings.button.tooltip.disabled"),expression:"allowedToChangePassword ? $t('UserSettings.button.tooltip.enabled') : $t('UserSettings.button.tooltip.disabled')",modifiers:{bottom:!0}}]},[s("v-btn",{attrs:{disabled:!t.allowedToChangePassword,small:"",icon:""},on:{click:t.openSecurityDetail}},[s("v-icon",{staticClass:"text-sub-title",attrs:{size:"24"}},[t._v("\n                  "+t._s(t.$vuetify.rtl?"fa-caret-left":"fa-caret-right")+"\n                ")])],1)],1)])],1)],1)],1)]:t._e()],2)};r._withStripped=!0;var i=s(0),o=Object(i.a)(n,r,[],!1,null,null,null);o.options.__file="src/main/webapp/vue-apps/user-setting-security/components/UserSettingSecurity.vue";var a=o.exports,l={data:function(){return{username:eXo.env.portal.userName,currentPassword:null,newPassword:null,confirmNewPassword:null,success:null,error:null,saving:!1,displayed:!0}},watch:{confirmNewPassword:function(){this.resetCustomValidity()}},created:function(){var t=this;document.addEventListener("hideSettingsApps",(function(e){t.id!==e&&(t.displayed=!1)})),document.addEventListener("showSettingsApps",(function(){t.displayed=!0}))},methods:{resetCustomValidity:function(){this.$refs.confirmNewPassword.setCustomValidity("")},savePassword:function(){var t=this;this.resetCustomValidity(),this.$refs.form.$el.reportValidity()&&(this.confirmNewPassword===this.newPassword||(this.$refs.confirmNewPassword.setCustomValidity(this.$t("UserSettings.label.newPasswordsDoesNotMatch")),this.$refs.form.$el.reportValidity()))&&this.$refs.form.validate()&&this.$refs.form.$el.reportValidity()&&(this.success=null,this.error=null,this.saving=!0,this.$userService.changePassword(eXo.env.portal.userName,this.currentPassword,this.newPassword).then((function(){t.success=t.$t("UserSettings.label.changePasswordSuccess"),t.$refs.form.$el.reset()})).catch((function(e){var s=String(e);s.indexOf("WRONG_USER_PASSWORD")>-1?t.error=t.$t("UserSettings.label.wrongCurrentPassword"):s.indexOf("USER_NOT_FOUND")>-1?t.error=t.$t("UserSettings.label.accountNotExist"):s.indexOf("PASSWORD_UNKNOWN_ERROR_CODE")>-1?t.error=t.$t("UserSettings.label.changePasswordFail"):t.error=s})).finally((function(){t.saving=!1})))}}},c=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-card",{staticClass:"ma-4",attrs:{flat:""}},[s("v-toolbar",{staticClass:"border-box-sizing",attrs:{flat:""}},[s("v-btn",{staticClass:"mx-1",attrs:{icon:"",height:"36",width:"36"},on:{click:function(e){return t.$emit("back")}}},[s("v-icon",{attrs:{size:"20"}},[t._v("\n        "+t._s(t.$vuetify.rtl?"mdi-arrow-right":"mdi-arrow-left")+"\n      ")])],1),t._v(" "),s("v-toolbar-title",{staticClass:"ps-0"},[t._v("\n      "+t._s(t.$t("UserSettings.security"))+"\n    ")]),t._v(" "),s("v-spacer")],1),t._v(" "),s("v-form",{ref:"form",staticClass:"mt-6 mx-10 px-5"},[s("input",{staticClass:"hidden",attrs:{id:"username",name:"username",autocomplete:"username"}}),t._v(" "),s("v-card",{attrs:{flat:""}},[s("v-card-text",{staticClass:"d-flex flex-grow-1 text-no-wrap text-left font-weight-bold pt-0 pb-2"},[t._v("\n        "+t._s(t.$t("UserSettings.label.currentPassword"))+"*\n      ")]),t._v(" "),s("v-card-text",{staticClass:"d-flex py-0"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.currentPassword,expression:"currentPassword"}],ref:"currentPassword",staticClass:"ignore-vuetify-classes flex-grow-1",attrs:{type:"password",autocomplete:"current-password",minlength:"8",maxlength:"2000",required:""},domProps:{value:t.currentPassword},on:{input:function(e){e.target.composing||(t.currentPassword=e.target.value)}}})]),t._v(" "),s("v-card-text",{staticClass:"d-flex flex-grow-1 text-no-wrap text-left font-weight-bold pb-2"},[t._v("\n        "+t._s(t.$t("UserSettings.label.newPassword"))+"*\n      ")]),t._v(" "),s("v-card-text",{staticClass:"d-flex py-0"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.newPassword,expression:"newPassword"}],ref:"newPassword",staticClass:"ignore-vuetify-classes flex-grow-1",attrs:{type:"password",autocomplete:"new-password",minlength:"8",maxlength:"2000",required:""},domProps:{value:t.newPassword},on:{input:function(e){e.target.composing||(t.newPassword=e.target.value)}}})]),t._v(" "),s("v-card-text",{staticClass:"d-flex flex-grow-1 text-no-wrap text-left font-weight-bold pb-2"},[t._v("\n        "+t._s(t.$t("UserSettings.label.confirmNewPassword"))+"*\n      ")]),t._v(" "),s("v-card-text",{staticClass:"d-flex py-0"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.confirmNewPassword,expression:"confirmNewPassword"}],ref:"confirmNewPassword",staticClass:"ignore-vuetify-classes flex-grow-1",attrs:{type:"password",autocomplete:"new-password",minlength:"8",maxlength:"2000",required:""},domProps:{value:t.confirmNewPassword},on:{input:function(e){e.target.composing||(t.confirmNewPassword=e.target.value)}}})]),t._v(" "),t.error?s("v-card-text",[s("v-alert",{attrs:{type:"error"}},[t._v("\n          "+t._s(t.error)+"\n        ")])],1):t._e(),t._v(" "),t.success?s("v-card-text",[s("v-alert",{attrs:{type:"success"}},[t._v("\n          "+t._s(t.success)+"\n        ")])],1):t._e(),t._v(" "),s("v-card-actions",{staticClass:"my-6"},[s("v-spacer"),t._v(" "),s("v-btn",{staticClass:"btn me-2",attrs:{disabled:t.saving},on:{click:function(e){return t.$emit("back")}}},[t._v("\n          "+t._s(t.$t("UserSettings.button.cancel"))+"\n        ")]),t._v(" "),s("v-btn",{staticClass:"btn btn-primary",attrs:{loading:t.saving,disabled:t.saving},on:{click:t.savePassword}},[t._v("\n          "+t._s(t.$t("UserSettings.button.confirm"))+"\n        ")])],1)],1)],1)],1)};c._withStripped=!0;var d=Object(i.a)(l,c,[],!1,null,null,null);d.options.__file="src/main/webapp/vue-apps/user-setting-security/components/UserSettingSecurityWindow.vue";var u={"user-setting-security":a,"user-setting-security-window":d.exports};for(var p in u)Vue.component(p,u[p]);if(extensionRegistry){var f=extensionRegistry.loadComponents("UserSettingSecurity");f&&f.length>0&&f.forEach((function(t){Vue.component(t.componentName,t.componentOptions)}))}var v=eXo&&eXo.env.portal.language||"en",m=eXo.env.portal.context+"/"+eXo.env.portal.rest+"/i18n/bundle/locale.portlet.social.UserSettings-"+v+".json",w="UserSettingSecurity";function g(){exoi18n.loadLanguageAsync(v,m).then((function(t){var e=document.createElement("div");e.id=w,Vue.createApp({mounted:function(){document.dispatchEvent(new CustomEvent("hideTopBarLoading"))},template:'<user-setting-security id="'+w+'" v-cacheable />',i18n:t,vuetify:Vue.prototype.vuetifyOptions},e,"User Settings Security")}))}document.dispatchEvent(new CustomEvent("displayTopBarLoading"))}})}));