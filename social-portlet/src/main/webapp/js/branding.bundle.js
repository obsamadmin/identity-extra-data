define((function(){return function(t){var e={};function n(o){if(e[o])return e[o].exports;var a=e[o]={i:o,l:!1,exports:{}};return t[o].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)n.d(o,a,function(e){return t[e]}.bind(null,a));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=40)}({0:function(t,e,n){"use strict";function o(t,e,n,o,a,i,r,s){var l=typeof(t=t||{}).default;"object"!==l&&"function"!==l||(t=t.default);var c,d="function"==typeof t?t.options:t;if(e&&(d.render=e,d.staticRenderFns=n,d._compiled=!0),o&&(d.functional=!0),i&&(d._scopeId=i),r?(c=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),a&&a.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(r)},d._ssrRegister=c):a&&(c=s?function(){a.call(this,this.$root.$options.shadowRoot)}:a),c)if(d.functional){d._injectStyles=c;var u=d.render;d.render=function(t,e){return c.call(e),u(t,e)}}else{var p=d.beforeCreate;d.beforeCreate=p?[].concat(p,c):[c]}return{exports:t,options:d}}n.d(e,"a",(function(){return o}))},3:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var o={ENV:eXo.env.portal||"",PORTAL:eXo.env.portal.context||"",PORTAL_NAME:eXo.env.portal.portalName||"",PORTAL_REST:eXo.env.portal.rest,COMPANY_BRANDING_API:eXo.env.portal.context+"/"+eXo.env.portal.rest+"/v1/platform/branding/",HOMEICON:"/eXoSkin/skin/images/themes/default/platform/skin/ToolbarContainer/HomeIcon.png",PERIOD:1e4}},4:function(module,__webpack_exports__,__webpack_require__){"use strict";var _companyBrandingConstants__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(3),_companyBrandingServices__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(5);__webpack_exports__.a={data:function(){return{showLogo:!0,branding:{id:null,companyName:null,topBarTheme:null,logo:{uploadId:null,data:[],size:0},themeColors:{primaryColor:"#ffffff",primaryBackground:"#ffffff",secondaryColor:"#ffffff",secondaryBackground:"#ffffff"}},color:null,uploadInProgress:!1,uploadProgress:0,maxFileSize:2097152}},computed:{logoPreview:function(){return this.branding&&this.branding.logo&&this.branding.logo.data?Array.isArray(this.branding.logo.data)?this.convertImageDataAsSrc(this.branding.logo.data):this.branding.logo.data:_companyBrandingConstants__WEBPACK_IMPORTED_MODULE_0__.a.HOMEICON},removeLogoButtonDisplayed:function(){return this.branding.logo.uploadId||this.branding.logo.id}},created:function(){var t=this;this.initBrandingInformation().finally((function(){return t.$root.$applicationLoaded()}))},mounted:function(){$("#PlatformAdminToolbarContainer").clone().attr("id","PlatformAdminToolbarContainer-preview").appendTo($("#StylePreview"));var t=$("#StylePreview #PlatformAdminToolbarContainer-preview");["hover","click","blur"].forEach((function(e){t.bind(e,(function(t){t.stopPropagation(),t.preventDefault()}))})),["drag","dragstart","dragend","dragover","dragenter","dragleave","drop"].forEach(function(t){this.$refs.dropFileBox.addEventListener(t,function(t){t.preventDefault(),t.stopPropagation()}.bind(this),!1)}.bind(this)),this.$refs.dropFileBox.addEventListener("drop",function(t){this.onFileChange(t)}.bind(this))},methods:{convertImageDataAsSrc:function(t){var e="";return new Uint8Array(t).forEach((function(t){return e+=String.fromCharCode(t)})),"data:image/png;base64,"+btoa(e)},onFileChange:function(t){var e=this,n=t.target.files||t.dataTransfer.files,o=this;if(n.length){if(!this.isLogoFileExtensionValid(n[0]))return this.$el.querySelector("#mustpng").style.display="block",void setTimeout((function(){o.cleanMessage()}),5e3);if(!this.isLogoFileSizeValid(n[0]))return this.$el.querySelector("#toobigfile").style.display="block",void setTimeout((function(){o.cleanMessage()}),5e3);var a=new FileReader;a.onload=function(t){e.branding.logo.defaultData||(e.branding.logo.defaultData=e.branding.logo.data),e.branding.logo.data=t.target.result},a.readAsDataURL(n[0]),this.branding.logo.name=n[0].name,this.branding.logo.size=n[0].size,this.uploadFile(n[0])}},isLogoFileExtensionValid:function(t){var e=t.name;return"png"===(e.substring(e.lastIndexOf(".")+1,e.length)||e).toLowerCase()},isLogoFileSizeValid:function(t){return t.size<=this.maxFileSize},changePreviewStyle:function(){var t=document.querySelector("#StylePreview #UIToolbarContainer");t&&t.setAttribute("class","UIContainer UIToolbarContainer UIToolbarContainer"+this.branding.topBarTheme)},save:function(){if(this.cleanMessage(),this.branding.logo.uploadId&&!this.isLogoFileExtensionValid(this.branding.logo))return this.$el.querySelector("#mustpng").style.display="block",this.branding.logo.data=this.branding.logo.defaultData,void(this.branding.logo.uploadId=null);this.changePreviewStyle(),_companyBrandingServices__WEBPACK_IMPORTED_MODULE_1__.b(this.branding).then((function(){return document.location.reload(!0)}))},cancel:function(){document.location.href=_companyBrandingConstants__WEBPACK_IMPORTED_MODULE_0__.a.PORTAL},initBrandingInformation:function(){var t=this;return _companyBrandingServices__WEBPACK_IMPORTED_MODULE_1__.a().then((function(e){t.branding=e}))},cleanMessage:function(){this.$el.querySelector("#savenotok").style.display="none",this.$el.querySelector("#mustpng").style.display="none",this.$el.querySelector("#toobigfile").style.display="none"},uploadFile:function uploadFile(data){var _this4=this,formData=new FormData;formData.append("file",data);var MAX_RANDOM_NUMBER=1e5,uploadId=Math.round(Math.random()*MAX_RANDOM_NUMBER);this.branding.logo.uploadId=uploadId,this.branding.logo.defaultData||(this.branding.logo.defaultData=this.branding.logo.data),this.branding.logo.data=data;var maxProgress=100;this.uploadInProgress=!0;var self=this;fetch(_companyBrandingConstants__WEBPACK_IMPORTED_MODULE_0__.a.PORTAL+"/upload?uploadId="+uploadId+"&action=upload",{method:"POST",credentials:"include",body:formData}).then((function(){var progressUrl=_companyBrandingConstants__WEBPACK_IMPORTED_MODULE_0__.a.PORTAL+"/upload?action=progress&uploadId="+uploadId;fetch(progressUrl,{method:"GET",credentials:"include"}).then((function(t){return t.text()})).then((function(responseText){var responseObject=void 0;try{eval("responseObject = "+responseText),responseObject.upload[uploadId]&&responseObject.upload[uploadId].percent&&responseObject.upload[uploadId].percent===maxProgress.toString()?self.uploadProgress=maxProgress:(self.$el.querySelector("#savenotok").style.display="block",setTimeout((function(){self.cleanMessage()}),5e3),self.uploadInProgress=!1)}catch(t){return}}))})),this.$nextTick((function(){_this4.showLogo=!0}))},removeLogo:function(){this.branding.logo.uploadId=null,this.branding.logo.data=this.branding.logo.defaultData}}}},40:function(t,e,n){"use strict";n.r(e),n.d(e,"init",(function(){return _}));var o={props:{label:{type:String,default:function(){return null}},value:{type:String,default:function(){return null}}},data:function(){return{modal:!1,originalValue:null,swatches:[["#FF0000","#AA0000","#550000"],["#FFFF00","#AAAA00","#555500"],["#00FF00","#00AA00","#005500"],["#00FFFF","#00AAAA","#005555"],["#0000FF","#0000AA","#000055"]]}},watch:{modal:function(){this.modal&&(this.originalValue=this.value)}},methods:{cancel:function(){this.value=this.originalValue,this.modal=!1},save:function(){this.$emit("input",this.value),this.modal=!1}}},a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-dialog",{ref:"dialog",attrs:{color:"white",width:"290px"},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on;return[n("div",{staticClass:"themeColor"},[n("div",t._g({staticClass:"colorSelected",style:{backgroundColor:t.value}},o)),t._v(" "),n("div",{staticClass:"themeDetails"},[n("p",{staticClass:"labelColor"},[t._v(t._s(t.label)+" "+t._s(t.$t("branding.color.label")))]),t._v(" "),n("label",t._g({staticClass:"colorCode",attrs:{title:t.$t("branding.message.edit.label"),rel:"tooltip","data-placement":"bottom"}},o),[t._v(t._s(t.value))])])])]}}]),model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[t._v(" "),n("v-color-picker",{attrs:{swatches:t.swatches,mode:"hexa","show-swatches":""},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}}),t._v(" "),n("v-row",{staticClass:"mx-0 white"},[n("v-col",{staticClass:"center"},[n("v-btn",{attrs:{text:"",color:"primary"},on:{click:t.cancel}},[t._v("\n        Cancel\n      ")])],1),t._v(" "),n("v-col",{staticClass:"center"},[n("v-btn",{attrs:{text:"",color:"primary"},on:{click:t.save}},[t._v("\n        OK\n      ")])],1)],1)],1)};a._withStripped=!0;var i=n(0),r=Object(i.a)(o,a,[],!1,null,null,null);r.options.__file="src/main/webapp/vue-apps/company-branding-app/components/modal/ExoColorPicker.vue";var s=r.exports,l=n(4),c=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",{staticClass:"uiBrandingPortlet",attrs:{color:"transaprent",flat:""}},[n("main",[n("div",{staticClass:"alert",attrs:{id:"mustpng"}},[n("i",{staticClass:"uiIconWarning"}),t._v(t._s(t.$t("mustpng.label"))+"\n    ")]),t._v(" "),n("div",{staticClass:"alert",attrs:{id:"toobigfile"}},[n("i",{staticClass:"uiIconWarning"}),t._v(t._s(t.$t("toobigfile.label"))+"\n    ")]),t._v(" "),n("div",{staticClass:"alert",attrs:{id:"savenotok"}},[n("i",{staticClass:"uiIconWarning"}),t._v(t._s(t.$t("info.savenotok.label"))+"\n    ")]),t._v(" "),n("div",{staticClass:"logoForm boxContent"},[n("h4",{staticClass:"labelStyle"},[t._v(t._s(t.$t("companyName.label")))]),t._v(" "),n("div",[n("div",{staticClass:"info"},[n("p",[t._v(t._s(t.$t("companyName.input.hint")))])]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.branding.companyName,expression:"branding.companyName"}],staticClass:"ignore-vuetify-classes inputCompany",attrs:{id:"companyNameInput",title:t.$t("branding.message.edit.label"),placeholder:t.$t("companyName.placeholder"),type:"text",name:"formOp",rel:"tooltip","data-placement":"bottom",value:""},domProps:{value:t.branding.companyName},on:{input:function(e){e.target.composing||t.$set(t.branding,"companyName",e.target.value)}}})]),t._v(" "),n("hr",{staticClass:"logo"}),t._v(" "),n("h4",{staticClass:"styleSelectLogo"},[t._v("\n        "+t._s(t.$t("selectlogo.label"))+"\n      ")]),t._v(" "),n("div",{staticClass:"info labelLocation"},[n("p",[t._v(t._s(t.$t("noteselectlogo.label")))])]),t._v(" "),n("div",{staticClass:"clearfix"},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.showLogo,expression:"showLogo"}],staticClass:"pull-left"},[n("div",{staticClass:"previewLogo",attrs:{id:"previewLogo"}},[n("div",{staticClass:"logoPreviewImage"},[n("img",{staticClass:"previewImg",attrs:{id:"previewLogoImg",src:t.logoPreview}})]),t._v(" "),n("div",{staticClass:"btnActionContainer"},[n("div",{staticClass:"btnAction"},[t.removeLogoButtonDisplayed?n("i",{staticClass:"fas fa-trash-alt iconDelete",attrs:{title:t.$t("branding.message.restore.logo"),rel:"tooltip","data-placement":"bottom"},on:{click:t.removeLogo}}):n("i",{staticClass:"uiIconEdit iconEdit",attrs:{title:t.$t("branding.message.change.logo"),rel:"tooltip","data-placement":"bottom"},on:{click:function(e){t.showLogo=!1}}})])])])]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:!t.showLogo,expression:"!showLogo"}],staticClass:"pull-left"},[n("div",{staticClass:"fileDrop"},[n("div",{ref:"dropFileBox",staticClass:"dropZone"},[n("div",[n("div",{staticClass:"attachment"},[n("i",{staticClass:"uiIconTemplate uiIcon32x32LightGray colorIcon"}),t._v(" "),n("label",[t._v(t._s(t.$t("branding.drop.attachment")))])]),t._v(" "),n("div",{staticClass:"option"},[n("hr",{staticClass:"optionStyle"}),t._v(" "),n("label",{staticClass:"labelValue"},[t._v(t._s(t.$t("branding.or.attachment")))]),t._v(" "),n("hr",{staticClass:"closeOption"})]),t._v(" "),n("div",{staticClass:"upload"},[n("label",{staticClass:"iconUpload",attrs:{for:"attachLogo"}},[n("i",{staticClass:"fas fa-download uiIcon32x32LightGray"})]),t._v(" "),n("label",{staticClass:"dropMsg",attrs:{for:"attachLogo"}},[t._v("\n                    "+t._s(t.$t("branding.select.attachment"))+"\n                  ")])])]),t._v(" "),n("input",{staticClass:"attachFile",attrs:{id:"attachLogo",type:"file",name:"file"},on:{change:t.onFileChange}})])])])]),t._v(" "),t.showLogo?t._e():n("div",{staticClass:"button_back"},[n("a",{staticClass:"linkBack",attrs:{href:"javascript:void(0)"},on:{click:function(e){t.showLogo=!0}}},[n("i",{staticClass:"fas fa-undo-alt"}),t._v(t._s(t.$t("back.label")))])]),t._v(" "),n("hr",{staticClass:"theme"}),t._v(" "),n("div",{staticClass:"boxContent themeLabel"},[n("h4",[t._v("\n          "+t._s(t.$t("themeColors.label"))+"\n        ")]),t._v(" "),n("v-row",{staticClass:"colorsBlock"},[n("v-col",[n("exo-company-branding-color-picker",{attrs:{label:t.$t("themeColors.primaryColor.label")},model:{value:t.branding.themeColors.primaryColor,callback:function(e){t.$set(t.branding.themeColors,"primaryColor",e)},expression:"branding.themeColors.primaryColor"}})],1),t._v(" "),n("v-col",[n("exo-company-branding-color-picker",{attrs:{label:t.$t("themeColors.secondaryColor.label")},model:{value:t.branding.themeColors.secondaryColor,callback:function(e){t.$set(t.branding.themeColors,"secondaryColor",e)},expression:"branding.themeColors.secondaryColor"}})],1),t._v(" "),n("v-col",[n("exo-company-branding-color-picker",{attrs:{label:t.$t("themeColors.tertiaryColor.label")},model:{value:t.branding.themeColors.tertiaryColor,callback:function(e){t.$set(t.branding.themeColors,"tertiaryColor",e)},expression:"branding.themeColors.tertiaryColor"}})],1)],1)],1),t._v(" "),n("div",{staticClass:"uiAction boxContent"},[n("button",{staticClass:"btn ignore-vuetify-classes",attrs:{id:"cancel",type:"button"},on:{click:t.cancel}},[t._v("\n          "+t._s(t.$t("cancel.label"))+"\n        ")]),t._v(" "),n("button",{staticClass:"btn btn-primary ignore-vuetify-classes",attrs:{id:"save",disabled:!t.branding.companyName||!t.branding.companyName.trim(),type:"button"},on:{click:t.save}},[t._v("\n          "+t._s(t.$t("save.label"))+"\n        ")])])])])])};c._withStripped=!0;var d=Object(i.a)(l.a,c,[],!1,null,null,null);d.options.__file="src/main/webapp/vue-apps/company-branding-app/components/ExoCompanyBranding.vue";var u={"exo-company-branding":d.exports,"exo-company-branding-color-picker":s};for(var p in u)Vue.component(p,u[p]);var g=n(3);var f="undefined"!=typeof eXo?eXo.env.portal.language:"en",v=g.a.PORTAL+"/"+g.a.PORTAL_REST+"/i18n/bundle/locale.portlet.Branding-"+f+".json";if(Vue.directive("exo-tooltip",(function(t,e){var n=$(t),o=Object.keys(e.modifiers)[0],a=Object.keys(e.modifiers)[1];n.attr("data-original-title",e.value),o&&n.attr("data-placement",o),a&&n.attr("data-container",a),n.tooltip()})),extensionRegistry){var m=extensionRegistry.loadComponents("Branding");m&&m.length>0&&m.forEach((function(t){Vue.component(t.componentName,t.componentOptions)}))}function _(){exoi18n.loadLanguageAsync(f,v).then((function(t){Vue.createApp({template:'<exo-company-branding id="branding"></exo-company-branding>',i18n:t,vuetify:Vue.prototype.vuetifyOptions},"#branding","Branding Administration")}))}},5:function(t,e,n){"use strict";function o(t){return fetch("/"+eXo.env.portal.rest+"/v1/platform/branding",{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(t){if(!t||!t.ok)return function(t,e){if(!t||!t.ok){var n=t&&t.headers&&t.headers.get("content-type");if(n&&-1!==n.indexOf("application/json"))return t.json().then((function(t){var n=function(t,e){if(!(t&&t.code&&t.suffix&&t.message))return e;return t.message}(t,e);throw new Error(n)}))}throw new Error(e)}(t,"Error saving Company Name")}))}function a(){return fetch("/"+eXo.env.portal.rest+"/v1/platform/branding",{method:"GET",credentials:"include"}).then((function(t){return t.json()}))}n.d(e,"b",(function(){return o})),n.d(e,"a",(function(){return a}))}})}));