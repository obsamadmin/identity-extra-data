define((function(){return function(t){var e={};function s(a){if(e[a])return e[a].exports;var i=e[a]={i:a,l:!1,exports:{}};return t[a].call(i.exports,i,i.exports,s),i.l=!0,i.exports}return s.m=t,s.c=e,s.d=function(t,e,a){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)s.d(a,i,function(e){return t[e]}.bind(null,i));return a},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s=12)}({0:function(t,e,s){"use strict";function a(t,e,s,a,i,n,o,r){var c=typeof(t=t||{}).default;"object"!==c&&"function"!==c||(t=t.default);var l,p="function"==typeof t?t.options:t;if(e&&(p.render=e,p.staticRenderFns=s,p._compiled=!0),a&&(p.functional=!0),n&&(p._scopeId=n),o?(l=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),i&&i.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(o)},p._ssrRegister=l):i&&(l=r?function(){i.call(this,this.$root.$options.shadowRoot)}:i),l)if(p.functional){p._injectStyles=l;var d=p.render;p.render=function(t,e){return l.call(e),d(t,e)}}else{var u=p.beforeCreate;p.beforeCreate=u?[].concat(u,l):[l]}return{exports:t,options:p}}s.d(e,"a",(function(){return a}))},1:function(t,e,s){"use strict";function a(){return fetch(Vue.prototype.$spacesConstants.SOCIAL_SPACE_API+"?sort=date&order=desc&limit="+Vue.prototype.$spacesConstants.SPACES_PER_PAGE+"&returnSize=true&expand=membersCount",{credentials:"include"}).then((function(t){return t.json()}))}function i(t){return fetch(Vue.prototype.$spacesConstants.SOCIAL_SPACE_API+"?q="+t+"&sort=date&order=desc&limit="+Vue.prototype.$spacesConstants.SPACES_PER_PAGE+"&returnSize=true&expand=membersCount",{credentials:"include"}).then((function(t){return t.json()}))}function n(t){return fetch(Vue.prototype.$spacesConstants.SOCIAL_SPACE_API+"?offset="+t+"&sort=date&order=desc&limit="+Vue.prototype.$spacesConstants.SPACES_PER_PAGE+"&returnSize=true&expand=membersCount",{credentials:"include"}).then((function(t){return t.json()}))}function o(t){return fetch("/rest/v1/social/spaces/"+t,{credentials:"include",method:"delete"})}function r(t,e){if(t&&e){var s=t.toLowerCase().split(" ").join("_"),a=e.toLowerCase().split("/"),i=a[a.length-1];return""+Vue.prototype.$spacesConstants.PORTAL+Vue.prototype.$spacesConstants.PROFILE_SPACE_LINK+i+"/"+s+"/settings"}return null}function c(t){return fetch(Vue.prototype.$spacesConstants.USER_API+"/"+t,{credentials:"include"}).then((function(t){return t.json()}))}function l(t){return fetch(Vue.prototype.$spacesConstants.GROUP_API+"?q="+t,{credentials:"include"}).then((function(t){return t.json()}))}function p(t){return fetch(Vue.prototype.$spacesConstants.SPACES_ADMINISTRATION_API+"/permissions/"+t,{headers:{"Content-Type":"application/json"},credentials:"include",method:"GET"}).then((function(t){return 200===t.status?t.json():t.text()}))}function d(){return fetch(Vue.prototype.$spacesConstants.SPACES_ADMINISTRATION_API+"/permissions/canCreatespaces/"+eXo.env.portal.userName,{headers:{"Content-Type":"application/json"},credentials:"include",method:"GET"}).then((function(t){if(t&&t.ok)return t.json();throw new Error("Error to check can add spaces")}))}function u(t,e){return fetch(Vue.prototype.$spacesConstants.SPACES_ADMINISTRATION_API+"/permissions/"+t,{headers:{"Content-Type":"application/json"},credentials:"include",method:"PUT",body:JSON.stringify(e)})}function m(t,e){return fetch(Vue.prototype.$spacesConstants.SPACE_GROUP_BINDING_API+"/saveGroupsSpaceBindings/"+t,{headers:{"Content-Type":"application/json"},credentials:"include",method:"POST",body:JSON.stringify(e)})}function v(t){return fetch(Vue.prototype.$spacesConstants.SPACE_GROUP_BINDING_API+"/"+t,{credentials:"include"}).then((function(t){return t.json()}))}function h(t){return fetch(Vue.prototype.$spacesConstants.SPACE_GROUP_BINDING_API+"/removeGroupSpaceBinding/"+t,{credentials:"include",method:"delete"})}function g(){return fetch(Vue.prototype.$spacesConstants.SPACE_GROUP_BINDING_API+"/getGroupsTree",{credentials:"include"}).then((function(t){return t.json()}))}function f(){return fetch(Vue.prototype.$spacesConstants.SPACE_GROUP_BINDING_API+"/getBindingReportOperations",{credentials:"include"}).then((function(t){return t.json()}))}function _(t,e,s,a){window.open(Vue.prototype.$spacesConstants.SPACE_GROUP_BINDING_API+"/getExport?spaceId="+t+"&action="+e+"&group="+s+"&groupBindingId="+a,"_blank")}function b(t){return fetch(eXo.env.portal.context+"/"+eXo.env.portal.rest+"/management/featureservice/changeFeatureActivation?featureName=externalUsers&isActive="+t,{method:"POST",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json"}})}function C(){return fetch(eXo.env.portal.context+"/"+eXo.env.portal.rest+"/management/featureservice/isActiveFeature?featureName=externalUsers",{method:"GET",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(t){if(t&&t.ok)return t.json();throw new Error("Error when getting External Feature settings")}))}s.d(e,"i",(function(){return a})),s.d(e,"q",(function(){return i})),s.d(e,"k",(function(){return n})),s.d(e,"b",(function(){return o})),s.d(e,"h",(function(){return r})),s.d(e,"l",(function(){return c})),s.d(e,"e",(function(){return l})),s.d(e,"j",(function(){return p})),s.d(e,"a",(function(){return d})),s.d(e,"r",(function(){return u})),s.d(e,"p",(function(){return m})),s.d(e,"d",(function(){return v})),s.d(e,"n",(function(){return h})),s.d(e,"f",(function(){return g})),s.d(e,"c",(function(){return f})),s.d(e,"g",(function(){return _})),s.d(e,"o",(function(){return b})),s.d(e,"m",(function(){return C}))},12:function(t,e,s){"use strict";s.r(e),s.d(e,"init",(function(){return pt}));var a={props:{displayClose:{type:Boolean,default:!0},title:{type:String,default:""},modalClass:{type:String,default:""}},methods:{closeModal:function(){this.$emit("modal-closed")}}},i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"modal-mask uiPopupWrapper"},[s("div",{staticClass:"uiPopup modal-content",class:t.modalClass},[s("div",{staticClass:"popupHeader"},[s("span",{staticClass:"PopupTitle popupTitle"},[t._v(t._s(t.title))]),t._v(" "),t.displayClose?s("a",{staticClass:"uiIconClose pull-right",on:{click:t.closeModal}}):s("v-btn",{staticClass:"closeBindingModal",attrs:{icon:""},on:{click:t.closeModal}},[s("v-icon",{staticClass:"closeIcon",attrs:{large:"",color:"#a8b3c5"}},[t._v("\n          close\n        ")])],1)],1),t._v(" "),s("div",{staticClass:"PopupContent popupContent"},[t._t("default")],2)])])};i._withStripped=!0;var n=s(0),o=Object(n.a)(a,i,[],!1,null,null,null);o.options.__file="src/main/webapp/vue-apps/spaces-administration/components/modal/ExoSpacesAdministrationModal.vue";var r=o.exports,c=s(1),l={props:{canBindGroupsAndSpaces:{type:Boolean,default:!1}},data:function(){return{showGroupBindingForm:!1,showConfirmMessageModal:!1,spaces:[],spaceName:"",spaceToBind:null,spaceToBindIndex:null,spaceToDeleteId:null,spaceToDeleteIndex:null,totalPages:1,currentPage:1,searchText:"",maxVisiblePagesButtons:3,maxVisibleButtons:5,groupBindingDrawerKey:0,showConfirmMessageBindingModal:!1,showConfirmMessageRemoveBindingModal:!1,groupsToBind:[],groupSpaceBindings:[],bindingsLoading:!0,binding:{},groupPrettyName:"",avatar:this.$spacesConstants&&this.$spacesConstants.DEFAULT_SPACE_AVATAR}},computed:{startPage:function(){return 1===this.currentPage?1:this.currentPage===this.totalPages&&this.totalPages>this.maxVisibleButtons?this.totalPages-this.maxVisiblePagesButtons+1<0?1:this.totalPages-this.maxVisiblePagesButtons+1:this.totalPages>this.maxVisibleButtons?this.totalPages-this.currentPage<this.maxVisibleButtons&&this.totalPages-this.currentPage>=this.maxVisiblePagesButtons?this.totalPages-this.maxVisibleButtons+1:this.totalPages-this.currentPage<this.maxVisiblePagesButtons-1?this.currentPage-1:this.currentPage:1},endPage:function(){return this.totalPages-this.startPage<=this.maxVisibleButtons-1?this.totalPages:Math.min(this.startPage+this.maxVisiblePagesButtons-1,this.totalPages)},pages:function(){for(var t=[],e=this.startPage;e<=this.endPage;e+=1)t.push({name:e});return t},isInFirstPage:function(){return this.totalPages>this.maxVisibleButtons&&this.totalPages-this.currentPage<this.maxVisiblePagesButtons},isInLastPage:function(){return this.totalPages-this.currentPage>=this.maxVisibleButtons}},created:function(){var t=this;this.initSpaces().finally((function(){return t.$root.$applicationLoaded()}))},methods:{initSpaces:function(){var t=this;return c.i().then((function(e){t.spaces=e.spaces,t.totalPages=Math.ceil(e.size/t.$spacesConstants.SPACES_PER_PAGE)}))},getSpacesPerPage:function(t){var e=this,s=(t-1)*this.$spacesConstants.SPACES_PER_PAGE;c.k(s).then((function(s){e.spaces=s.spaces,e.currentPage=t}))},deleteSpaceById:function(t,e){this.showConfirmMessageModal=!0,this.spaceToDeleteId=t,this.spaceToDeleteIndex=e},confirmDelete:function(){var t=this;c.b(this.spaceToDeleteId).then((function(){t.spaces.splice(t.spaceToDeleteIndex,1)})),this.showConfirmMessageModal=!1},getSpaceLinkSetting:function(t,e){return c.h(t,e)},searchSpaces:function(){var t=this;c.q(this.searchText).then((function(e){t.spaces=e.spaces,t.totalPages=Math.ceil(e.size/t.$spacesConstants.SPACES_PER_PAGE)}))},closeModal:function(){this.showConfirmMessageModal=!1},openSpaceBindingDrawer:function(t,e){var s=this;this.spaceToBind=t,this.spaceName=t.displayName,this.spaceToBindIndex=e,this.showGroupBindingForm=!0,t.hasBindings?c.d(t.id).then((function(t){s.groupSpaceBindings=t.groupSpaceBindings})).finally((function(){return s.bindingsLoading=!1})):this.bindingsLoading=!1},closeGroupBindingDrawer:function(){this.showGroupBindingForm=!1,this.groupSpaceBindings=[],this.forceRerender()},openBindingModal:function(t){this.groupsToBind=t,this.showConfirmMessageBindingModal=!0},openRemoveBindingModal:function(t){this.binding=t,this.groupPrettyName=this.renderGroupName(t.group),this.showConfirmMessageRemoveBindingModal=!0},closeBindingModal:function(){this.showConfirmMessageBindingModal=!1},closeRemoveBindingModal:function(){this.showConfirmMessageRemoveBindingModal=!1},confirmBinding:function(){var t=this;c.p(this.spaceToBind.id,this.groupsToBind).finally((function(){return t.goToBindingReports()})),this.showConfirmMessageBindingModal=!1},confirmRemoveBinding:function(){var t=this;c.n(this.binding.id).finally((function(){return t.goToBindingReports()})),this.showConfirmMessageRemoveBindingModal=!1},goToBindingReports:function(){this.showGroupBindingForm=!1,this.$emit("bindingReports"),this.navigateTo("g/:platform:users/spacesAdministration#bindingReports"),this.forceRerender()},navigateTo:function(t){location.href=eXo.env.portal.context+"/"+t},renderGroupName:function(t){var e=t.slice(t.lastIndexOf("/")+1,t.length);return(e=e.charAt(0).toUpperCase()+e.slice(1))+" ("+t+")"},forceRerender:function(){this.groupBindingDrawerKey+=1}}},p=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"manageSpaces"},[s("div",{staticClass:"uiSearchInput"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.searchText,expression:"searchText"}],staticClass:"showInputSearch",attrs:{placeholder:t.$t("social.spaces.administration.manageSpaces.search"),type:"text"},domProps:{value:t.searchText},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.searchSpaces()},input:function(e){e.target.composing||(t.searchText=e.target.value)}}}),t._v(" "),s("a",{directives:[{name:"exo-tooltip",rawName:"v-exo-tooltip.bottom.body",value:t.Search,expression:"Search",modifiers:{bottom:!0,body:!0}}],staticClass:"advancedSearch",attrs:{href:"#"}},[s("i",{staticClass:"uiIconPLF24x24Search",on:{click:function(e){return t.searchSpaces()}}})])]),t._v(" "),s("table",{staticClass:"uiGrid table table-hover table-striped"},[s("tr",[s("th",[t._v("\n        "+t._s(t.$t("social.spaces.administration.manageSpaces.space"))+"\n      ")]),t._v(" "),s("th",[t._v("\n        "+t._s(t.$t("social.spaces.administration.manageSpaces.description"))+"\n      ")]),t._v(" "),s("th",[t._v("\n        "+t._s(t.$t("social.spaces.administration.manageSpaces.visibility"))+"\n      ")]),t._v(" "),s("th",[t._v("\n        "+t._s(t.$t("social.spaces.administration.manageSpaces.registration"))+"\n      ")]),t._v(" "),s("th",[s("span",{directives:[{name:"exo-tooltip",rawName:"v-exo-tooltip.bottom.body",value:t.$t("social.spaces.administration.manageSpaces.users.tooltip"),expression:"$t('social.spaces.administration.manageSpaces.users.tooltip')",modifiers:{bottom:!0,body:!0}}]},[t._v("\n          "+t._s(t.$t("social.spaces.administration.manageSpaces.users"))+"\n        ")])]),t._v(" "),s("th",[t._v("\n        "+t._s(t.$t("social.spaces.administration.manageSpaces.actions"))+"\n      ")])]),t._v(" "),0===t.spaces.length?s("tr",[s("td",{staticClass:"empty center",attrs:{colspan:"12"}},[t._v(" "+t._s(t.$t("social.spaces.administration.manageSpaces.noSpaces"))+" ")])]):t._e(),t._v(" "),t._l(t.spaces,(function(e,a){return s("tr",{key:e.id},[s("td",[null!=e.avatarUrl?s("img",{staticClass:"avatar",attrs:{src:e.avatarUrl}}):s("img",{staticClass:"avatar",attrs:{src:t.avatar}}),t._v("  "+t._s(e.displayName)+"\n      ")]),t._v(" "),s("td",{domProps:{innerHTML:t._s(e.description)}}),t._v(" "),s("td",{staticClass:"center"},[t._v(" "+t._s(t.$t("social.spaces.administration.manageSpaces.visibility."+e.visibility))+" ")]),t._v(" "),s("td",{staticClass:"center"},[t._v(" "+t._s(t.$t("social.spaces.administration.manageSpaces.registration."+e.subscription))+" ")]),t._v(" "),s("td",{staticClass:"center"},[t._v(" "+t._s(e.totalBoundUsers)+"/"+t._s(e.membersCount)+" ")]),t._v(" "),s("td",{staticClass:"center actionContainer"},[t.canBindGroupsAndSpaces?s("a",{directives:[{name:"exo-tooltip",rawName:"v-exo-tooltip.bottom.body",value:t.$t("social.spaces.administration.manageSpaces.actions.bind"),expression:"$t('social.spaces.administration.manageSpaces.actions.bind')",modifiers:{bottom:!0,body:!0}}],staticClass:"actionIcon",on:{click:function(s){return t.openSpaceBindingDrawer(e,a)}}},[s("i",{staticClass:"uiIconSpaceBinding uiIconGroup",class:{bound:e.hasBindings}})]):t._e(),t._v(" "),s("a",{directives:[{name:"exo-tooltip",rawName:"v-exo-tooltip.bottom.body",value:t.$t("social.spaces.administration.manageSpaces.actions.edit"),expression:"$t('social.spaces.administration.manageSpaces.actions.edit')",modifiers:{bottom:!0,body:!0}}],staticClass:"actionIcon",attrs:{href:t.getSpaceLinkSetting(e.displayName,e.groupId),target:"_blank"}},[s("i",{staticClass:"uiIconEdit uiIconLightGray"})]),t._v(" "),s("a",{directives:[{name:"exo-tooltip",rawName:"v-exo-tooltip.bottom.body",value:t.$t("social.spaces.administration.manageSpaces.actions.delete"),expression:"$t('social.spaces.administration.manageSpaces.actions.delete')",modifiers:{bottom:!0,body:!0}}],staticClass:"actionIcon",on:{click:function(s){return t.deleteSpaceById(e.id,a)}}},[s("i",{staticClass:"uiIconDeleteUser uiIconLightGray"})])])])}))],2),t._v(" "),t.totalPages>1?s("div",{staticClass:"pagination uiPageIterator"},[s("ul",{staticClass:"pull-right"},[s("li",{class:{disabled:1===t.currentPage}},[s("a",{directives:[{name:"exo-tooltip",rawName:"v-exo-tooltip.bottom.body",value:t.$t("social.spaces.administration.manageSpaces.pagination.previous"),expression:"$t('social.spaces.administration.manageSpaces.pagination.previous')",modifiers:{bottom:!0,body:!0}}],attrs:{href:"#"},on:{click:function(e){return t.getSpacesPerPage(t.currentPage-1)}}},[s("i",{staticClass:"uiIconPrevArrow"})])]),t._v(" "),t.isInFirstPage?s("li",[s("a",{attrs:{href:"#"},on:{click:function(e){return t.getSpacesPerPage(1)}}},[t._v(t._s(1))])]):t._e(),t._v(" "),t.isInFirstPage?s("li",[t._m(0)]):t._e(),t._v(" "),t._l(t.pages,(function(e,a){return s("li",{key:a,class:{active:t.currentPage===e.name}},[s("a",{attrs:{href:"#"},on:{click:function(s){return t.getSpacesPerPage(e.name)}}},[t._v(t._s(e.name))])])})),t._v(" "),t.isInLastPage?s("li",[t._m(1)]):t._e(),t._v(" "),t.isInLastPage?s("li",[s("a",{attrs:{href:"#"},on:{click:function(e){return t.getSpacesPerPage(t.totalPages)}}},[t._v(t._s(t.totalPages))])]):t._e(),t._v(" "),s("li",{class:[t.currentPage===t.totalPages?"disabled":""]},[s("a",{directives:[{name:"exo-tooltip",rawName:"v-exo-tooltip.bottom.body",value:t.$t("social.spaces.administration.manageSpaces.pagination.next"),expression:"$t('social.spaces.administration.manageSpaces.pagination.next')",modifiers:{bottom:!0,body:!0}}],attrs:{href:"#"},on:{click:function(e){return t.getSpacesPerPage(t.currentPage+1)}}},[s("i",{staticClass:"uiIconNextArrow"})])])],2)]):t._e(),t._v(" "),s("exo-spaces-administration-modal",{directives:[{name:"show",rawName:"v-show",value:t.showConfirmMessageModal,expression:"showConfirmMessageModal"}],attrs:{title:t.$t("social.spaces.administration.delete.spaces.confirm.title")},on:{"modal-closed":t.closeModal}},[s("p",[t._v(t._s(t.$t("social.spaces.administration.delete.spaces.confirm")))]),t._v(" "),s("div",{staticClass:"uiAction uiActionBorder"},[s("div",{staticClass:"btn btn-primary",on:{click:t.confirmDelete}},[t._v(t._s(t.$t("social.spaces.administration.delete.spaces.button.delete")))]),t._v(" "),s("div",{staticClass:"btn",on:{click:t.closeModal}},[t._v(t._s(t.$t("social.spaces.administration.delete.spaces.button.cancel")))])])]),t._v(" "),s("v-navigation-drawer",{attrs:{id:"GroupBindingDrawer",absolute:"",right:"",stateless:"",temporary:"",width:"500","max-width":"100vw"},model:{value:t.showGroupBindingForm,callback:function(e){t.showGroupBindingForm=e},expression:"showGroupBindingForm"}},[s("exo-group-binding-drawer",{key:t.groupBindingDrawerKey,attrs:{"group-space-bindings":t.groupSpaceBindings,"bound-groups-loading":t.bindingsLoading,"space-to-bind":t.spaceToBind},on:{close:t.closeGroupBindingDrawer,openBindingModal:t.openBindingModal,openRemoveBindingModal:t.openRemoveBindingModal}})],1),t._v(" "),s("exo-spaces-administration-modal",{directives:[{name:"show",rawName:"v-show",value:t.showConfirmMessageBindingModal,expression:"showConfirmMessageBindingModal"}],staticClass:"bindingModal",attrs:{title:t.$t("social.spaces.administration.manageSpaces.spaceBindingForm.confirmation.title"),"display-close":!1},on:{"modal-closed":t.closeBindingModal}},[s("p",[t._v(t._s(t.$t("social.spaces.administration.manageSpaces.spaceBindingForm.confirmation",{0:t.spaceName})))]),t._v(" "),s("div",{staticClass:"uiAction uiActionBorder"},[s("div",{staticClass:"btn btn-primary",on:{click:t.confirmBinding}},[t._v(t._s(t.$t("social.spaces.administration.manageSpaces.spaceBindingForm.confirmation.confirm")))]),t._v(" "),s("div",{staticClass:"btn",on:{click:t.closeBindingModal}},[t._v(t._s(t.$t("social.spaces.administration.manageSpaces.spaceBindingForm.cancel")))])])]),t._v(" "),s("exo-spaces-administration-modal",{directives:[{name:"show",rawName:"v-show",value:t.showConfirmMessageRemoveBindingModal,expression:"showConfirmMessageRemoveBindingModal"}],staticClass:"bindingModal",attrs:{title:t.$t("social.spaces.administration.manageSpaces.spaceBindingForm.confirmation.title"),"display-close":!1},on:{"modal-closed":t.closeRemoveBindingModal}},[s("p",[t._v(t._s(t.$t("social.spaces.administration.manageSpaces.spaceBindingForm.removeBinding.confirmation",{0:t.groupPrettyName})))]),t._v(" "),s("div",{staticClass:"uiAction uiActionBorder"},[s("div",{staticClass:"btn btn-primary",on:{click:t.confirmRemoveBinding}},[t._v(t._s(t.$t("social.spaces.administration.manageSpaces.spaceBindingForm.removeBinding.confirm")))]),t._v(" "),s("div",{staticClass:"btn",on:{click:t.closeRemoveBindingModal}},[t._v(t._s(t.$t("social.spaces.administration.manageSpaces.spaceBindingForm.cancel")))])])])],1)};p._withStripped=!0;var d=Object(n.a)(l,p,[function(){var t=this.$createElement,e=this._self._c||t;return e("a",[e("span",[this._v("...")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("a",[e("span",[this._v("...")])])}],!1,null,null,null);d.options.__file="src/main/webapp/vue-apps/spaces-administration/components/ExoSpacesAdministrationManageSpaces.vue";var u=d.exports,m={data:function(){return{creators:[],administrators:[],spacesCreatorsEditMode:!1,spacesAdministratorsEditMode:!1,displayNoAssignmentCreators:!1,displayNoAssignmentAdministrators:!1,externalFeatureEnabled:null,externalFeatureStatusLoaded:!1}},created:function(){this.getSettingValueCreateSpace(),this.getSettingValueSpacesAdministrators(),this.getExternalFeatureStatus()},methods:{initSuggesterSpacesCreators:function(){var t=$("#add-creators-suggester");if(t&&t.length&&t.suggester){var e=this,s={type:"tag",plugins:["remove_button","restore_on_backspace"],create:!1,createOnBlur:!1,highlight:!1,openOnFocus:!1,sourceProviders:["exo:spacesAdministration"],valueField:"text",labelField:"text",searchField:["text"],closeAfterSelect:!0,dropdownParent:"body",hideSelected:!0,renderMenuItem:function(t,s){return e.renderMenuItem(t,s)},renderItem:function(t){return'<div class="item">'+t.text+"</div>"},onItemAdd:function(t){e.addSuggestedItemCreate(t)},onItemRemove:function(t){e.removeSuggestedItemCreators(t)},sortField:[{field:"order"},{field:"$score"}],providers:{"exo:spacesAdministration":e.findGroups}};if(t.suggester(s),$("#add-creators-suggester")[0].selectize.clear(),this.creators&&null!==this.creators){var a=!0,i=!1,n=void 0;try{for(var o,r=this.creators[Symbol.iterator]();!(a=(o=r.next()).done);a=!0){var c=o.value;t[0].selectize.addOption({text:c}),t[0].selectize.addItem(c)}}catch(t){i=!0,n=t}finally{try{!a&&r.return&&r.return()}finally{if(i)throw n}}}}},addSuggestedItemCreate:function(t){if($("#add-creators-suggester")&&$("#add-creators-suggester").length&&$("#add-creators-suggester")[0].selectize){var e=$("#add-creators-suggester")[0].selectize;t=e.options[t]}this.creators.find((function(e){return e===t.text}))||this.creators.push(t.text)},removeSuggestedItemCreators:function(t){for(var e=$("#add-creators-suggester"),s=this.creators.length-1;s>=0;s--)this.creators[s]===t&&(this.creators.splice(s,1),e[0].selectize.removeOption(t),e[0].selectize.removeItem(t))},savePermissionsCreateSpace:function(){$(".tooltip.fade.bottom.in").remove(),this.creators&&c.r("spacesCreators",this.creators.map((function(t){var e=t.split(":");return{membershipType:e[0],group:e[1]}}))),this.spacesCreatorsEditMode=!1},getSettingValueCreateSpace:function(){var t=this;c.j("spacesCreators").then((function(e){if(e){t.creators=[];var s=!0,a=!1,i=void 0;try{for(var n,o=e.memberships[Symbol.iterator]();!(s=(n=o.next()).done);s=!0){var r=n.value,c=r.membershipType+":"+r.group;t.creators.push(c)}}catch(t){a=!0,i=t}finally{try{!s&&o.return&&o.return()}finally{if(a)throw i}}}t.displayNoAssignmentCreators=!0,t.initSuggesterSpacesCreators()}))},initSuggesterSpacesAdministrators:function(){var t=$("#add-administrators-suggester");if(t&&t.length&&t.suggester){var e=this,s={type:"tag",plugins:["remove_button","restore_on_backspace"],create:!1,createOnBlur:!1,highlight:!1,openOnFocus:!1,sourceProviders:["exo:spacesAdministration"],valueField:"text",labelField:"text",searchField:["text"],closeAfterSelect:!0,dropdownParent:"body",hideSelected:!0,renderMenuItem:function(t,s){return e.renderMenuItem(t,s)},renderItem:function(t){return'<div class="item">'+t.text+"</div>"},onItemAdd:function(t){e.addSuggestedItem(t)},onItemRemove:function(t){e.removeSuggestedItemAdinistrators(t)},sortField:[{field:"order"},{field:"$score"}],providers:{"exo:spacesAdministration":e.findGroups}};if(t.suggester(s),$("#add-administrators-suggester")[0].selectize.clear(),this.administrators&&null!==this.administrators){var a=!0,i=!1,n=void 0;try{for(var o,r=this.administrators[Symbol.iterator]();!(a=(o=r.next()).done);a=!0){var c=o.value;t[0].selectize.addOption({text:c}),t[0].selectize.addItem(c)}}catch(t){i=!0,n=t}finally{try{!a&&r.return&&r.return()}finally{if(i)throw n}}}}},findGroups:function(t,e){if(!t.length)return e();c.e(t).then((function(t){var s=[],a=!0,i=!1,n=void 0;try{for(var o,r=t.entities[Symbol.iterator]();!(a=(o=r.next()).done);a=!0){var c=o.value;s.push({avatarUrl:null,text:"*:"+c.id,value:"*:"+c.id,type:"group"})}}catch(t){i=!0,n=t}finally{try{!a&&r.return&&r.return()}finally{if(i)throw n}}e(s)}))},renderMenuItem:function(t,e){return'\n        <div class="item">'+e(t.value)+"</div>\n      "},addSuggestedItem:function(t){if($("#add-administrators-suggester")&&$("#add-administrators-suggester").length&&$("#add-administrators-suggester")[0].selectize){var e=$("#add-administrators-suggester")[0].selectize;t=e.options[t]}this.administrators.find((function(e){return e===t.text}))||this.administrators.push(t.text)},removeSuggestedItemAdinistrators:function(t){for(var e=$("#add-administrators-suggester"),s=this.administrators.length-1;s>=0;s--)this.administrators[s]===t&&(this.administrators.splice(s,1),e[0].selectize.removeOption(t),e[0].selectize.removeItem(t))},savePermissionsSpacesAdministrators:function(){$(".tooltip.fade.bottom.in").remove(),this.administrators&&c.r("spacesAdministrators",this.administrators.map((function(t){var e=t.split(":");return{membershipType:e[0],group:e[1]}}))),this.spacesAdministratorsEditMode=!1},getSettingValueSpacesAdministrators:function(){var t=this;c.j("spacesAdministrators").then((function(e){if(e){t.administrators=[];var s=!0,a=!1,i=void 0;try{for(var n,o=e.memberships[Symbol.iterator]();!(s=(n=o.next()).done);s=!0){var r=n.value,c=r.membershipType+":"+r.group;t.administrators.push(c)}}catch(t){a=!0,i=t}finally{try{!s&&o.return&&o.return()}finally{if(a)throw i}}}t.displayNoAssignmentAdministrators=!0,t.initSuggesterSpacesAdministrators()}))},editCreateSpace:function(){$(".tooltip.fade.bottom.in").remove(),this.spacesCreatorsEditMode?this.spacesCreatorsEditMode=!1:this.spacesCreatorsEditMode=!0,this.getSettingValueCreateSpace()},editManageSpace:function(){$(".tooltip.fade.bottom.in").remove(),this.spacesAdministratorsEditMode?this.spacesAdministratorsEditMode=!1:this.spacesAdministratorsEditMode=!0,this.getSettingValueSpacesAdministrators()},saveExternalFeatureStatus:function(t){c.o(t)},getExternalFeatureStatus:function(){var t=this;c.m().then((function(e){t.externalFeatureEnabled=e.value,t.externalFeatureStatusLoaded=!0}))}}},v=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"spacesPermissions"},[s("v-col",{staticClass:"pa-0",attrs:{cols:"12",md:"4"}},[s("v-list",{staticClass:"pt-0"},[s("v-list-item",{staticClass:"ps-0"},[s("v-list-item-content",{staticClass:"pt-0"},[s("v-list-item-title",{staticClass:"mb-0 title"},[s("v-row",{staticClass:"col-12",attrs:{"no-gutters":""}},[s("v-col",{staticClass:"col-8 pb-0 pt-5"},[s("h4",{staticClass:"font-weight-bold ma-0"},[t._v(t._s(t.$t("social.spaces.administration.permissions.inviteNewExternal")))])]),t._v(" "),s("v-col",{staticClass:"col-4"},[t.externalFeatureStatusLoaded?s("v-switch",{staticClass:"float-right mt-3",attrs:{dense:""},on:{change:function(e){return t.saveExternalFeatureStatus(t.externalFeatureEnabled)}},model:{value:t.externalFeatureEnabled,callback:function(e){t.externalFeatureEnabled=e},expression:"externalFeatureEnabled"}}):t._e()],1)],1)],1),t._v(" "),s("v-list-item-subtitle",{staticClass:"text-sub-title font-italic"},[t._v("\n            "+t._s(t.$t("social.spaces.administration.permissions.enableDisableExternal"))+"\n          ")])],1)],1)],1)],1),t._v(" "),s("table",{staticClass:"uiGrid table table-hover table-striped"},[s("tr",[s("th",[t._v("\n        "+t._s(t.$t("social.spaces.administration.permissions"))+"\n      ")]),t._v(" "),s("th",[t._v("\n        "+t._s(t.$t("social.spaces.administration.permissions.groups"))+"\n      ")]),t._v(" "),s("th",{staticClass:"actions"},[t._v("\n        "+t._s(t.$t("social.spaces.administration.permissions.actions"))+"\n      ")])]),t._v(" "),s("tr",[s("td",[s("h5",{staticClass:"title"},[t._v(t._s(t.$t("social.spaces.administration.permissions.createSpace")))]),t._v(" "),s("h5",[t._v(t._s(t.$t("social.spaces.administration.permissions.descriptionCreateSpace")))])]),t._v(" "),s("td",[s("div",{directives:[{name:"show",rawName:"v-show",value:!t.spacesCreatorsEditMode,expression:"!spacesCreatorsEditMode"}]},[t.creators.length>0?s("div",t._l(t.creators,(function(e){return s("div",{key:e},[s("h5",[t._v(t._s(e))])])})),0):t._e(),t._v(" "),0===t.creators.length&&t.displayNoAssignmentCreators?s("h5",[t._v(t._s(t.$t("social.spaces.administration.permissions.noAssignment")))]):t._e()]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.spacesCreatorsEditMode,expression:"spacesCreatorsEditMode"}],staticClass:"inputUser"},[s("input",{attrs:{id:"add-creators-suggester",type:"text"}})])]),t._v(" "),t.spacesCreatorsEditMode?t._e():s("td",{staticClass:"center actionContainer"},[s("a",{directives:[{name:"exo-tooltip",rawName:"v-exo-tooltip.bottom.body",value:t.$t("social.spaces.administration.permissions.actions.edit"),expression:"$t('social.spaces.administration.permissions.actions.edit')",modifiers:{bottom:!0,body:!0}}],staticClass:"actionIcon",on:{click:function(e){return t.editCreateSpace()}}},[s("i",{staticClass:"uiIconEdit uiIconLightGray"})])]),t._v(" "),t.spacesCreatorsEditMode?s("td",{staticClass:"center actionContainer"},[s("a",{directives:[{name:"exo-tooltip",rawName:"v-exo-tooltip.bottom.body",value:t.$t("social.spaces.administration.permissions.actions.save"),expression:"$t('social.spaces.administration.permissions.actions.save')",modifiers:{bottom:!0,body:!0}}],staticClass:"actionIcon",on:{click:function(e){return t.savePermissionsCreateSpace()}}},[s("i",{staticClass:"uiIconSave uiIconLightGray"})]),t._v(" "),s("a",{directives:[{name:"exo-tooltip",rawName:"v-exo-tooltip.bottom.body",value:t.$t("social.spaces.administration.permissions.actions.cancel"),expression:"$t('social.spaces.administration.permissions.actions.cancel')",modifiers:{bottom:!0,body:!0}}],staticClass:"actionIcon",on:{click:function(e){return t.editCreateSpace()}}},[s("i",{staticClass:"uiIconClose uiIconLightGray"})])]):t._e()]),t._v(" "),s("tr",[s("td",[s("h5",{staticClass:"title"},[t._v(t._s(t.$t("social.spaces.administration.permissions.manageSpaces")))]),t._v(" "),s("h5",[t._v(t._s(t.$t("social.spaces.administration.permissions.descriptionManageSpaces")))])]),t._v(" "),s("td",[s("div",{directives:[{name:"show",rawName:"v-show",value:!t.spacesAdministratorsEditMode,expression:"!spacesAdministratorsEditMode"}]},[t.administrators.length>0?s("div",t._l(t.administrators,(function(e){return s("div",{key:e},[s("h5",[t._v(t._s(e))])])})),0):t._e(),t._v(" "),0===t.administrators.length&&t.displayNoAssignmentAdministrators?s("h5",[t._v(t._s(t.$t("social.spaces.administration.permissions.noAssignment")))]):t._e()]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.spacesAdministratorsEditMode,expression:"spacesAdministratorsEditMode"}],staticClass:"inputUser"},[s("input",{attrs:{id:"add-administrators-suggester",type:"text"}})])]),t._v(" "),t.spacesAdministratorsEditMode?t._e():s("td",{staticClass:"center actionContainer"},[s("a",{directives:[{name:"exo-tooltip",rawName:"v-exo-tooltip.bottom.body",value:t.$t("social.spaces.administration.permissions.actions.edit"),expression:"$t('social.spaces.administration.permissions.actions.edit')",modifiers:{bottom:!0,body:!0}}],staticClass:"actionIcon",on:{click:function(e){return t.editManageSpace()}}},[s("i",{staticClass:"uiIconEdit uiIconLightGray"})])]),t._v(" "),t.spacesAdministratorsEditMode?s("td",{staticClass:"center actionContainer"},[s("a",{directives:[{name:"exo-tooltip",rawName:"v-exo-tooltip.bottom.body",value:t.$t("social.spaces.administration.permissions.actions.save"),expression:"$t('social.spaces.administration.permissions.actions.save')",modifiers:{bottom:!0,body:!0}}],staticClass:"actionIcon",on:{click:function(e){return t.savePermissionsSpacesAdministrators()}}},[s("i",{staticClass:"uiIconSave uiIconLightGray"})]),t._v(" "),s("a",{directives:[{name:"exo-tooltip",rawName:"v-exo-tooltip.bottom.body",value:t.$t("social.spaces.administration.permissions.actions.cancel"),expression:"$t('social.spaces.administration.permissions.actions.cancel')",modifiers:{bottom:!0,body:!0}}],staticClass:"actionIcon",on:{click:function(e){return t.editManageSpace()}}},[s("i",{staticClass:"uiIconClose uiIconLightGray"})])]):t._e()])])],1)};v._withStripped=!0;var h=Object(n.a)(m,v,[],!1,null,null,null);h.options.__file="src/main/webapp/vue-apps/spaces-administration/components/ExoSpacesAdministrationSpacesPermissions.vue";var g=h.exports,f={props:{applicationsByCategory:{type:Array,default:function(){return[]}}},data:function(){return{activeTab:1,canChangePermissions:!1}},computed:{showManageSpaces:function(){return this.activeTab&&1===this.activeTab},showPermissions:function(){return this.canChangePermissions&&this.activeTab&&2===this.activeTab},showSpaceApplications:function(){return 3===this.activeTab},showSpaceTemplates:function(){return 4===this.activeTab},showBindingReports:function(){return this.canChangePermissions&&this.activeTab&&5===this.activeTab&&this.canChangePermissions}},created:function(){var t=this;c.l(eXo.env.portal.userName).then((function(e){e&&e.platformAdministrator&&(t.canChangePermissions=e.platformAdministrator)}))},mounted:function(){var t=window.location.hash;this.activeTab="#bindingReports"===t?5:"#permissions"===t?2:1}},_=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-app",{staticClass:"spacesAdministration",attrs:{flat:""}},[s("div",{staticClass:"uiTabAdvanced uiTabInPage"},[s("ul",{staticClass:"nav nav-tabs"},[s("li",{class:{active:1===t.activeTab},on:{click:function(e){t.activeTab=1}}},[s("a",{attrs:{href:"#manage","data-toggle":"tab"}},[t._v(t._s(t.$t("social.spaces.administration.manageSpaces")))])]),t._v(" "),s("li",{directives:[{name:"show",rawName:"v-show",value:t.canChangePermissions,expression:"canChangePermissions"}],class:{active:2===t.activeTab},on:{click:function(e){t.activeTab=2}}},[s("a",{attrs:{href:"#permissions","data-toggle":"tab"}},[t._v(t._s(t.$t("social.spaces.administration.permissions")))])]),t._v(" "),s("li",{class:{active:3===t.activeTab},on:{click:function(e){t.activeTab=3}}},[s("a",{attrs:{href:"#spaceApplications","data-toggle":"tab"}},[t._v(t._s(t.$t("social.spaces.applications")))])]),t._v(" "),s("li",{class:{active:4===t.activeTab},on:{click:function(e){t.activeTab=4}}},[s("a",{attrs:{href:"#spaceTemplates","data-toggle":"tab"}},[t._v(t._s(t.$t("social.spaces.templates")))])]),t._v(" "),s("li",{directives:[{name:"show",rawName:"v-show",value:t.canChangePermissions,expression:"canChangePermissions"}],class:{active:5===t.activeTab},on:{click:function(e){t.activeTab=5}}},[s("a",{attrs:{href:"#bindingReports","data-toggle":"tab"}},[t._v(t._s(t.$t("social.spaces.administration.bindingReports")))])])]),t._v(" "),s("div",{staticClass:"tab-content"},[t.showManageSpaces?s("div",{staticClass:"tab-pane fade in active",attrs:{id:"manage"}},[s("exo-spaces-administration-manage-spaces",{attrs:{"can-bind-groups-and-spaces":t.canChangePermissions},on:{bindingReports:function(e){t.activeTab=5}}})],1):t.showPermissions?s("div",{staticClass:"tab-pane fade in active",attrs:{id:"permissions"}},[s("exo-spaces-administration-manage-permissions")],1):t.showSpaceApplications?s("div",{staticClass:"tab-pane fade in active",attrs:{id:"spaceApplications"}},[s("exo-space-applications",{attrs:{"applications-by-category":t.applicationsByCategory}})],1):t.showSpaceTemplates?s("div",{staticClass:"tab-pane fade in active",attrs:{id:"spaceTemplates"}},[s("exo-space-templates-spaces")],1):t.showBindingReports?s("div",{staticClass:"tab-pane fade in active",attrs:{id:"bindingReports"}},[s("exo-spaces-administration-binding-reports")],1):t._e()])])])};_._withStripped=!0;var b=Object(n.a)(f,_,[],!1,null,null,null);b.options.__file="src/main/webapp/vue-apps/spaces-administration/components/ExoSpacesAdministrationSpaces.vue";var C=b.exports;var y={props:{spaceToBind:{type:String,default:null},groupSpaceBindings:{type:Array,default:null},boundGroupsLoading:{type:Boolean,default:!0}},data:function(){var t=this;return{textAreaValue:"",groups:[],showSelectGroupsTree:!1,avatar:this.$spacesConstants&&this.$spacesConstants.DEFAULT_SPACE_AVATAR,secondDrawerSelectedGroups:[],suggesterOptions:{type:"tag",plugins:["remove_button","restore_on_backspace"],create:!1,createOnBlur:!1,highlight:!1,openOnFocus:!1,valueField:"value",labelField:"text",searchField:["text"],closeAfterSelect:!1,dropdownParent:"body",hideSelected:!0,renderMenuItem:function(e,s){return t.renderMenuItem(e,s)},sortField:[{field:"order"},{field:"$score"}]}}},computed:{isAllowToSave:function(){return this.groups&&this.groups.length>0}},methods:{findGroups:function(t,e){var s=this;if(!t.length)return e();c.e(t).then((function(t){var a=[],i=s.groupSpaceBindings.map((function(t){return t.group})),n=!0,o=!1,r=void 0;try{for(var c,l=t.entities[Symbol.iterator]();!(n=(c=l.next()).done);n=!0){var p=c.value;p.id.startsWith("/spaces")||i.includes(p.id)||a.push({avatarUrl:null,text:p.label,value:p.id,type:"group"})}}catch(t){o=!0,r=t}finally{try{!n&&l.return&&l.return()}finally{if(o)throw r}}e(a)}))},renderMenuItem:function(t,e){return'\n        <div class="item" title="'+e(t.value)+'" rel="tooltip" data-placement="bottom">'+e(t.value)+"</div>\n      "},goToSelectGroups:function(){this.showSelectGroupsTree=!0},back:function(){this.showSelectGroupsTree=!this.showSelectGroupsTree},closeDrawer:function(){this.showSelectGroupsTree=!1,this.$emit("close")},cancelBinding:function(){this.groups=[],this.$emit("close"),this.showSelectGroupsTree=!1},renderGroupName:function(t){var e=t.slice(t.lastIndexOf("/")+1,t.length);return(e=e.charAt(0).toUpperCase()+e.slice(1))+" ("+t+")"},selectionSaved:function(t){var e;this.secondDrawerSelectedGroups=t;var s=t.map((function(t){return t.id}));this.showSelectGroupsTree=!1,this.groups=[],(e=this.groups).push.apply(e,function(t){if(Array.isArray(t)){for(var e=0,s=Array(t.length);e<t.length;e++)s[e]=t[e];return s}return Array.from(t)}(s))}}},x=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("v-flex",{directives:[{name:"show",rawName:"v-show",value:!t.showSelectGroupsTree,expression:"!showSelectGroupsTree"}],attrs:{id:"GroupBindingForm"}},[s("v-card-title",{staticClass:"title"},[s("v-layout",{staticClass:"pa-2",attrs:{row:""}},[s("v-flex",[s("span",[t._v("\n            "+t._s(t.$t("social.spaces.administration.manageSpaces.spaceBindingForm.title"))+"\n          ")])]),t._v(" "),s("v-flex",{attrs:{xs1:""}},[s("v-btn",{staticClass:"rightIcon",attrs:{icon:""},on:{click:t.closeDrawer}},[s("v-icon",{staticClass:"closeIcon",attrs:{large:""}},[t._v("\n              close\n            ")])],1)],1)],1)],1),t._v(" "),s("div",{staticClass:"content"},[s("v-layout",{staticClass:"mt-4 ps-2",attrs:{wrap:""}},[s("v-flex",{attrs:{"align-center":"",xs1:""}},[t.spaceToBind&&null!=t.spaceToBind.avatarUrl?s("img",{staticClass:"avatar",attrs:{src:t.spaceToBind.avatarUrl}}):s("img",{staticClass:"avatar",attrs:{src:t.avatar}})]),t._v(" "),s("v-flex",{staticClass:"spaceName",attrs:{"pt-1":""}},[s("span",[t._v(" "+t._s(t.spaceToBind?t.spaceToBind.displayName:"")+" ")])])],1),t._v(" "),s("v-layout",{staticClass:"pt-5 ps-3 mb-4",attrs:{wrap:""}},[s("v-flex",{attrs:{xs9:""}},[s("exo-group-suggester",{attrs:{options:t.suggesterOptions,"source-providers":[t.findGroups],"bound-groups":t.groupSpaceBindings,"second-drawer-selected-groups":t.secondDrawerSelectedGroups,placeholder:t.$t("social.spaces.administration.manageSpaces.spaceBindingForm.textField.placeHolder")},model:{value:t.groups,callback:function(e){t.groups=e},expression:"groups"}})],1),t._v(" "),s("v-flex",{attrs:{xs1:""}}),t._v(" "),s("v-flex",{attrs:{xs1:""}},[s("v-btn",{directives:[{name:"exo-tooltip",rawName:"v-exo-tooltip.bottom.body",value:t.$t("social.spaces.administration.manageSpaces.spaceBindingForm.selectList"),expression:"$t('social.spaces.administration.manageSpaces.spaceBindingForm.selectList')",modifiers:{bottom:!0,body:!0}}],staticClass:"rightIcon",attrs:{icon:""},on:{click:t.goToSelectGroups}},[s("i",{staticClass:"uiIconSpaceBinding uiIconGroup"})])],1)],1),t._v(" "),s("v-layout",{directives:[{name:"show",rawName:"v-show",value:t.boundGroupsLoading,expression:"boundGroupsLoading"}],attrs:{column:""}},[s("v-flex",{attrs:{"ps-4":""}},[s("v-skeleton-loader",{staticClass:"mx-auto",attrs:{type:"heading"}})],1),t._v(" "),s("v-spacer"),t._v(" "),s("v-flex",{attrs:{"pt-4":"","ps-4":"","pe-8":""}},[s("v-skeleton-loader",{staticClass:"mx-auto",attrs:{type:"paragraph@3"}})],1)],1),t._v(" "),t.groupSpaceBindings.length>0&&!t.boundGroupsLoading?s("v-layout",{attrs:{column:""}},[s("v-flex",[s("span",{staticClass:"subtitle-1"},[t._v("\n            "+t._s(t.$t("social.spaces.administration.manageSpaces.spaceBindingForm.boundGroups"))+"\n          ")])]),t._v(" "),s("v-flex",{staticClass:"boundGroups",attrs:{"mt-2":""}},[s("v-list",{attrs:{flat:"",subheader:"",dense:""}},[s("v-list-item-group",t._l(t.groupSpaceBindings,(function(e,a){return s("div",{key:a},[s("v-list-item",[s("v-list-item-content",[t._v("\n                    "+t._s(t.renderGroupName(e.group))+"\n                  ")]),t._v(" "),s("v-list-item-action",{staticClass:"delete"},[s("v-btn",{staticClass:"rightIcon",attrs:{small:"",icon:""},on:{click:function(s){return t.$emit("openRemoveBindingModal",e)}}},[s("i",{staticClass:"uiIconDeleteUser uiIconLightGray"})])],1)],1)],1)})),0)],1)],1)],1):t._e()],1),t._v(" "),s("v-card-actions",{staticClass:"drawerActions",attrs:{absolute:""}},[s("v-layout",[s("v-flex",{staticClass:"xs6"}),t._v(" "),s("button",{staticClass:"btn ms-2",attrs:{type:"button"},on:{click:t.cancelBinding}},[t._v("\n          "+t._s(t.$t("social.spaces.administration.manageSpaces.spaceBindingForm.cancel"))+"\n        ")]),t._v(" "),s("button",{staticClass:"btn btn-primary ms-6",attrs:{disabled:!t.isAllowToSave,type:"button"},on:{click:function(e){return t.$emit("openBindingModal",t.groups)}}},[t._v("\n          "+t._s(t.$t("social.spaces.administration.manageSpaces.spaceBindingForm.apply"))+"\n        ")])],1)],1)],1),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.showSelectGroupsTree,expression:"showSelectGroupsTree"}]},[s("exo-group-binding-second-level-drawer",{attrs:{"already-selected":t.groups,"group-space-bindings":t.groupSpaceBindings},on:{selectionSaved:t.selectionSaved,back:t.back,close:t.closeDrawer}})],1)],1)};x._withStripped=!0;var S=Object(n.a)(y,x,[],!1,null,null,null);S.options.__file="src/main/webapp/vue-apps/spaces-administration/components/drawer/ExoGroupBindingDrawer.vue";var w=S.exports;function A(t){if(Array.isArray(t)){for(var e=0,s=Array(t.length);e<t.length;e++)s[e]=t[e];return s}return Array.from(t)}var I={props:{alreadySelected:{type:Array,default:function(){return[]}},groupSpaceBindings:{type:Array,default:null}},data:function(){return{loading:!0,searchMode:!1,selection:[],items:[],search:null,allItems:[],openedNodes:[],openItems:[],active:[],confirmedSelection:[]}},computed:{isAllowToSave:function(){var t=[],e=this.confirmedSelection.map((function(t){return t.id})),s=this.selection.map((function(t){return t.id}));return s.forEach((function(s){e.includes(s)||t.push(s)})),e.forEach((function(e){s.includes(e)||t.push(e)})),t.length-this.groupSpaceBindings.length>0},searching:function(){return this.search}},watch:{alreadySelected:function(){var t=this,e=this.alreadySelected.map((function(t){return{id:t,name:t}}));if(0===this.confirmedSelection.length){var s,a;(s=this.confirmedSelection).push.apply(s,A(e)),(a=this.selection).push.apply(a,A(e))}else{var i,n=[],o=[],r=this.confirmedSelection.map((function(t){return t.id}));r.forEach((function(e){t.alreadySelected.includes(e)||n.push(e)})),this.alreadySelected.forEach((function(t){r.includes(t)||o.push(t)})),n.forEach((function(e){t.selection=t.selection.filter((function(t){return t.id!==e}))})),o.forEach((function(e){t.selection.push({id:e,name:e})})),this.confirmedSelection=[],(i=this.confirmedSelection).push.apply(i,A(e))}},search:function(){var t=this;this.search?(this.active=this.allItems.filter((function(e){return e.name.toLowerCase().match(t.search.toLowerCase())})),this.active.length>0&&(this.openItems=this.getItemsToOpen())):(this.active=[],this.openItems=[])},groupSpaceBindings:function(){var t;this.selection=[],this.openedNodes=[];var e=this.getBoundItems();(t=this.selection).push.apply(t,A(e))}},mounted:function(){this.getRootChildGroups()},methods:{getRootChildGroups:function(){var t=this;c.f(null).then((function(e){t.items=e.childGroups})).finally((function(){t.loading=!1,t.getAllGroups()}))},getAllGroups:function(){var t,e,s=[],a=[];(t=this.allItems).push.apply(t,A(this.items)),(e=s).push.apply(e,A(this.items));do{var i,n;(i=a).push.apply(i,A(this.getChildNodes(s))),(n=s=[]).push.apply(n,A(a)),a=[]}while(s.length>0)},getItemsToOpen:function(){var t=this,e=[];this.active.forEach((function(s){for(var a=s,i=void 0,n=a.id.split("/").length-1-1;n>0;n--)i=t.getItem(a.parentId),e.includes(i.id)||e.push(i.id),a=i}));var s=[];return e.forEach((function(e){s.push(t.getItem(e))})),s},getItem:function(t){return this.allItems.filter((function(e){return e.id===t}))[0]},getBoundItems:function(){var t=this,e=[];this.groupSpaceBindings&&this.groupSpaceBindings.length>0&&this.groupSpaceBindings.map((function(t){return t.group})).forEach((function(s){var a=t.getItem(s);a.bound=!0,e.push(a)}));return e},closeDrawer:function(){this.selection=[],this.search="",this.$emit("close")},cancelSelection:function(){var t=this.groupSpaceBindings.length-1,e=this.selection.length-this.groupSpaceBindings.length;e>0?this.selection.splice(t+1,e):this.$emit("back")},saveSelection:function(){var t=[];t.push.apply(t,A(this.selection));var e=this.groupSpaceBindings.length-1;t.splice(0,e+1),this.openItems=[],this.active=[],this.search="",this.searchMode=!1,this.$emit("selectionSaved",t)},getChildNodes:function(t){var e=this,s=[];return t.forEach((function(t){var a,i=t.children;s.push.apply(s,A(i)),(a=e.allItems).push.apply(a,A(i))})),s}}},P=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"secondDrawer"},[s("v-card-title",{staticClass:"title"},[s("v-layout",{directives:[{name:"show",rawName:"v-show",value:!t.searchMode,expression:"!searchMode"}],attrs:{"pa-2":"","justify-center":"","align-baseline":"",wrap:"",row:""}},[s("v-flex",{attrs:{"align-self-end":"",xs1:""}},[s("v-btn",{staticClass:"leftIcon",attrs:{icon:""},on:{click:function(e){return t.$emit("back")}}},[s("v-icon",{attrs:{small:""}},[t._v("arrow_back")])],1)],1),t._v(" "),s("v-flex",[s("span",{staticClass:"subtitle-1"},[t._v("\n          "+t._s(t.$t("social.spaces.administration.manageSpaces.spaceBindingForm.selectGroups"))+"\n        ")])]),t._v(" "),s("v-flex",{attrs:{xs1:""}},[s("v-btn",{attrs:{icon:""},on:{click:function(e){t.searchMode=!0}}},[s("v-icon",{staticClass:"closeIcon"},[t._v("search")])],1)],1),t._v(" "),s("v-flex",{attrs:{xs1:"","me-2":""}},[s("v-btn",{staticClass:"rightIcon",attrs:{icon:""},on:{click:t.closeDrawer}},[s("v-icon",{staticClass:"closeIcon",attrs:{large:""}},[t._v("\n            close\n          ")])],1)],1)],1),t._v(" "),s("v-layout",{directives:[{name:"show",rawName:"v-show",value:t.searchMode,expression:"searchMode"}],attrs:{"pa-2":"","justify-center":"","align-baseline":"",wrap:"",row:""}},[s("v-flex",{attrs:{"align-self-end":"",xs1:""}},[s("v-btn",{staticClass:"leftIcon",attrs:{icon:""},on:{click:function(e){t.searchMode=!1}}},[s("v-icon",{attrs:{small:""}},[t._v("arrow_back")])],1)],1),t._v(" "),s("v-flex",{attrs:{"ps-4":""}},[s("v-text-field",{staticClass:"treeGroupSearch",attrs:{placeholder:t.$t("social.spaces.administration.manageSpaces.spaceBindingForm.selectGroups.search"),"single-line":"",clearable:"",solo:"",flat:"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1)],1)],1),t._v(" "),s("v-layout",{staticClass:"content",attrs:{"pt-4":"","ps-2":""}},[s("v-flex",[s("div",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}]},[s("v-flex",{attrs:{"pt-4":"","ps-4":"","pe-8":""}},[s("v-skeleton-loader",{staticClass:"mx-auto",attrs:{type:"paragraph@3"}})],1)],1),t._v(" "),s("v-treeview",{directives:[{name:"show",rawName:"v-show",value:!t.loading&&!t.searching,expression:"!loading && !searching"}],attrs:{id:"treeDisplayMode",items:t.items,open:t.openedNodes,active:t.selection,"selection-type":"independent","item-disabled":"bound","expand-icon":"mdi-chevron-down",dense:"",shaped:"",hoverable:"",selectable:"","open-on-click":"","return-object":""},model:{value:t.selection,callback:function(e){t.selection=e},expression:"selection"}}),t._v(" "),s("v-treeview",{directives:[{name:"show",rawName:"v-show",value:t.searching,expression:"searching"}],attrs:{id:"treeSearchMode",items:t.items,search:t.search,open:t.openItems,active:t.active,"selection-type":"independent","item-disabled":"bound","expand-icon":"mdi-chevron-down",dense:"",shaped:"",hoverable:"",selectable:"",activatable:"","multiple-active":"","open-on-click":"","return-object":""},model:{value:t.selection,callback:function(e){t.selection=e},expression:"selection"}})],1)],1),t._v(" "),s("v-card-actions",{staticClass:"drawerActions",attrs:{absolute:""}},[s("v-layout",[s("v-flex",{staticClass:"xs6"}),t._v(" "),s("button",{staticClass:"btn ms-2",attrs:{type:"button"},on:{click:t.cancelSelection}},[t._v("\n        "+t._s(t.$t("social.spaces.administration.manageSpaces.spaceBindingForm.cancel"))+"\n      ")]),t._v(" "),s("button",{staticClass:"btn btn-primary ms-6",attrs:{disabled:!t.isAllowToSave,type:"button"},on:{click:t.saveSelection}},[t._v("\n        "+t._s(t.$t("social.spaces.administration.manageSpaces.spaceBindingForm.save"))+"\n      ")])],1)],1)],1)};P._withStripped=!0;var B=Object(n.a)(I,P,[],!1,null,null,null);B.options.__file="src/main/webapp/vue-apps/spaces-administration/components/drawer/ExoGroupBindingSecondLevelDrawer.vue";var T=B.exports,E={data:function(){return{loading:!0,avatar:this.$spacesConstants&&this.$spacesConstants.DEFAULT_SPACE_AVATAR,search:"",action:""+this.$t("social.spaces.administration.binding.reports.filter.all.bindings"),operationTypes:[""+this.$t("social.spaces.administration.binding.reports.filter.all.bindings"),""+this.$t("social.spaces.administration.binding.reports.filter.add"),""+this.$t("social.spaces.administration.binding.reports.filter.remove"),""+this.$t("social.spaces.administration.binding.reports.filter.synchronize")],operations:[]}},computed:{headers:function(){var t=this;return[{text:""+this.$t("social.spaces.administration.manageSpaces.space"),align:"center",value:"space.displayName"},{text:""+this.$t("social.spaces.administration.binding.reports.table.title.group"),align:"center",filterable:!1},{text:""+this.$t("social.spaces.administration.binding.reports.table.title.start.date"),align:"center",filterable:!1},{text:""+this.$t("social.spaces.administration.binding.reports.table.title.end.date"),align:"center",filterable:!1},{text:""+this.$t("social.spaces.administration.binding.reports.table.title.operation.type"),align:"center",filterable:!0,value:"operationType",filter:function(e){return t.action===""+t.$t("social.spaces.administration.binding.reports.filter.all.bindings")||t.getOperationType(e).toLowerCase()===t.action.toLowerCase()}},{text:""+this.$t("social.spaces.administration.binding.reports.table.title.added.users"),align:"center",filterable:!1},{text:""+this.$t("social.spaces.administration.binding.reports.table.title.removed.users"),align:"center",filterable:!1},{text:""+this.$t("social.spaces.administration.binding.reports.table.title.File"),align:"center",filterable:!1}]}},created:function(){var t=this;c.c().then((function(e){t.operations=e.groupSpaceBindingReportOperations})).finally((function(){return t.loading=!1}))},methods:{uploadCSVFile:function(t,e,s,a){c.g(t,e,s,a)},getOperationType:function(t){var e=t.toLowerCase();return""+this.$t("social.spaces.administration.binding.reports.filter."+e)}}},M=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"bindingReports"},[t.loading?s("div",[s("v-skeleton-loader",{staticClass:"mx-auto",attrs:{type:"table-heading,table-tbody"}})],1):s("div",[s("div",{staticClass:"reportsFilterSearch"},[s("v-layout",{attrs:{"justify-end":"",row:""}},[s("v-flex",{attrs:{xs2:""}},[s("v-text-field",{attrs:{placeholder:t.$t("social.spaces.administration.binding.reports.search"),"prepend-inner-icon":"search","single-line":"",flat:"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),t._v(" "),s("v-flex",{staticClass:"filter",attrs:{"ms-2":"","me-4":"",xs2:""}},[s("div",{staticClass:"btn-group"},[s("button",{staticClass:"btn dropdown-toggle",attrs:{"data-toggle":"dropdown"}},[t._v("\n              "+t._s(t.action)+"\n              "),s("i",{staticClass:"uiIconMiniArrowDown uiIconLightGray"}),s("span")]),t._v(" "),s("ul",{staticClass:"dropdown-menu"},[s("li",[s("a",{attrs:{href:"#"},on:{click:function(e){t.action=t.operationTypes[0]}}},[t._v(" "+t._s(t.operationTypes[0])+" ")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#"},on:{click:function(e){t.action=t.operationTypes[1]}}},[t._v(" "+t._s(t.operationTypes[1])+" ")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#"},on:{click:function(e){t.action=t.operationTypes[2]}}},[t._v(" "+t._s(t.operationTypes[2])+" ")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#"},on:{click:function(e){t.action=t.operationTypes[3]}}},[t._v(" "+t._s(t.operationTypes[3])+" ")])])])])])],1)],1),t._v(" "),s("v-data-table",{attrs:{headers:t.headers,items:t.operations,search:t.search,"footer-props":{itemsPerPageText:t.$t("social.spaces.administration.binding.reports.table.footer.rows.per.page")+":"},"disable-sort":""},scopedSlots:t._u([{key:"item",fn:function(e){return[s("tr",[s("td",{staticClass:"text-md-start"},[null!=e.item.space.avatarUrl?s("img",{staticClass:"avatar",attrs:{src:e.item.space.avatarUrl}}):s("img",{staticClass:"avatar",attrs:{src:t.avatar}}),t._v("\n            "+t._s(e.item.space.displayName)+"\n          ")]),t._v(" "),s("td",{staticClass:"text-md-center nameGroupBinding",attrs:{title:e.item.group.name,rel:"tooltip","data-placement":"bottom"}},[t._v("\n            "+t._s(e.item.group.name)+"\n          ")]),t._v(" "),s("td",{staticClass:"text-md-center"},[t._v(t._s(e.item.startDate))]),t._v(" "),s("td",{staticClass:"text-md-center"},["null"!==e.item.endDate?s("div",[t._v(" "+t._s(e.item.endDate)+" ")]):s("div",{staticClass:"inProgress"},[s("v-progress-circular",{attrs:{indeterminate:"",color:"primary"}}),t._v(" "),s("span",[t._v("In progress")])],1)]),t._v(" "),s("td",{staticClass:"text-md-center"},[t._v(t._s(t.getOperationType(e.item.operationType)))]),t._v(" "),s("td",{staticClass:"text-md-center"},[t._v(t._s(e.item.addedUsers))]),t._v(" "),s("td",{staticClass:"text-md-center"},[t._v(t._s(e.item.removedUsers))]),t._v(" "),s("td",{staticClass:"text-md-center"},[s("v-btn",{staticClass:"rightIcon",attrs:{icon:""},on:{click:function(s){return t.uploadCSVFile(e.item.space.id,e.item.operationType,e.item.group.id,e.item.bindingId)}}},[s("v-icon",{staticClass:"uploadFile",attrs:{medium:""}},[t._v("\n                mdi-download\n              ")])],1)],1)])]}}])})],1)])};M._withStripped=!0;var k=Object(n.a)(E,M,[],!1,null,null,null);k.options.__file="src/main/webapp/vue-apps/spaces-administration/components/ExoSpacesAdministrationBindingReports.vue";var N=k.exports;var G={props:{template:{type:Object,default:function(){return{}}}},computed:{applications:function(){for(var t=this.$t(this.template.spaceHomeApplication.portletName+".label.name")+", ",e=this.template.spaceApplicationList.length,s=0;s<e-1;s++)t+=this.$t(this.template.spaceApplicationList[s].portletName+".label.name")+", ";return t+=this.$t(this.template.spaceApplicationList[e-1].portletName+".label.name"),t},bannerImage:function(){return this.$spacesConstants.SPACES_TEMPLATES_API+"/"+this.template.name+"/banner"}},methods:{showBannerImage:function(){eXo.commons.MaskLayerControl.showPicture(this.bannerImage)}}},F=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("tr",[s("td",[t._v(t._s(t.$t("social.spaces.templates.name."+t.template.name)))]),t._v(" "),s("td",[t._v(t._s(t.$t("social.spaces.templates.description."+t.template.name)))]),t._v(" "),s("td",{staticClass:"center"},["hidden"===t.template.visibility?s("span",[t._v(t._s(t.$t("social.spaces.templates.yes")))]):s("span",[t._v(t._s(t.$t("social.spaces.templates.no")))])]),t._v(" "),s("td",{staticClass:"center"},[t._v(t._s(t.template.registration))]),t._v(" "),s("td",[s("span",[t._v(t._s(t.applications))])]),t._v(" "),s("td",[t._v(t._s(t.template.permissionsLabels))]),t._v(" "),s("td",{staticClass:"center"},[s("a",{on:{click:function(e){return t.$emit("display-banner",t.bannerImage)}}},[s("i",{staticClass:"uiIconWatch"})])])])};F._withStripped=!0;var O=Object(n.a)(G,F,[],!1,null,null,null);O.options.__file="src/main/webapp/vue-apps/spaces-administration/components/ExoSpaceTemplate.vue";var R=O.exports,D={components:{"exo-space-template":R},data:function(){return{templates:[],bannerImage:"",preview:!1}},created:function(){this.initTemplates()},methods:{initTemplates:function(){var t=this;(function(){var t=window&&window.eXo&&window.eXo.env&&window.eXo.env.portal&&window.eXo.env.portal.language||"en";return fetch(Vue.prototype.$spacesConstants.SPACES_TEMPLATES_API+"/templates?lang="+t,{credentials:"include"}).then((function(t){return t.json()}))})().then((function(e){t.templates=e}))},displayBanner:function(t){this.bannerImage=t,this.preview=!0}}},L=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"spaceTemplates"},[s("table",{staticClass:"uiGrid table table-hover table-striped"},[s("tr",[s("th",{attrs:{width:"14%"}},[t._v("\n        "+t._s(t.$t("social.spaces.templates.template"))+"\n      ")]),t._v(" "),s("th",{attrs:{width:"24%"}},[t._v("\n        "+t._s(t.$t("social.spaces.templates.description"))+"\n      ")]),t._v(" "),s("th",{attrs:{width:"5%"}},[t._v("\n        "+t._s(t.$t("social.spaces.templates.hidden"))+"\n      ")]),t._v(" "),s("th",{attrs:{width:"10%"}},[t._v("\n        "+t._s(t.$t("social.spaces.templates.registration"))+"\n      ")]),t._v(" "),s("th",{attrs:{width:"25%"}},[t._v("\n        "+t._s(t.$t("social.spaces.templates.applications"))+"\n      ")]),t._v(" "),s("th",{attrs:{width:"20%"}},[t._v("\n        "+t._s(t.$t("social.spaces.templates.permissions"))+"\n      ")]),t._v(" "),s("th",{attrs:{width:"2%"}},[t._v("\n        "+t._s(t.$t("social.spaces.templates.banner"))+"\n      ")])]),t._v(" "),0===t.templates.length?s("tr",[s("td",{staticClass:"empty center",attrs:{colspan:"12"}},[t._v(" "+t._s(t.$t("social.spaces.templates.noTemplates"))+" ")])]):t._l(t.templates,(function(e){return s("exo-space-template",{key:e.name,attrs:{template:e},on:{"display-banner":t.displayBanner}})}))],2),t._v(" "),s("v-dialog",{model:{value:t.preview,callback:function(e){t.preview=e},expression:"preview"}},[s("v-img",{attrs:{src:t.bannerImage}})],1)],1)};L._withStripped=!0;var j=Object(n.a)(D,L,[],!1,null,null,null);j.options.__file="src/main/webapp/vue-apps/spaces-administration/components/ExoSpacesTemplatesSpaces.vue";var V=j.exports,U={props:{applicationsByCategory:{type:Array,default:function(){return[]}}},data:function(){return{applications:[],saving:!1}},created:function(){this.refresh()},methods:{refresh:function(){var t=this;return this.$spaceService.getSpaceApplicationsChoices().then((function(e){return t.applications=e}))},remove:function(t){this.$spaceService.removeSpacesApplication(t.id).then(this.refresh)},openDrawer:function(){this.$refs.spaceSettingAddApplicationDrawer.open()}}},z=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-card",{attrs:{flat:""}},[s("v-container",{staticClass:"border-box-sizing"},[s("v-row",{attrs:{dense:""}},[t._l(t.applications,(function(e){return s("v-col",{key:e.id,staticClass:"SpaceApplicationCard my-1 mx-auto mx-sm-1"},[s("exo-space-application-card",{attrs:{application:e,"use-menu":""},on:{remove:function(s){return t.remove(e)}}})],1)})),t._v(" "),s("v-col",{staticClass:"SpaceApplicationCard dashed-border my-1 mx-auto mx-sm-1"},[s("v-btn",{staticClass:"primary--text",attrs:{width:"100%",height:"100%",text:""},on:{click:t.openDrawer}},[s("v-icon",[t._v("mdi-plus")])],1)],1)],2)],1),t._v(" "),s("exo-space-add-application-drawer",{ref:"spaceSettingAddApplicationDrawer",attrs:{"installed-applications":t.applications,"applications-by-category":t.applicationsByCategory},on:{refresh:t.refresh}})],1)};z._withStripped=!0;var X=Object(n.a)(U,z,[],!1,null,null,null);X.options.__file="src/main/webapp/vue-apps/spaces-administration/components/ExoSpaceApplications.vue";var q=X.exports,H={props:{useMenu:{type:Boolean,default:!1},application:{type:String,default:null}},data:function(){return{displayActionMenu:!1}},computed:{applicationId:function(){return this.application&&this.application.contentId&&this.application.contentId.split("/")[1]},applicationName:function(){return this.application&&(this.application.displayName||this.application.applicationName)},applicationDescription:function(){return this.application&&this.application.description},applicationIcon:function(){return this.applicationId?"uiIconApp"+(""+this.applicationId.charAt(0).toUpperCase()+this.applicationId.substring(1))+" uiIconDefaultApp":""}},mounted:function(){var t=this;this.useMenu&&$(document).on("click",(function(e){e.target&&!$(e.target).parents("#"+t.applicationId).length&&(t.displayActionMenu=!1)}))}},K=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-card",{attrs:{id:t.applicationId,flat:""}},[s("div",{staticClass:"d-flex flex-no-wrap"},[s("v-avatar",{staticClass:"SpaceApplicationCardImage mx-1 my-auto",attrs:{size:"45",tile:""}},[s("i",{class:t.applicationIcon})]),t._v(" "),s("div",{staticClass:"flex-grow-1 SpaceApplicationCardBody text-truncate"},[s("div",{staticClass:"text-truncate subtitle-1 px-1 pt-4 text-color SpaceApplicationCardTitle",attrs:{title:t.applicationName}},[t._v("\n        "+t._s(t.applicationName)+"\n      ")]),t._v(" "),s("v-card-subtitle",{staticClass:"text-truncate subtitle-2 px-1 pt-0 text-sub-title SpaceApplicationCardDescription",attrs:{title:t.applicationDescription}},[t._v("\n        "+t._s(t.applicationDescription||t.applicationName)+"\n      ")])],1),t._v(" "),s("div",{staticClass:"SpaceApplicationCardAction"},[t.useMenu?s("v-btn",{staticClass:"primary--text",class:t.skeleton&&"skeleton-background skeleton-text",attrs:{disabled:t.skeleton,icon:"",text:""},on:{click:function(e){t.displayActionMenu=!0}}},[s("v-icon",{attrs:{size:"16"}},[t._v("mdi-dots-vertical")])],1):s("v-btn",{staticClass:"primary--text",attrs:{text:"",height:"100%",width:"100%px"},on:{click:function(e){return t.$emit("add")}}},[s("v-icon",{attrs:{size:"36"}},[t._v("mdi-plus")])],1),t._v(" "),t.skeleton?t._e():s("v-menu",{ref:"actionMenu",attrs:{attach:"#"+t.applicationId,transition:"slide-x-reverse-transition","offset-y":"",right:"","close-on-click":"","close-on-content-click":""},model:{value:t.displayActionMenu,callback:function(e){t.displayActionMenu=e},expression:"displayActionMenu"}},[s("v-list",{staticClass:"pa-0",attrs:{dense:""}},[s("v-list-item",{on:{click:function(e){return t.$emit("remove")}}},[s("v-list-item-title",[t._v("\n              "+t._s(t.$t("social.spaces.administration.manageSpaces.applications.remove"))+"\n            ")])],1)],1)],1)],1)],1)])};K._withStripped=!0;var W=Object(n.a)(H,K,[],!1,null,null,null);W.options.__file="src/main/webapp/vue-apps/spaces-administration/components/ExoSpaceApplicationCard.vue";var J=W.exports,Q={props:{expanded:{type:Boolean,default:!1},category:{type:Object,default:null},installedApplications:{type:Array,default:function(){return[]}}},computed:{filteredApplications:function(){var t=this;return this.category&&this.category.applications&&this.category.applications.length?this.category.applications.slice().filter((function(e){return!t.installedApplications.find((function(t){return t.id===e.applicationName}))})):[]},categoryName:function(){return this.category&&this.category.name}}},Y=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.filteredApplications&&t.filteredApplications.length?s("v-expansion-panel",{staticClass:"border-color border-radius mt-4"},[s("v-expansion-panel-header",[t._v("\n    "+t._s(t.categoryName)+"\n  ")]),t._v(" "),t.expanded?s("v-divider"):t._e(),t._v(" "),s("v-expansion-panel-content",t._l(t.filteredApplications,(function(e){return s("div",{key:e.id,staticClass:"d-flex flex-no-wrap justify-space-between border-radius border-color SpaceApplicationCard SpaceApplicationCardEmbedded"},[s("exo-space-application-card",{staticClass:"flex-grow-1",attrs:{application:e},on:{add:function(s){return t.$emit("addApplication",e)}}})],1)})),0)],1):t._e()};Y._withStripped=!0;var Z=Object(n.a)(Q,Y,[],!1,null,null,null);Z.options.__file="src/main/webapp/vue-apps/spaces-administration/components/ExoSpaceApplicationCategoryCard.vue";var tt=Z.exports,et={props:{applicationsByCategory:{type:Array,default:function(){return[]}},installedApplications:{type:Array,default:function(){return[]}}},data:function(){return{expanded:0,savingSpace:!1}},watch:{savingSpace:function(){this.savingSpace?this.$refs.spaceApplicationInstallerDrawer.startLoading():this.$refs.spaceApplicationInstallerDrawer.endLoading()}},methods:{open:function(){this.savingSpace=!1,this.$refs.spaceApplicationInstallerDrawer.open()},cancel:function(){this.$refs.spaceApplicationInstallerDrawer.close()},addApplication:function(t){var e=this;this.savingSpace||(this.savingSpace=!0,this.$spaceService.addSpacesApplication(t).then((function(){e.$emit("refresh"),window.setTimeout((function(){e.$refs.spaceApplicationInstallerDrawer.close()}),200)})).catch((function(t){console.warn("Error adding spaces application ",t)})).finally((function(){return e.savingSpace=!1})))}}},st=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("exo-drawer",{ref:"spaceApplicationInstallerDrawer",staticClass:"spaceApplicationInstallerDrawer",attrs:{right:""}},[s("template",{slot:"title"},[t._v("\n    "+t._s(t.$t("social.spaces.administration.manageSpaces.applications"))+"\n  ")]),t._v(" "),s("template",{slot:"content"},[s("v-expansion-panels",{staticClass:"px-4",attrs:{accordion:"",flat:"",focusable:""},model:{value:t.expanded,callback:function(e){t.expanded=e},expression:"expanded"}},t._l(t.applicationsByCategory,(function(e,a){return s("exo-space-application-category-card",{key:e.id,attrs:{category:e,expanded:t.expanded===a,"installed-applications":t.installedApplications},on:{addApplication:t.addApplication}})})),1)],1)],2)};st._withStripped=!0;var at=Object(n.a)(et,st,[],!1,null,null,null);at.options.__file="src/main/webapp/vue-apps/spaces-administration/components/drawer/ExoSpaceAddApplicationDrawer.vue";var it={"exo-spaces-administration-manage-spaces":u,"exo-spaces-administration-manage-permissions":g,"exo-spaces-administration-spaces":C,"exo-spaces-administration-modal":r,"exo-group-binding-drawer":w,"exo-group-binding-second-level-drawer":T,"exo-spaces-administration-binding-reports":N,"exo-space-template":R,"exo-space-templates-spaces":V,"exo-space-applications":q,"exo-space-application-card":J,"exo-space-application-category-card":tt,"exo-space-add-application-drawer":at.exports};for(var nt in it)Vue.component(nt,it[nt]);var ot="undefined"!=typeof eXo?eXo.env.portal.language:"en",rt=Vue.prototype.$spacesConstants.PORTAL+"/"+Vue.prototype.$spacesConstants.PORTAL_REST+"/i18n/bundle/locale.portlet.social.SpacesAdministrationPortlet-"+ot+".json";if(Vue.directive("exo-tooltip",(function(t,e){var s=$(t),a=Object.keys(e.modifiers)[0],i=Object.keys(e.modifiers)[1];s.attr("data-original-title",e.value),a&&s.attr("data-placement",a),i&&s.attr("data-container",i),s.tooltip()})),extensionRegistry){var ct=extensionRegistry.loadComponents("SpacesAdministration");ct&&ct.length>0&&ct.forEach((function(t){Vue.component(t.componentName,t.componentOptions)}))}var lt="spacesAdministration";function pt(t){exoi18n.loadLanguageAsync(ot,rt).then((function(e){var s=document.createElement("div");s.id=lt,Vue.createApp({data:{applicationsByCategory:t},template:'<exo-spaces-administration-spaces v-cacheable id="'+lt+'" :applications-by-category="applicationsByCategory"></exo-spaces-administration-spaces>',i18n:e,vuetify:Vue.prototype.vuetifyOptions},s,"Spaces Administration")}))}}})}));